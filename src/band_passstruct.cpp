#include "band_passstruct.h"
#include "fir_list.h"
//#include <fstream>
//#include <iostream>
using namespace std;
int band_passstruct(FIR_LIST *i_fir_list,double &dataOut)
	{
	int firLength;
	double datamid;
	FIR_LIST *now_fir;
	if (i_fir_list->sample_rata==50)
		{
		firLength=81;
		double Fir[81]={-4.7987787339820936e-04,
			-8.9057350076593368e-04,
			-7.2903341056485352e-04,
			-9.3968046651590189e-04,
			-2.0015152670250906e-03,
			-1.8457782153191327e-03,
			-1.4331943313841396e-03,
			-3.2987790655067970e-03,
			-3.9188767708761094e-03,
			-2.2358326021832526e-03,
			-4.2761095213556272e-03,
			-6.9685597648698229e-03,
			-4.0562398557881119e-03,
			-4.5086713435378723e-03,
			-1.0324010165847381e-02,
			-7.7980789590883538e-03,
			-4.2123548102063557e-03,
			-1.2580685653923828e-02,
			-1.3896183105007932e-02,
			-4.6707793854684938e-03,
			-1.2139776287417038e-02,
			-2.1492365469531257e-02,
			-8.0968892823001046e-03,
			-8.2631555848332473e-03,
			-2.7966602054323594e-02,
			-1.6735759731169867e-02,
			-2.1834926757662077e-03,
			-2.9254096192636532e-02,
			-3.1499163705017090e-02,
			2.3107659525776346e-03,
			-2.0832464828927390e-02,
			-5.0853889965031082e-02,
			-1.1624388651572256e-03,
			1.8841462457617236e-03,
			-7.0730297852423088e-02,
			-2.3669862992490260e-02,
			4.9655253129437991e-02,
			-8.5754335252881606e-02,
			-1.1745446174509039e-01,
			2.7761355362248835e-01,
			5.7538029520670841e-01,
			2.7761355362248769e-01,
			-1.1745446174508975e-01,
			-8.5754335252880912e-02,
			4.9655253129437457e-02,
			-2.3669862992489934e-02,
			-7.0730297852421936e-02,
			1.8841462457616889e-03,
			-1.1624388651572048e-03,
			-5.0853889965029819e-02,
			-2.0832464828926815e-02,
			2.3107659525775617e-03,
			-3.1499163705016028e-02,
			-2.9254096192635470e-02,
			-2.1834926757661245e-03,
			-1.6735759731169159e-02,
			-2.7966602054322321e-02,
			-8.2631555848328413e-03,
			-8.0968892822996814e-03,
			-2.1492365469530057e-02,
			-1.2139776287416327e-02,
			-4.6707793854682024e-03,
			-1.3896183105007011e-02,
			-1.2580685653922945e-02,
			-4.2123548102060435e-03,
			-7.7980789590877501e-03,
			-1.0324010165846531e-02,
			-4.5086713435374846e-03,
			-4.0562398557877433e-03,
			-6.9685597648691568e-03,
			-4.2761095213552005e-03,
			-2.2358326021830158e-03,
			-3.9188767708756775e-03,
			-3.2987790655064630e-03,
			-1.4331943313839600e-03,
			-1.8457782153188935e-03,
			-2.0015152670248100e-03,
			-9.3968046651576485e-04,
			-7.2903341056474108e-04,
			-8.9057350076577387e-04,
			-4.7987787339812745e-04,
			};
		//if(dataNum<81)
		//	{
		//	return -1;
		//	}
		dataOut=0;
		datamid=0.0;
		now_fir=i_fir_list;
		for(int i=0;i<firLength;i++)
			{
			datamid=datamid+now_fir->data*Fir[i];
			now_fir=now_fir->last;
			}
		dataOut=datamid;
		return 1;
		}
	else if(i_fir_list->sample_rata==100)
		{
		//if(dataNum<191)
		//	{
		//	return -1;
		//	}
		firLength=191;
		double Fir[191]={-1.0096108503799409e-03,
			-1.3950482601184145e-03,
			-2.2527488512072823e-03,
			-2.9478325266950626e-03,
			-2.9241282941009309e-03,
			-2.1964877583498382e-03,
			-1.3932186866449717e-03,
			-1.2683702309322061e-03,
			-2.0587294816955936e-03,
			-3.2307108495224480e-03,
			-3.8728518839418980e-03,
			-3.4512139742405856e-03,
			-2.3045215990983815e-03,
			-1.4270997345429326e-03,
			-1.6661388536950924e-03,
			-2.9780040916341042e-03,
			-4.3915096269727697e-03,
			-4.7685469089617048e-03,
			-3.7708238360917514e-03,
			-2.2154696854772564e-03,
			-1.4639880273141859e-03,
			-2.2943598211664952e-03,
			-4.1868456476722750e-03,
			-5.6701595913976281e-03,
			-5.5118721440431517e-03,
			-3.7942060764075075e-03,
			-1.9423711063670419e-03,
			-1.6026343679009464e-03,
			-3.2475373165740244e-03,
			-5.6846723133800129e-03,
			-6.9564131921419870e-03,
			-5.9605784961465312e-03,
			-3.4555395583318526e-03,
			-1.5446848893690436e-03,
			-1.9729728155626920e-03,
			-4.6090756549750133e-03,
			-7.4249335517157806e-03,
			-8.0957173947760943e-03,
			-5.9658402480322953e-03,
			-2.7259882160986819e-03,
			-1.1326443571281007e-03,
			-2.7279163951726233e-03,
			-6.4379538633729206e-03,
			-9.3078652451388747e-03,
			-8.8937043531173623e-03,
			-5.3843686320969916e-03,
			-1.6236386602042371e-03,
			-8.6795329695463013e-04,
			-4.0358532878403434e-03,
			-8.7602540790057502e-03,
			-1.1177665546498936e-02,
			-9.1197841612625230e-03,
			-4.0841129832286773e-03,
			-2.1710181588843413e-04,
			-9.6506787169073674e-04,
			-6.0820299780298100e-03,
			-1.1571060989487639e-02,
			-1.2821283663388564e-02,
			-8.4992305065876590e-03,
			-1.9327687604891049e-03,
			1.3784923032710335e-03,
			-1.7050246429269466e-03,
			-9.0969663617697753e-03,
			-1.4856515017832844e-02,
			-1.3958829431456619e-02,
			-6.6666698386317613e-03,
			1.2562792472859616e-03,
			3.0131140370235859e-03,
			-3.4963797956000272e-03,
			-1.3462418900154581e-02,
			-1.8662168940531118e-02,
			-1.4193048970612182e-02,
			-2.9949266075571710e-03,
			5.9029683387124953e-03,
			4.5197236235567867e-03,
			-7.1079148261703534e-03,
			-2.0084767678293092e-02,
			-2.3311188040322776e-02,
			-1.2784038623879721e-02,
			4.0762178712041601e-03,
			1.3346915816899603e-02,
			5.7359043739684543e-03,
			-1.4720837908786619e-02,
			-3.2099574332974203e-02,
			-3.0404413640455791e-02,
			-7.3824560015768315e-03,
			2.0903522723558492e-02,
			3.0096061155356627e-02,
			6.5259347250955285e-03,
			-3.8462292200619481e-02,
			-7.0869487224785352e-02,
			-5.4107874682352952e-02,
			2.5259979404526650e-02,
			1.4370865641013861e-01,
			2.4982563870147181e-01,
			2.9230819959096299e-01,
			2.4982563870147181e-01,
			1.4370865641013864e-01,
			2.5259979404526654e-02,
			-5.4107874682352966e-02,
			-7.0869487224785366e-02,
			-3.8462292200619495e-02,
			6.5259347250955302e-03,
			3.0096061155356641e-02,
			2.0903522723558506e-02,
			-7.3824560015768349e-03,
			-3.0404413640455815e-02,
			-3.2099574332974223e-02,
			-1.4720837908786630e-02,
			5.7359043739684604e-03,
			1.3346915816899613e-02,
			4.0762178712041627e-03,
			-1.2784038623879739e-02,
			-2.3311188040322804e-02,
			-2.0084767678293116e-02,
			-7.1079148261703612e-03,
			4.5197236235567911e-03,
			5.9029683387125048e-03,
			-2.9949266075571736e-03,
			-1.4193048970612207e-02,
			-1.8662168940531153e-02,
			-1.3462418900154604e-02,
			-3.4963797956000320e-03,
			3.0131140370235911e-03,
			1.2562792472859642e-03,
			-6.6666698386317743e-03,
			-1.3958829431456649e-02,
			-1.4856515017832875e-02,
			-9.0969663617697927e-03,
			-1.7050246429269492e-03,
			1.3784923032710370e-03,
			-1.9327687604891093e-03,
			-8.4992305065876780e-03,
			-1.2821283663388595e-02,
			-1.1571060989487670e-02,
			-6.0820299780298256e-03,
			-9.6506787169073935e-04,
			-2.1710181588843587e-04,
			-4.0841129832286877e-03,
			-9.1197841612625508e-03,
			-1.1177665546498967e-02,
			-8.7602540790057779e-03,
			-4.0358532878403556e-03,
			-8.6795329695463187e-04,
			-1.6236386602042424e-03,
			-5.3843686320970089e-03,
			-8.8937043531173883e-03,
			-9.3078652451389042e-03,
			-6.4379538633729406e-03,
			-2.7279163951726333e-03,
			-1.1326443571281050e-03,
			-2.7259882160986914e-03,
			-5.9658402480323187e-03,
			-8.0957173947761238e-03,
			-7.4249335517158083e-03,
			-4.6090756549750297e-03,
			-1.9729728155626998e-03,
			-1.5446848893690497e-03,
			-3.4555395583318661e-03,
			-5.9605784961465555e-03,
			-6.9564131921420139e-03,
			-5.6846723133800337e-03,
			-3.2475373165740378e-03,
			-1.6026343679009538e-03,
			-1.9423711063670500e-03,
			-3.7942060764075232e-03,
			-5.5118721440431751e-03,
			-5.6701595913976532e-03,
			-4.1868456476722923e-03,
			-2.2943598211665065e-03,
			-1.4639880273141920e-03,
			-2.2154696854772668e-03,
			-3.7708238360917696e-03,
			-4.7685469089617273e-03,
			-4.3915096269727888e-03,
			-2.9780040916341185e-03,
			-1.6661388536951005e-03,
			-1.4270997345429397e-03,
			-2.3045215990983915e-03,
			-3.4512139742406017e-03,
			-3.8728518839419141e-03,
			-3.2307108495224631e-03,
			-2.0587294816956044e-03,
			-1.2683702309322122e-03,
			-1.3932186866449782e-03,
			-2.1964877583498486e-03,
			-2.9241282941009409e-03,
			-2.9478325266950032e-03,
			-2.2527488512072988e-03,
			-1.3950482601184288e-03,
			-1.0096108503799466e-03,



			};
		dataOut=0;
		datamid=0.0;
		now_fir=i_fir_list;
		for(int i=0;i<firLength;i++)
			{
			datamid=datamid+now_fir->data*Fir[i];
			now_fir=now_fir->last;
			}
		dataOut=datamid;
		return 1;
		}
	else if(i_fir_list->sample_rata==200)
		{
		firLength=301;
		//if(dataNum<301)
		//	{
		//	return -1;
		//	}
		double Fir[301]={-1.5738968347689628e-04,
			-1.7735491639294824e-04,
			-2.1736124094126334e-04,
			-2.7483905489700012e-04,
			-3.4266813193163193e-04,
			-4.1030106015100642e-04,
			-4.6590026089908369e-04,
			-4.9908565647348161e-04,
			-5.0368485858866155e-04,
			-4.7980096272096865e-04,
			-4.3459912811287315e-04,
			-3.8145932023061683e-04,
			-3.3750551620498548e-04,
			-3.1992389949451273e-04,
			-3.4182841427864982e-04,
			-4.0862956128619334e-04,
			-5.1584657092479044e-04,
			-6.4905509995696496e-04,
			-7.8621869932361810e-04,
			-9.0210075583715586e-04,
			-9.7391805542624665e-04,
			-9.8700968544837217e-04,
			-9.3916478239759282e-04,
			-8.4243680789333406e-04,
			-7.2175694572392348e-04,
			-6.1035700575723644e-04,
			-5.4277523357811595e-04,
			-5.4686940852928067e-04,
			-6.3663386121590247e-04,
			-8.0759555645765300e-04,
			-1.0361182005924534e-03,
			-1.2831404037890676e-03,
			-1.5018735401092786e-03,
			-1.6480075080620943e-03,
			-1.6902522160705587e-03,
			-1.6187724217614032e-03,
			-1.4493561975616916e-03,
			-1.2219729859712122e-03,
			-9.9357826868147307e-04,
			-8.2635727901226479e-04,
			-7.7376662014393995e-04,
			-8.6744203333462462e-04,
			-1.1080893063261379e-03,
			-1.4627990304460733e-03,
			-1.8699254737555102e-03,
			-2.2510004567963386e-03,
			-2.5274762640143944e-03,
			-2.6387982693635644e-03,
			-2.5577291433000224e-03,
			-2.2991713422791313e-03,
			-1.9199554375127431e-03,
			-1.5089616520395268e-03,
			-1.1691295962667500e-03,
			-9.9489997697284663e-04,
			-1.0499463509793807e-03,
			-1.3503416137936456e-03,
			-1.8574229089935940e-03,
			-2.4826907958067261e-03,
			-3.1044754803961948e-03,
			-3.5933784465069858e-03,
			-3.8412720032523487e-03,
			-3.7874595744862814e-03,
			-3.4358093523187173e-03,
			-2.8583194491591827e-03,
			-2.1833724736893233e-03,
			-1.5703255973366405e-03,
			-1.1753198885291142e-03,
			-1.1155270970319925e-03,
			-1.4398884580665875e-03,
			-2.1134488140001156e-03,
			-3.0197519628140561e-03,
			-3.9819340454248483e-03,
			-4.7989298359828224e-03,
			-5.2895315090100694e-03,
			-5.3347847421739408e-03,
			-4.9089772067057768e-03,
			-4.0914494807903403e-03,
			-3.0553263232042977e-03,
			-2.0342643861179957e-03,
			-1.2733736807093051e-03,
			-9.7444743993873348e-04,
			-1.2475579059199422e-03,
			-2.0803813561700931e-03,
			-3.3333020239832397e-03,
			-4.7630034661209093e-03,
			-6.0709747972200970e-03,
			-6.9675036714509026e-03,
			-7.2376487999995407e-03,
			-6.7944115044867989e-03,
			-5.7063144258142880e-03,
			-4.1915922126739454e-03,
			-2.5782559165073099e-03,
			-1.2369414329412996e-03,
			-5.0000439657026010e-04,
			-5.8423897384719532e-04,
			-1.5348385257546453e-03,
			-3.2045099423030948e-03,
			-5.2745989273480509e-03,
			-7.3160653117819293e-03,
			-8.8790713655859960e-03,
			-9.5928420397288355e-03,
			-9.2540312860429144e-03,
			-7.8830675166212654e-03,
			-5.7338544840285889e-03,
			-3.2517317719462481e-03,
			-9.8584385474959567e-04,
			5.2737308823975636e-04,
			8.8539160937573045e-04,
			-8.1278022656460546e-05,
			-2.2555652814956074e-03,
			-5.2408116952406677e-03,
			-8.4306412604161132e-03,
			-1.1130333116173553e-02,
			-1.2706151017152620e-02,
			-1.2731360484584070e-02,
			-1.1096337143008480e-02,
			-8.0559256539294525e-03,
			-4.1992280006084327e-03,
			-3.4304817834827792e-04,
			2.6329471431176831e-03,
			3.9772854451277720e-03,
			3.2439302636812226e-03,
			4.1585700052789186e-04,
			-4.0560792879092526e-03,
			-9.3139281317865166e-03,
			-1.4247613714347402e-02,
			-1.7717974336771903e-02,
			-1.8805230945223246e-02,
			-1.7031601742540699e-02,
			-1.2508339273051561e-02,
			-5.9695509104043653e-03,
			1.3240748146035209e-03,
			7.8028250387371500e-03,
			1.1892350786033203e-02,
			1.2350080720461974e-02,
			8.5682310423650879e-03,
			7.7979549076405419e-04,
			-9.8815104670206631e-03,
			-2.1491211233783846e-02,
			-3.1606466363625955e-02,
			-3.7661758554831441e-02,
			-3.7422874756706775e-02,
			-2.9419394015175061e-02,
			-1.3275490993334308e-02,
			1.0126511572124210e-02,
			3.8687978116648487e-02,
			6.9343825778920370e-02,
			9.8485912360757433e-02,
			1.2249350941875659e-01,
			1.3828375204993210e-01,
			1.4378957268385817e-01,
			1.3828375204993198e-01,
			1.2249350941875640e-01,
			9.8485912360757155e-02,
			6.9343825778920107e-02,
			3.8687978116648321e-02,
			1.0126511572124158e-02,
			-1.3275490993334225e-02,
			-2.9419394015174839e-02,
			-3.7422874756706463e-02,
			-3.7661758554831101e-02,
			-3.1606466363625629e-02,
			-2.1491211233783607e-02,
			-9.8815104670205468e-03,
			7.7979549076404465e-04,
			8.5682310423649734e-03,
			1.2350080720461792e-02,
			1.1892350786033016e-02,
			7.8028250387370190e-03,
			1.3240748146034983e-03,
			-5.9695509104042534e-03,
			-1.2508339273051316e-02,
			-1.7031601742540346e-02,
			-1.8805230945222844e-02,
			-1.7717974336771518e-02,
			-1.4247613714347076e-02,
			-9.3139281317862910e-03,
			-4.0560792879091503e-03,
			4.1585700052788145e-04,
			3.2439302636811385e-03,
			3.9772854451276627e-03,
			2.6329471431176059e-03,
			-3.4304817834826751e-04,
			-4.1992280006083061e-03,
			-8.0559256539291975e-03,
			-1.1096337143008119e-02,
			-1.2731360484583639e-02,
			-1.2706151017152188e-02,
			-1.1130333116173159e-02,
			-8.4306412604158061e-03,
			-5.2408116952404717e-03,
			-2.2555652814955185e-03,
			-8.1278022656457077e-05,
			8.8539160937569489e-04,
			5.2737308823973467e-04,
			-9.8584385474955491e-04,
			-3.2517317719461085e-03,
			-5.7338544840283339e-03,
			-7.8830675166209115e-03,
			-9.2540312860424894e-03,
			-9.5928420397283845e-03,
			-8.8790713655855676e-03,
			-7.3160653117815720e-03,
			-5.2745989273477829e-03,
			-3.2045099423029331e-03,
			-1.5348385257545655e-03,
			-5.8423897384716496e-04,
			-5.0000439657023278e-04,
			-1.2369414329412311e-03,
			-2.5782559165071638e-03,
			-4.1915922126737068e-03,
			-5.7063144258139575e-03,
			-6.7944115044863947e-03,
			-7.2376487999991001e-03,
			-6.9675036714504724e-03,
			-6.0709747972197223e-03,
			-4.7630034661206057e-03,
			-3.3333020239830237e-03,
			-2.0803813561699586e-03,
			-1.2475579059198585e-03,
			-9.7444743993866712e-04,
			-1.2733736807092175e-03,
			-2.0342643861178543e-03,
			-3.0553263232040791e-03,
			-4.0914494807900480e-03,
			-4.9089772067054177e-03,
			-5.3347847421735478e-03,
			-5.2895315090096687e-03,
			-4.7989298359824538e-03,
			-3.9819340454245395e-03,
			-3.0197519628138176e-03,
			-2.1134488139999473e-03,
			-1.4398884580664711e-03,
			-1.1155270970319006e-03,
			-1.1753198885290160e-03,
			-1.5703255973365086e-03,
			-2.1833724736891359e-03,
			-2.8583194491589325e-03,
			-3.4358093523184151e-03,
			-3.7874595744859440e-03,
			-3.8412720032520008e-03,
			-3.5933784465066554e-03,
			-3.1044754803959073e-03,
			-2.4826907958064920e-03,
			-1.8574229089934173e-03,
			-1.3503416137935148e-03,
			-1.0499463509792775e-03,
			-9.9489997697274797e-04,
			-1.1691295962666325e-03,
			-1.5089616520393724e-03,
			-1.9199554375125441e-03,
			-2.2991713422788910e-03,
			-2.5577291432997522e-03,
			-2.6387982693632807e-03,
			-2.5274762640141194e-03,
			-2.2510004567960896e-03,
			-1.8699254737553005e-03,
			-1.4627990304459074e-03,
			-1.1080893063260097e-03,
			-8.6744203333452400e-04,
			-7.7376662014384866e-04,
			-8.2635727901216656e-04,
			-9.9357826868135316e-04,
			-1.2219729859710637e-03,
			-1.4493561975615118e-03,
			-1.6187724217612007e-03,
			-1.6902522160703449e-03,
			-1.6480075080618820e-03,
			-1.5018735401090826e-03,
			-1.2831404037888989e-03,
			-1.0361182005923146e-03,
			-8.0759555645754327e-04,
			-6.3663386121581508e-04,
			-5.4686940852920413e-04,
			-5.4277523357803897e-04,
			-6.1035700575714949e-04,
			-7.2175694572381886e-04,
			-8.4243680789320959e-04,
			-9.3916478239745296e-04,
			-9.8700968544822277e-04,
			-9.7391805542609714e-04,
			-9.0210075583701556e-04,
			-7.8621869932349417e-04,
			-6.4905509995686088e-04,
			-5.1584657092470653e-04,
			-4.0862956128612563e-04,
			-3.4182841427859273e-04,
			-3.1992389949445831e-04,
			-3.3750551620492721e-04,
			-3.8145932023054988e-04,
			-4.3459912811279558e-04,
			-4.7980096272088148e-04,
			-5.0368485858856907e-04,
			-4.9908565647338837e-04,
			-4.6590026089899489e-04,
			-4.1030106015092717e-04,
			-3.4266813193156422e-04,
			-2.7483905489694477e-04,
			-2.1736124094121881e-04,
			-1.7735491639291114e-04,
			-1.5738968347686275e-04,


			};
		dataOut=0;
		datamid=0.0;
		now_fir=i_fir_list;
		for(int i=0;i<firLength;i++)
			{
			datamid=datamid+now_fir->data*Fir[i];
			now_fir=now_fir->last;
			}
		dataOut=datamid;
		return 1;
		}

	//double *Fir=new double[firLength];

	return 0;

	};