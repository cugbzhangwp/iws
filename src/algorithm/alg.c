#include <alg.h>
//#include <fstream>
//#include <iostream>
#include <math.h>
#include <filerw.h>
#include <commonfun.h>

#include <app_main.h>
#include <printcolor.h>
extern APP_S app;
#define alg_locat() printf(BLUE"file:%s,function：%s,line:%d\n"NONE,__FILE__,__FUNCTION__,__LINE__)


float ipga(float pga,float multiple,float increment)
	{
		printf("pga=%f\n",pga);
    // multiple 默认值 3.73 
	// increment 默认值 -1.23
	float tmp;
	tmp=(multiple*log10f(pga)+increment);
	return tmp;
	}
float ipgv(float pgv,float multiple,float increment)
	{
	// multiple 默认值 3.61 
	// increment 默认值 2.72
	return(multiple*log10(pgv)+increment);
	}




int slt_lltstru(FIR_LIST * data,int slt_length,int llt_length,float * result,float threshold,int channel)
	{
		//printf("result=%f\n",*result);
	int i,j;
	double K1,K2;
	double i_slt=0;
	double i_llt=0;
	double FF1=0;
	double FF2=0;
	double FF3=0;
	double FF4=0;	
	// float K1,K2;
	// float i_slt=0;
	// float i_llt=0;
	// float FF1=0;
	// float FF2=0;
	// float FF3=0;
	// float FF4=0;
	FIR_LIST *now_fir;
	now_fir=data;
	for(i=0;i>-1*slt_length;i--)
		{
		FF1+=fabs(now_fir->band_pass_data[channel]);
		FF2+=fabs(now_fir->band_pass_data[channel]-now_fir->last->band_pass_data[channel]);
		//printf("now=%f,last=%f\n",now_fir->band_pass_data[channel],now_fir->last->band_pass_data[channel]);
//printf("ff1=%f,ff2=%f\n",FF1,FF2);


		now_fir=now_fir->last;
		}
		//printf("ff1=%f,ff2=%f\n",FF1,FF2);
	K1=FF1/FF2;
	FF3=FF1;
	FF4=FF2;
	for(i=-1*slt_length;i>-1*llt_length;i--)
		{
		FF3+=fabs(now_fir->band_pass_data[channel]);
		FF4+=fabs(now_fir->band_pass_data[channel]-now_fir->last->band_pass_data[channel]);
		now_fir=now_fir->last;
		}
	K2=FF3/FF4;



	now_fir=data;
	// for(i=0;i>-1*slt_length;i--)
	// 	{
	// 	i_slt+=pow(now_fir->band_pass_data[channel],2)+K1*pow((now_fir->band_pass_data[channel]-now_fir->last->band_pass_data[channel]),2);
	// 	now_fir=now_fir->last;
	// 	}
	// i_slt=i_slt/slt_length;

	// now_fir=data;
	// for(i=0;i>-1*llt_length;i--)
	// 	{
	// 	i_llt+=pow(now_fir->band_pass_data[channel],2)+K2*pow((now_fir->band_pass_data[channel]-now_fir->last->band_pass_data[channel]),2);
	// 	now_fir=now_fir->last;
	// 	}
	//printf("K1=%f\n",K1);
	for(i=0;i>-1*slt_length;i--)
		{
		i_slt+=now_fir->band_pass_data[channel]*now_fir->band_pass_data[channel]+K1*(now_fir->band_pass_data[channel]-now_fir->last->band_pass_data[channel])*(now_fir->band_pass_data[channel]-now_fir->last->band_pass_data[channel]);
		now_fir=now_fir->last;
		//printf("i_slt=%f,now_fir->band_pass_data[channel]=%f\n",i_slt,now_fir->band_pass_data[channel]);
		//printf("i=%d\n",i);
		}
	i_slt=i_slt/slt_length;

	now_fir=data;
	for(i=0;i>-1*llt_length;i--)
		{
		i_llt+=now_fir->band_pass_data[channel]*now_fir->band_pass_data[channel]+K2*(now_fir->band_pass_data[channel]-now_fir->last->band_pass_data[channel])*(now_fir->band_pass_data[channel]-now_fir->last->band_pass_data[channel]);
		now_fir=now_fir->last;
		}

	i_llt=i_llt/llt_length;
		//printf("i_llt=%f\n",i_llt);
		//printf("i_slt=%f\n",i_slt);
	*result=i_slt/i_llt;
		//printf("*result=%f\n",*result);
		//exit(0);
	if(*result >threshold)
		return 2;

	return 1;
	}

int slt_lltstru_2(FIR_LIST *data,int slt_length,int llt_length,float * result,float threshold,int channel)
	{
	int i,j;
	double i_slt=0;
	double i_llt=0;
	FIR_LIST *now_fir;
	now_fir=data;
	for(i=0;i<slt_length;i++)
		{
		i_slt+=fabs(now_fir->band_pass_data[channel]);
		now_fir=now_fir->last;
		}
	i_slt=i_slt/slt_length;
	now_fir=data;
	for(i=0;i<llt_length;i++)
		{
		i_llt+=fabs(now_fir->band_pass_data[channel]);
		now_fir=now_fir->last;
		}
	i_llt=i_llt/llt_length;
	*result=i_slt/i_llt;
	if(*result>threshold)
		return 2;
	return 1;








	}







int resample(int *dataIn,int style,int dataNum,int * dataOut)
	{
		int firLength;
		long double datamid;
		//printf(GREEN"function：%s,line:%d\n"NONE,__FUNCTION__,__LINE__);
		if (style==1)
			{
			 firLength=81;
			double Fir[81]={-1.5161901918414053e-19,
				-1.3171873168955531e-04,
				-2.9402280265835001e-04,
				-3.9185943740712413e-04,
				-3.1443067718444446e-04,
				5.8317890150673822e-19,
				4.9997651103108394e-04,
				9.9729893348401012e-04,
				1.2147021670894812e-03,
				9.0487760884773775e-04,
				-1.3510472167157758e-18,
				-1.2804381175276194e-03,
				-2.4370325743733852e-03,
				-2.8483476391215875e-03,
				-2.0457085555626343e-03,
				2.4638192511638627e-18,
				2.7217450624164034e-03,
				5.0471841202413114e-03,
				5.7634094528633429e-03,
				4.0544666660245242e-03,
				-3.8355839949151620e-18,
				-5.2122114976857125e-03,
				-9.5334196754276040e-03,
				-1.0762035644408372e-02,
				-7.5021648812564797e-03,
				5.2876893652680329e-18,
				9.5431240616842255e-03,
				1.7438984172884482e-02,
				1.9736306024912914e-02,
				1.3848731694313859e-02,
				-6.5820463410742714e-18,
				-1.8132334723451556e-02,
				-3.3977996864444492e-02,
				-3.9834727355845638e-02,
				-2.9361632781303323e-02,
				7.4785239447841768e-18,
				4.5552517600021276e-02,
				9.9436201005797670e-02,
				1.5041007073292570e-01,
				1.8685366655610189e-01,
				2.0007363917741719e-01,
				1.8685366655610142e-01,
				1.5041007073292489e-01,
				9.9436201005796879e-02,
				4.5552517600020784e-02,
				7.4785239447840736e-18,
				-2.9361632781302840e-02,
				-3.9834727355844854e-02,
				-3.3977996864443742e-02,
				-1.8132334723451108e-02,
				-6.5820463410740904e-18,
				1.3848731694313431e-02,
				1.9736306024912251e-02,
				1.7438984172883847e-02,
				9.5431240616838508e-03,
				5.2876893652678103e-18,
				-7.5021648812561379e-03,
				-1.0762035644407846e-02,
				-9.5334196754271079e-03,
				-5.2122114976854202e-03,
				-3.8355839949149371e-18,
				4.0544666660242727e-03,
				5.7634094528629595e-03,
				5.0471841202409566e-03,
				2.7217450624162018e-03,
				2.4638192511636717e-18,
				-2.0457085555624665e-03,
				-2.8483476391213424e-03,
				-2.4370325743731645e-03,
				-1.2804381175274971e-03,
				-1.3510472167156411e-18,
				9.0487760884764190e-04,
				1.2147021670893474e-03,
				9.9729893348390907e-04,
				4.9997651103102117e-04,
				5.8317890150666272e-19,
				-3.1443067718440050e-04,
				-3.9185943740706694e-04,
				-2.9402280265830463e-04,
				-1.3171873168953168e-04,
				-1.5161901918411441e-19
         };
			if(dataNum<81)
				{
				return -1;
				}
			*dataOut=0;
			datamid=0.0;
			int i;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+dataIn[i]*Fir[i];
				}
					*dataOut=datamid;
					return 1;
			}
		else if(style==2)
			{
			if(dataNum<61)
				{
				return -1;
				}
			firLength=61;
			double Fir[61]={-3.2348234619263567e-19,
				-3.3415595420705109e-04,
				-3.0670110747318529e-04,
				4.3391389961127552e-04,
				9.5870648046352826e-04,
				-1.6402157715806674e-18,
				-1.6556799915545086e-03,
				-1.3062100116589058e-03,
				1.6422273170117606e-03,
				3.2977025724637622e-03,
				-4.1692058844119582e-18,
				-4.9194874742017865e-03,
				-3.6650032194538774e-03,
				4.3863656112779568e-03,
				8.4426967037423816e-03,
				-7.7203342859475651e-18,
				-1.1779929034147759e-02,
				-8.5576240644269948e-03,
				1.0041578083565299e-02,
				1.9057865748571497e-02,
				-1.1528002976818311e-17,
				-2.6369189179314897e-02,
				-1.9311886713913297e-02,
				2.3097584850281579e-02,
				4.5341934247048722e-02,
				-1.4481582630762510e-17,
				-7.2199740610359955e-02,
				-6.0744764840721985e-02,
				9.2475404394678731e-02,
				3.0192029309492163e-01,
				4.0010819839558842e-01,
				3.0192029309492713e-01,
				9.2475404394682131e-02,
				-6.0744764840725364e-02,
				-7.2199740610365326e-02,
				-1.4481582630763856e-17,
				4.5341934247053801e-02,
				2.3097584850284621e-02,
				-1.9311886713916215e-02,
				-2.6369189179319401e-02,
				-1.1528002976820511e-17,
				1.9057865748575528e-02,
				1.0041578083567629e-02,
				-8.5576240644291684e-03,
				-1.1779929034151008e-02,
				-7.7203342859498685e-18,
				8.4426967037450982e-03,
				4.3863656112794747e-03,
				-3.6650032194552404e-03,
				-4.9194874742037450e-03,
				-4.1692058844137385e-18,
				3.2977025724652670e-03,
				1.6422273170125636e-03,
				-1.3062100116595881e-03,
				-1.6556799915554371e-03,
				-1.6402157715816555e-18,
				9.5870648046415179e-04,
				4.3391389961158002e-04,
				-3.0670110747342056e-04,
				-3.3415595420733412e-04,
				-3.2348234619295537e-19


				};
			*dataOut=0;
			datamid=0.0;
			int i;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+dataIn[i]*Fir[i];
				}
					*dataOut=datamid;
					return 1;
			}
		else if(style==3)
			{
			firLength=41;
			if(dataNum<41)
				{
				return -1;
				}
			double Fir[41]={-7.3284265229395259e-19,
				-4.1547947040337577e-04,
				1.1272268649464001e-03,
				-1.7550418789731162e-03,
				1.6036848377644567e-03,
				-5.7033331818013761e-18,
				-3.1485604656425357e-03,
				6.8646267387227214e-03,
				-9.0725372263939386e-03,
				7.2968954436708252e-03,
				-1.5639553502983742e-17,
				-1.1963187238009527e-02,
				2.4561067319390683e-02,
				-3.1150928074463683e-02,
				2.4547062448363504e-02,
				-2.6438162476823793e-17,
				-4.2106213750287495e-02,
				9.5140610547468626e-02,
				-1.4747517509583127e-01,
				1.8590138710923029e-01,
				8.0008912378089347e-01,
				1.8590138710923579e-01,
				-1.4747517509584002e-01,
				9.5140610547477092e-02,
				-4.2106213750292561e-02,
				-2.6438162476827789e-17,
				2.4547062448367997e-02,
				-3.1150928074470383e-02,
				2.4561067319396789e-02,
				-1.1963187238012915e-02,
				-1.5639553502988734e-17,
				7.2968954436734273e-03,
				-9.0725372263975451e-03,
				6.8646267387257069e-03,
				-3.1485604656440701e-03,
				-5.7033331818044607e-18,
				1.6036848377654191e-03,
				-1.7550418789742852e-03,
				1.1272268649472424e-03,
				-4.1547947040373209e-04,
				-7.3284265229469994e-19

				};
			*dataOut=0;
			datamid=0.0;
			int i;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+dataIn[i]*Fir[i];
				}
					*dataOut=datamid;
					return 1;
			}

		//double *Fir=new double[firLength];

		return 0;

	};
int band_passstruct_20180715(FIR_LIST *i_fir_list)
	{
	int firLength,j;
	double datamid;
	FIR_LIST *now_fir;
	if (i_fir_list->sample_rata==50)
		{
		firLength=81;
		double Fir[81]={-4.7987787339820936e-04,
			-8.9057350076593368e-04,
			-7.2903341056485352e-04,
			-9.3968046651590189e-04,
			-2.0015152670250906e-03,
			-1.8457782153191327e-03,
			-1.4331943313841396e-03,
			-3.2987790655067970e-03,
			-3.9188767708761094e-03,
			-2.2358326021832526e-03,
			-4.2761095213556272e-03,
			-6.9685597648698229e-03,
			-4.0562398557881119e-03,
			-4.5086713435378723e-03,
			-1.0324010165847381e-02,
			-7.7980789590883538e-03,
			-4.2123548102063557e-03,
			-1.2580685653923828e-02,
			-1.3896183105007932e-02,
			-4.6707793854684938e-03,
			-1.2139776287417038e-02,
			-2.1492365469531257e-02,
			-8.0968892823001046e-03,
			-8.2631555848332473e-03,
			-2.7966602054323594e-02,
			-1.6735759731169867e-02,
			-2.1834926757662077e-03,
			-2.9254096192636532e-02,
			-3.1499163705017090e-02,
			2.3107659525776346e-03,
			-2.0832464828927390e-02,
			-5.0853889965031082e-02,
			-1.1624388651572256e-03,
			1.8841462457617236e-03,
			-7.0730297852423088e-02,
			-2.3669862992490260e-02,
			4.9655253129437991e-02,
			-8.5754335252881606e-02,
			-1.1745446174509039e-01,
			2.7761355362248835e-01,
			5.7538029520670841e-01,
			2.7761355362248769e-01,
			-1.1745446174508975e-01,
			-8.5754335252880912e-02,
			4.9655253129437457e-02,
			-2.3669862992489934e-02,
			-7.0730297852421936e-02,
			1.8841462457616889e-03,
			-1.1624388651572048e-03,
			-5.0853889965029819e-02,
			-2.0832464828926815e-02,
			2.3107659525775617e-03,
			-3.1499163705016028e-02,
			-2.9254096192635470e-02,
			-2.1834926757661245e-03,
			-1.6735759731169159e-02,
			-2.7966602054322321e-02,
			-8.2631555848328413e-03,
			-8.0968892822996814e-03,
			-2.1492365469530057e-02,
			-1.2139776287416327e-02,
			-4.6707793854682024e-03,
			-1.3896183105007011e-02,
			-1.2580685653922945e-02,
			-4.2123548102060435e-03,
			-7.7980789590877501e-03,
			-1.0324010165846531e-02,
			-4.5086713435374846e-03,
			-4.0562398557877433e-03,
			-6.9685597648691568e-03,
			-4.2761095213552005e-03,
			-2.2358326021830158e-03,
			-3.9188767708756775e-03,
			-3.2987790655064630e-03,
			-1.4331943313839600e-03,
			-1.8457782153188935e-03,
			-2.0015152670248100e-03,
			-9.3968046651576485e-04,
			-7.2903341056474108e-04,
			-8.9057350076577387e-04,
			-4.7987787339812745e-04,
			};
		//if(dataNum<81)
		//	{
		//	return -1;
		//	}
		for(j=0;j<5;j++)
			{

			datamid=0.0;
			now_fir=i_fir_list;
			int i;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->data[j]*Fir[i];
				now_fir=now_fir->last;
				}

			i_fir_list->band_pass_data[j]=datamid;
			//printf("i_fir_list->fs=%d,j=%d,i_fir_list->band_pass_data[j]=%f\n",i_fir_list->sample_rata,j,i_fir_list->band_pass_data[j]);
			}
		return 1;
		}
	else if(i_fir_list->sample_rata==100)
		{
		//if(dataNum<191)
		//	{
		//	return -1;
		//	}
		firLength=191;
		double Fir[191]={-1.0096108503799409e-03,
			-1.3950482601184145e-03,
			-2.2527488512072823e-03,
			-2.9478325266950626e-03,
			-2.9241282941009309e-03,
			-2.1964877583498382e-03,
			-1.3932186866449717e-03,
			-1.2683702309322061e-03,
			-2.0587294816955936e-03,
			-3.2307108495224480e-03,
			-3.8728518839418980e-03,
			-3.4512139742405856e-03,
			-2.3045215990983815e-03,
			-1.4270997345429326e-03,
			-1.6661388536950924e-03,
			-2.9780040916341042e-03,
			-4.3915096269727697e-03,
			-4.7685469089617048e-03,
			-3.7708238360917514e-03,
			-2.2154696854772564e-03,
			-1.4639880273141859e-03,
			-2.2943598211664952e-03,
			-4.1868456476722750e-03,
			-5.6701595913976281e-03,
			-5.5118721440431517e-03,
			-3.7942060764075075e-03,
			-1.9423711063670419e-03,
			-1.6026343679009464e-03,
			-3.2475373165740244e-03,
			-5.6846723133800129e-03,
			-6.9564131921419870e-03,
			-5.9605784961465312e-03,
			-3.4555395583318526e-03,
			-1.5446848893690436e-03,
			-1.9729728155626920e-03,
			-4.6090756549750133e-03,
			-7.4249335517157806e-03,
			-8.0957173947760943e-03,
			-5.9658402480322953e-03,
			-2.7259882160986819e-03,
			-1.1326443571281007e-03,
			-2.7279163951726233e-03,
			-6.4379538633729206e-03,
			-9.3078652451388747e-03,
			-8.8937043531173623e-03,
			-5.3843686320969916e-03,
			-1.6236386602042371e-03,
			-8.6795329695463013e-04,
			-4.0358532878403434e-03,
			-8.7602540790057502e-03,
			-1.1177665546498936e-02,
			-9.1197841612625230e-03,
			-4.0841129832286773e-03,
			-2.1710181588843413e-04,
			-9.6506787169073674e-04,
			-6.0820299780298100e-03,
			-1.1571060989487639e-02,
			-1.2821283663388564e-02,
			-8.4992305065876590e-03,
			-1.9327687604891049e-03,
			1.3784923032710335e-03,
			-1.7050246429269466e-03,
			-9.0969663617697753e-03,
			-1.4856515017832844e-02,
			-1.3958829431456619e-02,
			-6.6666698386317613e-03,
			1.2562792472859616e-03,
			3.0131140370235859e-03,
			-3.4963797956000272e-03,
			-1.3462418900154581e-02,
			-1.8662168940531118e-02,
			-1.4193048970612182e-02,
			-2.9949266075571710e-03,
			5.9029683387124953e-03,
			4.5197236235567867e-03,
			-7.1079148261703534e-03,
			-2.0084767678293092e-02,
			-2.3311188040322776e-02,
			-1.2784038623879721e-02,
			4.0762178712041601e-03,
			1.3346915816899603e-02,
			5.7359043739684543e-03,
			-1.4720837908786619e-02,
			-3.2099574332974203e-02,
			-3.0404413640455791e-02,
			-7.3824560015768315e-03,
			2.0903522723558492e-02,
			3.0096061155356627e-02,
			6.5259347250955285e-03,
			-3.8462292200619481e-02,
			-7.0869487224785352e-02,
			-5.4107874682352952e-02,
			2.5259979404526650e-02,
			1.4370865641013861e-01,
			2.4982563870147181e-01,
			2.9230819959096299e-01,
			2.4982563870147181e-01,
			1.4370865641013864e-01,
			2.5259979404526654e-02,
			-5.4107874682352966e-02,
			-7.0869487224785366e-02,
			-3.8462292200619495e-02,
			6.5259347250955302e-03,
			3.0096061155356641e-02,
			2.0903522723558506e-02,
			-7.3824560015768349e-03,
			-3.0404413640455815e-02,
			-3.2099574332974223e-02,
			-1.4720837908786630e-02,
			5.7359043739684604e-03,
			1.3346915816899613e-02,
			4.0762178712041627e-03,
			-1.2784038623879739e-02,
			-2.3311188040322804e-02,
			-2.0084767678293116e-02,
			-7.1079148261703612e-03,
			4.5197236235567911e-03,
			5.9029683387125048e-03,
			-2.9949266075571736e-03,
			-1.4193048970612207e-02,
			-1.8662168940531153e-02,
			-1.3462418900154604e-02,
			-3.4963797956000320e-03,
			3.0131140370235911e-03,
			1.2562792472859642e-03,
			-6.6666698386317743e-03,
			-1.3958829431456649e-02,
			-1.4856515017832875e-02,
			-9.0969663617697927e-03,
			-1.7050246429269492e-03,
			1.3784923032710370e-03,
			-1.9327687604891093e-03,
			-8.4992305065876780e-03,
			-1.2821283663388595e-02,
			-1.1571060989487670e-02,
			-6.0820299780298256e-03,
			-9.6506787169073935e-04,
			-2.1710181588843587e-04,
			-4.0841129832286877e-03,
			-9.1197841612625508e-03,
			-1.1177665546498967e-02,
			-8.7602540790057779e-03,
			-4.0358532878403556e-03,
			-8.6795329695463187e-04,
			-1.6236386602042424e-03,
			-5.3843686320970089e-03,
			-8.8937043531173883e-03,
			-9.3078652451389042e-03,
			-6.4379538633729406e-03,
			-2.7279163951726333e-03,
			-1.1326443571281050e-03,
			-2.7259882160986914e-03,
			-5.9658402480323187e-03,
			-8.0957173947761238e-03,
			-7.4249335517158083e-03,
			-4.6090756549750297e-03,
			-1.9729728155626998e-03,
			-1.5446848893690497e-03,
			-3.4555395583318661e-03,
			-5.9605784961465555e-03,
			-6.9564131921420139e-03,
			-5.6846723133800337e-03,
			-3.2475373165740378e-03,
			-1.6026343679009538e-03,
			-1.9423711063670500e-03,
			-3.7942060764075232e-03,
			-5.5118721440431751e-03,
			-5.6701595913976532e-03,
			-4.1868456476722923e-03,
			-2.2943598211665065e-03,
			-1.4639880273141920e-03,
			-2.2154696854772668e-03,
			-3.7708238360917696e-03,
			-4.7685469089617273e-03,
			-4.3915096269727888e-03,
			-2.9780040916341185e-03,
			-1.6661388536951005e-03,
			-1.4270997345429397e-03,
			-2.3045215990983915e-03,
			-3.4512139742406017e-03,
			-3.8728518839419141e-03,
			-3.2307108495224631e-03,
			-2.0587294816956044e-03,
			-1.2683702309322122e-03,
			-1.3932186866449782e-03,
			-2.1964877583498486e-03,
			-2.9241282941009409e-03,
			-2.9478325266950032e-03,
			-2.2527488512072988e-03,
			-1.3950482601184288e-03,
			-1.0096108503799466e-03,



			};
        for(j=0;j<5;j++)
			{

			datamid=0.0;
			now_fir=i_fir_list;
			int i;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->data[j]*Fir[i];
				now_fir=now_fir->last;
				}

			i_fir_list->band_pass_data[j]=datamid;
			//printf("i_fir_list->fs=%d,j=%d,i_fir_list->band_pass_data[j]=%f\n",i_fir_list->sample_rata,j,i_fir_list->band_pass_data[j]);
			}
		return 1;
		}
	else if(i_fir_list->sample_rata==200)
		{
		firLength=301;
		//if(dataNum<301)
		//	{
		//	return -1;
		//	}
		double Fir[301]={-1.5738968347689628e-04,
			-1.7735491639294824e-04,
			-2.1736124094126334e-04,
			-2.7483905489700012e-04,
			-3.4266813193163193e-04,
			-4.1030106015100642e-04,
			-4.6590026089908369e-04,
			-4.9908565647348161e-04,
			-5.0368485858866155e-04,
			-4.7980096272096865e-04,
			-4.3459912811287315e-04,
			-3.8145932023061683e-04,
			-3.3750551620498548e-04,
			-3.1992389949451273e-04,
			-3.4182841427864982e-04,
			-4.0862956128619334e-04,
			-5.1584657092479044e-04,
			-6.4905509995696496e-04,
			-7.8621869932361810e-04,
			-9.0210075583715586e-04,
			-9.7391805542624665e-04,
			-9.8700968544837217e-04,
			-9.3916478239759282e-04,
			-8.4243680789333406e-04,
			-7.2175694572392348e-04,
			-6.1035700575723644e-04,
			-5.4277523357811595e-04,
			-5.4686940852928067e-04,
			-6.3663386121590247e-04,
			-8.0759555645765300e-04,
			-1.0361182005924534e-03,
			-1.2831404037890676e-03,
			-1.5018735401092786e-03,
			-1.6480075080620943e-03,
			-1.6902522160705587e-03,
			-1.6187724217614032e-03,
			-1.4493561975616916e-03,
			-1.2219729859712122e-03,
			-9.9357826868147307e-04,
			-8.2635727901226479e-04,
			-7.7376662014393995e-04,
			-8.6744203333462462e-04,
			-1.1080893063261379e-03,
			-1.4627990304460733e-03,
			-1.8699254737555102e-03,
			-2.2510004567963386e-03,
			-2.5274762640143944e-03,
			-2.6387982693635644e-03,
			-2.5577291433000224e-03,
			-2.2991713422791313e-03,
			-1.9199554375127431e-03,
			-1.5089616520395268e-03,
			-1.1691295962667500e-03,
			-9.9489997697284663e-04,
			-1.0499463509793807e-03,
			-1.3503416137936456e-03,
			-1.8574229089935940e-03,
			-2.4826907958067261e-03,
			-3.1044754803961948e-03,
			-3.5933784465069858e-03,
			-3.8412720032523487e-03,
			-3.7874595744862814e-03,
			-3.4358093523187173e-03,
			-2.8583194491591827e-03,
			-2.1833724736893233e-03,
			-1.5703255973366405e-03,
			-1.1753198885291142e-03,
			-1.1155270970319925e-03,
			-1.4398884580665875e-03,
			-2.1134488140001156e-03,
			-3.0197519628140561e-03,
			-3.9819340454248483e-03,
			-4.7989298359828224e-03,
			-5.2895315090100694e-03,
			-5.3347847421739408e-03,
			-4.9089772067057768e-03,
			-4.0914494807903403e-03,
			-3.0553263232042977e-03,
			-2.0342643861179957e-03,
			-1.2733736807093051e-03,
			-9.7444743993873348e-04,
			-1.2475579059199422e-03,
			-2.0803813561700931e-03,
			-3.3333020239832397e-03,
			-4.7630034661209093e-03,
			-6.0709747972200970e-03,
			-6.9675036714509026e-03,
			-7.2376487999995407e-03,
			-6.7944115044867989e-03,
			-5.7063144258142880e-03,
			-4.1915922126739454e-03,
			-2.5782559165073099e-03,
			-1.2369414329412996e-03,
			-5.0000439657026010e-04,
			-5.8423897384719532e-04,
			-1.5348385257546453e-03,
			-3.2045099423030948e-03,
			-5.2745989273480509e-03,
			-7.3160653117819293e-03,
			-8.8790713655859960e-03,
			-9.5928420397288355e-03,
			-9.2540312860429144e-03,
			-7.8830675166212654e-03,
			-5.7338544840285889e-03,
			-3.2517317719462481e-03,
			-9.8584385474959567e-04,
			5.2737308823975636e-04,
			8.8539160937573045e-04,
			-8.1278022656460546e-05,
			-2.2555652814956074e-03,
			-5.2408116952406677e-03,
			-8.4306412604161132e-03,
			-1.1130333116173553e-02,
			-1.2706151017152620e-02,
			-1.2731360484584070e-02,
			-1.1096337143008480e-02,
			-8.0559256539294525e-03,
			-4.1992280006084327e-03,
			-3.4304817834827792e-04,
			2.6329471431176831e-03,
			3.9772854451277720e-03,
			3.2439302636812226e-03,
			4.1585700052789186e-04,
			-4.0560792879092526e-03,
			-9.3139281317865166e-03,
			-1.4247613714347402e-02,
			-1.7717974336771903e-02,
			-1.8805230945223246e-02,
			-1.7031601742540699e-02,
			-1.2508339273051561e-02,
			-5.9695509104043653e-03,
			1.3240748146035209e-03,
			7.8028250387371500e-03,
			1.1892350786033203e-02,
			1.2350080720461974e-02,
			8.5682310423650879e-03,
			7.7979549076405419e-04,
			-9.8815104670206631e-03,
			-2.1491211233783846e-02,
			-3.1606466363625955e-02,
			-3.7661758554831441e-02,
			-3.7422874756706775e-02,
			-2.9419394015175061e-02,
			-1.3275490993334308e-02,
			1.0126511572124210e-02,
			3.8687978116648487e-02,
			6.9343825778920370e-02,
			9.8485912360757433e-02,
			1.2249350941875659e-01,
			1.3828375204993210e-01,
			1.4378957268385817e-01,
			1.3828375204993198e-01,
			1.2249350941875640e-01,
			9.8485912360757155e-02,
			6.9343825778920107e-02,
			3.8687978116648321e-02,
			1.0126511572124158e-02,
			-1.3275490993334225e-02,
			-2.9419394015174839e-02,
			-3.7422874756706463e-02,
			-3.7661758554831101e-02,
			-3.1606466363625629e-02,
			-2.1491211233783607e-02,
			-9.8815104670205468e-03,
			7.7979549076404465e-04,
			8.5682310423649734e-03,
			1.2350080720461792e-02,
			1.1892350786033016e-02,
			7.8028250387370190e-03,
			1.3240748146034983e-03,
			-5.9695509104042534e-03,
			-1.2508339273051316e-02,
			-1.7031601742540346e-02,
			-1.8805230945222844e-02,
			-1.7717974336771518e-02,
			-1.4247613714347076e-02,
			-9.3139281317862910e-03,
			-4.0560792879091503e-03,
			4.1585700052788145e-04,
			3.2439302636811385e-03,
			3.9772854451276627e-03,
			2.6329471431176059e-03,
			-3.4304817834826751e-04,
			-4.1992280006083061e-03,
			-8.0559256539291975e-03,
			-1.1096337143008119e-02,
			-1.2731360484583639e-02,
			-1.2706151017152188e-02,
			-1.1130333116173159e-02,
			-8.4306412604158061e-03,
			-5.2408116952404717e-03,
			-2.2555652814955185e-03,
			-8.1278022656457077e-05,
			8.8539160937569489e-04,
			5.2737308823973467e-04,
			-9.8584385474955491e-04,
			-3.2517317719461085e-03,
			-5.7338544840283339e-03,
			-7.8830675166209115e-03,
			-9.2540312860424894e-03,
			-9.5928420397283845e-03,
			-8.8790713655855676e-03,
			-7.3160653117815720e-03,
			-5.2745989273477829e-03,
			-3.2045099423029331e-03,
			-1.5348385257545655e-03,
			-5.8423897384716496e-04,
			-5.0000439657023278e-04,
			-1.2369414329412311e-03,
			-2.5782559165071638e-03,
			-4.1915922126737068e-03,
			-5.7063144258139575e-03,
			-6.7944115044863947e-03,
			-7.2376487999991001e-03,
			-6.9675036714504724e-03,
			-6.0709747972197223e-03,
			-4.7630034661206057e-03,
			-3.3333020239830237e-03,
			-2.0803813561699586e-03,
			-1.2475579059198585e-03,
			-9.7444743993866712e-04,
			-1.2733736807092175e-03,
			-2.0342643861178543e-03,
			-3.0553263232040791e-03,
			-4.0914494807900480e-03,
			-4.9089772067054177e-03,
			-5.3347847421735478e-03,
			-5.2895315090096687e-03,
			-4.7989298359824538e-03,
			-3.9819340454245395e-03,
			-3.0197519628138176e-03,
			-2.1134488139999473e-03,
			-1.4398884580664711e-03,
			-1.1155270970319006e-03,
			-1.1753198885290160e-03,
			-1.5703255973365086e-03,
			-2.1833724736891359e-03,
			-2.8583194491589325e-03,
			-3.4358093523184151e-03,
			-3.7874595744859440e-03,
			-3.8412720032520008e-03,
			-3.5933784465066554e-03,
			-3.1044754803959073e-03,
			-2.4826907958064920e-03,
			-1.8574229089934173e-03,
			-1.3503416137935148e-03,
			-1.0499463509792775e-03,
			-9.9489997697274797e-04,
			-1.1691295962666325e-03,
			-1.5089616520393724e-03,
			-1.9199554375125441e-03,
			-2.2991713422788910e-03,
			-2.5577291432997522e-03,
			-2.6387982693632807e-03,
			-2.5274762640141194e-03,
			-2.2510004567960896e-03,
			-1.8699254737553005e-03,
			-1.4627990304459074e-03,
			-1.1080893063260097e-03,
			-8.6744203333452400e-04,
			-7.7376662014384866e-04,
			-8.2635727901216656e-04,
			-9.9357826868135316e-04,
			-1.2219729859710637e-03,
			-1.4493561975615118e-03,
			-1.6187724217612007e-03,
			-1.6902522160703449e-03,
			-1.6480075080618820e-03,
			-1.5018735401090826e-03,
			-1.2831404037888989e-03,
			-1.0361182005923146e-03,
			-8.0759555645754327e-04,
			-6.3663386121581508e-04,
			-5.4686940852920413e-04,
			-5.4277523357803897e-04,
			-6.1035700575714949e-04,
			-7.2175694572381886e-04,
			-8.4243680789320959e-04,
			-9.3916478239745296e-04,
			-9.8700968544822277e-04,
			-9.7391805542609714e-04,
			-9.0210075583701556e-04,
			-7.8621869932349417e-04,
			-6.4905509995686088e-04,
			-5.1584657092470653e-04,
			-4.0862956128612563e-04,
			-3.4182841427859273e-04,
			-3.1992389949445831e-04,
			-3.3750551620492721e-04,
			-3.8145932023054988e-04,
			-4.3459912811279558e-04,
			-4.7980096272088148e-04,
			-5.0368485858856907e-04,
			-4.9908565647338837e-04,
			-4.6590026089899489e-04,
			-4.1030106015092717e-04,
			-3.4266813193156422e-04,
			-2.7483905489694477e-04,
			-2.1736124094121881e-04,
			-1.7735491639291114e-04,
			-1.5738968347686275e-04,


			};
		for(j=0;j<5;j++)
			{

			datamid=0.0;
			now_fir=i_fir_list;
			int i;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->data[j]*Fir[i];
				now_fir=now_fir->last;
				}

			i_fir_list->band_pass_data[j]=datamid;
			//printf("i_fir_list->fs=%d,j=%d,i_fir_list->band_pass_data[j]=%f\n",i_fir_list->sample_rata,j,i_fir_list->band_pass_data[j]);
			}
		return 1;
		}

	//double *Fir=new double[firLength];

	return 0;

	};

int psa(float *data,float * result,int num,float period ,int sample_rata)
	{
	int i,j;
	float zuni=0.05;
	double pi=3.14159265358979;
	float delt=1.0/sample_rata;
	float w=2*pi/period;
	*result=0;
	double middata=0;
	double mid;
	double maxxx=0;
	for(i=1;i<num;i++)
		{
		middata=0;
		for(j=1;j<=i;j++) 
			{
		    middata+=(data[j]*exp(-1.0*zuni*w*(i-j)*delt)*sin(w*(i-j)*delt)+data[j-1]*exp(-1.0*zuni*w*(i-j+1)*delt)*sin(w*(i-j+1)*delt))*delt/2;
			}
		mid=w*abs(middata);
		if(mid>maxxx)
			maxxx=mid;
		}
	*result=maxxx;

	return 1;
	}

 int psa_2(float *data,int data_num,float sample_rata,float zuni,float *period,int period_num,float *result)
	//A data           N data_num            DT  1/sample_data    D zuni     T  period     M  period_num   SA   result
	{
	int j,i,k,l;
	double dp,dlt,z,w,xt,c1,c2,c3,x2,y0,y1,dx0,sa2,y2,dx;
	double dt=1.0/sample_rata;
	for(j=0;j<period_num;j++)
		{
		result[j]=0.0;
		dp=period[j]/10.0;
		l=1;
		if(dp<dt)
			l=(int)(dt/dp+1.0-0.00001);
		dlt=dt/l;
		w=3.1415926535897932384*2/period[j];
		z=exp(-1*zuni*w*dlt);

		xt=w*pow(1.0-zuni*zuni,0.5)*dlt;
		c1=2.0*z*cos(xt);
		c2=-1*z*z;
		c3=-1*z*sin(xt)/xt;
		dx=data[0]/l;
		x2=data[0];
		y0=0.0;
		y1=c3*data[0];

		for (i=0;i<data_num-1;i++)
		    {
		
			dx0=dx;
			dx=(data[i+1]-data[i])/l;
			for(k=0;k<l;k++)
				{
				x2=x2+dx;
				y2=c1*y1+c2*y0;
				if(k==0)
					y2+=c3*(dx-dx0);
				sa2=abs(x2+y2);

				if(sa2>result[j])
					result[j]=sa2;
				y0=y1;
				y1=y2;


				}


			}
		}



	return 1;

}


int resample2(FIR_LIST1 *i_fir_list,int* location,FIR_LIST *i_result_list,int *first_time,int vector_type)
	{
	int firLength,j;
	int naomiao=1000000000;
	double datamid;
	FIR_LIST1 *now_fir;
	if (i_fir_list->sample_rata==50)
		{
		firLength=165;
		double Fir[165]={4.9641455551500924e-04 ,
			2.0861378186126486e-03 ,
			5.9371867707562944e-03 ,
			1.3518407568000015e-02 ,
			2.6341291481791776e-02 ,
			4.5433407622373294e-02 ,
			7.0694789139687478e-02 ,
			1.0032599556820671e-01 ,
			1.3057809289278391e-01 ,
			1.5604920102387312e-01 ,
			1.7062620696768016e-01 ,
			1.6896304436890949e-01 ,
			1.4815777196678998e-01 ,
			1.0912468872363833e-01 ,
			5.7136290507488259e-02 ,
			1.1765053278084471e-03 ,
			-4.7920119380674246e-02 ,
			-8.0159669026659580e-02 ,
			-8.9180647540351571e-02 ,
			-7.4271692869622138e-02 ,
			-4.0882959531061157e-02 ,
			6.8228177420737808e-04 ,
			3.8130031772198307e-02 ,
			6.0778152613811566e-02 ,
			6.2770953134357349e-02 ,
			4.4833613072213487e-02 ,
			1.3932419151181995e-02 ,
			-1.9102954449573384e-02 ,
			-4.3231019385772076e-02 ,
			-5.0891959762388125e-02 ,
			-4.0467483860047435e-02 ,
			-1.6646934188868603e-02 ,
			1.1421857776306230e-02 ,
			3.3520885458170509e-02 ,
			4.2052471614766961e-02 ,
			3.4686478875163976e-02 ,
			1.5010718732802113e-02 ,
			-9.0184186909654449e-03 ,
			-2.8202041261691381e-02 ,
			-3.5592116981032720e-02 ,
			-2.9022278850113357e-02 ,
			-1.1737280586981898e-02 ,
			9.0687831748027681e-03 ,
			2.5183300867102770e-02 ,
			3.0596161151405579e-02 ,
			2.3747045860466644e-02 ,
			7.9491966081399641e-03 ,
			-1.0118766864188540e-02 ,
			-2.3193387280601028e-02 ,
			-2.6332570666082029e-02 ,
			-1.8784540879037852e-02 ,
			-4.1077507236406095e-03 ,
			1.1444165095785774e-02 ,
			2.1558537605452899e-02 ,
			2.2417130381194396e-02 ,
			1.4133943714712835e-02 ,
			5.3451923686850724e-04 ,
			-1.2569329543819424e-02 ,
			-1.9844601735316731e-02 ,
			-1.8601266430032466e-02 ,
			-9.7773704037175096e-03 ,
			2.6131953072813414e-03 ,
			1.3278887077236207e-02 ,
			1.7898119909027670e-02 ,
			1.4864737610862301e-02 ,
			5.8270635558930455e-03 ,
			-5.1519181537227491e-03 ,
			-1.3402596621367304e-02 ,
			-1.5626465614023366e-02 ,
			-1.1208101352319783e-02 ,
			-2.3414092152496471e-03 ,
			7.0285444763493674e-03 ,
			1.2948329498229844e-02 ,
			1.3117763840411755e-02 ,
			7.7738022646380248e-03 ,
			-5.3902498426174137e-04 ,
			-8.1605460504767819e-03 ,
			-1.1917827562232376e-02 ,
			-1.0439942484953170e-02 ,
			-4.6419071140587440e-03 ,
			2.7851977222961761e-03 ,
			8.6102577645724345e-03 ,
			1.0461231321983511e-02 ,
			7.7837791788257886e-03 ,
			1.9749625036189324e-03 ,
			-4.3203501210721338e-03 ,
			-8.4047263965501690e-03 ,
			-8.6782014798381935e-03 ,
			-5.2549395514285063e-03 ,
			1.8646412280456107e-04 ,
			5.2110987409515743e-03 ,
			7.7106544334032724e-03 ,
			6.7820157458664413e-03 ,
			3.0379288862060821e-03 ,
			-1.7489311403861120e-03 ,
			-5.4753949627258797e-03 ,
			-6.6263311708058981e-03 ,
			-4.8832904244723091e-03 ,
			-1.1821673665924283e-03 ,
			2.7694433605619231e-03 ,
			5.2731165254131726e-03 ,
			5.3643358691174078e-03 ,
			3.1740611902241972e-03 ,
			-2.0336140420331846e-04 ,
			-3.2454664403018768e-03 ,
			-4.6825224974431584e-03 ,
			-4.0216886909035807e-03 ,
			-1.7007493067159065e-03 ,
			1.1677646005837593e-03 ,
			3.3223266015993025e-03 ,
			3.9024742248125765e-03 ,
			2.7853577250094648e-03 ,
			5.8068877506803373e-04 ,
			-1.6874003239461088e-03 ,
			-3.0506146168672896e-03 ,
			-3.0051155179690778e-03 ,
			-1.6882524498498489e-03 ,
			2.3345697643360156e-04 ,
			1.8932191551250081e-03 ,
			2.6105522313560601e-03 ,
			2.1650290090240278e-03 ,
			8.4961889270458214e-04 ,
			-6.9991983976259021e-04 ,
			-1.8066605034299885e-03 ,
			-2.0442478039422183e-03 ,
			-1.3947895802411611e-03 ,
			-2.1778805894814116e-04 ,
			9.3880999124384479e-04 ,
			1.5896069495257657e-03 ,
			1.5114885297533255e-03 ,
			8.1186820415698059e-04 ,
			-1.5058229368607759e-04 ,
			-9.4384608750351900e-04 ,
			-1.2530996766558678e-03 ,
			-1.0012813253543512e-03 ,
			-3.5580323523576812e-04 ,
			3.6915829402987393e-04 ,
			8.6166517210201825e-04 ,
			9.4321915671371191e-04 ,
			6.2839852380132605e-04 ,
			9.5907205753932231e-05 ,
			-4.0626184847617191e-04 ,
			-6.7339954953361109e-04 ,
			-6.2450419057352626e-04 ,
			-3.2049055349451757e-04 ,
			7.9630912629678407e-05 ,
			3.9808566929092065e-04 ,
			5.1498901799025597e-04 ,
			4.1035124916093260e-04 ,
			1.5844912981049161e-04 ,
			-1.1639279192463697e-04 ,
			-2.9853442979296894e-04 ,
			-3.2749921041051673e-04 ,
			-2.1457932271049809e-04 ,
			-2.7179669080954586e-05 ,
			1.4748545183980273e-04 ,
			2.4091962748403346e-04 ,
			2.2772734522904744e-04 ,
			1.2822291339905899e-04 ,
			-7.9288020909925007e-06 ,
			-1.2676835065509535e-04 ,
			-1.9181698110169713e-04 ,
			-1.9427077204277652e-04 ,
			-1.4987365019528419e-04 ,
			-1.0932778659256012e-04 ,
			};

		if(*location!=1)
			{
			if(*location==4)
				*location=1;
			else
				*location=*location+1;

			return 1;
			}
		else if((*location==1))
			{
			for(j=0;j<3;j++)
				{

				datamid=0.0;
				now_fir=i_fir_list;
				int i;
				for(i=0;i<firLength;i++)
					{

					datamid=datamid+now_fir->data[j]*Fir[i];
						
					now_fir=now_fir->last;
					}

				i_result_list->data[j]=datamid;

				}

			i_result_list->utc_nanosecond=i_fir_list->utc_nanosecond-8*(long)((double)1.0/200*naomiao);
			if(i_result_list->utc_nanosecond<0)
				{
				i_result_list->utc_nanosecond=i_result_list->utc_nanosecond+naomiao;
				i_result_list->utc_second=i_fir_list->utc_second-1;
				}
			else
				{
				i_result_list->utc_nanosecond=i_result_list->utc_nanosecond;
				i_result_list->utc_second=i_fir_list->utc_second;
				}



			i_result_list->sample_rata=i_fir_list->sample_rata;

			if(*first_time==1)
				{
				int i;
				for(i=0;i<3;i++)
					{

					
				i_result_list->dataV[i]=i_result_list->data[i]/i_result_list->sample_rata/2;
					}
				
				}
			else
				{
				int i;
				for(i=0;i<3;i++)
					{


					i_result_list->dataV[i]=i_result_list->last->dataV[i]+(i_result_list->data[i]+i_result_list->last->data[i])/i_result_list->sample_rata/2;
					}
				}

			if(*first_time==1)
				{
				int i;
				for(i=0;i<3;i++)
					{


					i_result_list->dataD[i]=i_result_list->dataV[i]/i_result_list->sample_rata/2;
					}
				*first_time=2;
				}
			else
				{
				int i;
				for(i=0;i<3;i++)
					{


					i_result_list->dataD[i]=i_result_list->last->dataD[i]+(i_result_list->dataV[i]+i_result_list->last->dataV[i])/i_result_list->sample_rata/2;
					}
				}


			if(vector_type==3)
				{

				i_result_list->data[4]=pow((double)(i_result_list->data[0]*i_result_list->data[0]+i_result_list->data[1]*i_result_list->data[1]+i_result_list->data[2]*i_result_list->data[2]),0.5);
				i_result_list->dataV[4]=pow((double)(i_result_list->dataV[0]*i_result_list->dataV[0]+i_result_list->dataV[1]*i_result_list->dataV[1]+i_result_list->dataV[2]*i_result_list->dataV[2]),0.5);
				i_result_list->dataD[4]=pow((double)(i_result_list->dataD[0]*i_result_list->dataD[0]+i_result_list->dataD[1]*i_result_list->dataD[1]+i_result_list->dataD[2]*i_result_list->dataD[2]),0.5);
				}
			if(vector_type==2)
				{
				i_result_list->data[4]=pow((double)(i_result_list->data[0]*i_result_list->data[0]+i_result_list->data[1]*i_result_list->data[1]),0.5);
				i_result_list->dataV[4]=pow((double)(i_result_list->dataV[0]*i_result_list->dataV[0]+i_result_list->dataV[1]*i_result_list->dataV[1]),0.5);
				i_result_list->dataD[4]=pow((double)(i_result_list->dataD[0]*i_result_list->dataD[0]+i_result_list->dataD[1]*i_result_list->dataD[1]),0.5);
				}




				//i_result_list->utc_nanosecond=i_fir_list->utc_nanosecond;
				//i_result_list->utc_second=i_fir_list->utc_second;
				*location=*location+1;



			return 2;
			}

		}
	else if(i_fir_list->sample_rata==100)
		{

		firLength=83;
		double Fir[83]={4.9565345342527083e-03 ,
			3.1012441821297185e-02 ,
			1.0048883061092734e-01 ,
			2.1432464632013803e-01 ,
			3.2147309841312671e-01 ,
			3.3257689284339487e-01 ,
			1.9671911052858826e-01 ,
			-2.1847188192472854e-02 ,
			-1.6830668715581221e-01 ,
			-1.3502859947402918e-01 ,
			2.0698376590843448e-02 ,
			1.2584673845204788e-01 ,
			7.5979361963327677e-02 ,
			-5.2065125506812915e-02 ,
			-9.9340495169607398e-02 ,
			-1.9375994274479631e-02 ,
			7.3734074958272375e-02 ,
			6.1050418002940150e-02 ,
			-2.8979006327531337e-02 ,
			-7.0035690205542567e-02 ,
			-1.3014245086577609e-02 ,
			5.5030976942061723e-02 ,
			4.0545902573336907e-02 ,
			-2.8082696658478529e-02 ,
			-5.0421390881957857e-02 ,
			-1.7834656757996754e-05 ,
			4.5125492822974823e-02 ,
			2.1825934854468827e-02 ,
			-3.0053224212681997e-02 ,
			-3.3722901951940665e-02 ,
			1.1271393644200866e-02 ,
			3.5431365435583353e-02 ,
			6.0254388777077712e-03 ,
			-2.9032820369749107e-02 ,
			-1.8365835664428589e-02 ,
			1.7836086199393315e-02 ,
			2.4247351654105947e-02 ,
			-5.3436698372127103e-03 ,
			-2.3919138424269258e-02 ,
			-5.5308831743347978e-03 ,
			1.8877344682117301e-02 ,
			1.2918176207598490e-02 ,
			-1.1241945793509300e-02 ,
			-1.6120030679164930e-02 ,
			3.1634775158068049e-03 ,
			1.5470185531616517e-02 ,
			3.6297028820528616e-03 ,
			-1.2015319995270593e-02 ,
			-8.0877471038021970e-03 ,
			7.1258049532141269e-03 ,
			9.8962295266822528e-03 ,
			-2.1322356093256500e-03 ,
			-9.3627724581123416e-03 ,
			-1.9441131165764229e-03 ,
			7.2009863690685938e-03 ,
			4.5314263521835270e-03 ,
			-4.2793203209142480e-03 ,
			-5.5154834009744748e-03 ,
			1.3955917406249388e-03 ,
			5.1484665442471916e-03 ,
			8.7622621642518812e-04 ,
			-3.8995330161913045e-03 ,
			-2.2518533600445283e-03 ,
			2.2932017382367091e-03 ,
			2.7219589883875212e-03 ,
			-7.7854861536424036e-04 ,
			-2.4778211240336200e-03 ,
			-3.5098761756623446e-04 ,
			1.8109138109091163e-03 ,
			9.8024453827756652e-04 ,
			-1.0162695697266276e-03 ,
			-1.1460775274288132e-03 ,
			3.2131491296885509e-04 ,
			9.8339892301504191e-04 ,
			1.4727257793976242e-04 ,
			-6.6105780015931408e-04 ,
			-3.6483672132473876e-04 ,
			3.3149350245799088e-04 ,
			3.8949042799572256e-04 ,
			-1.0531691484516781e-04 ,
			-4.1081214634534669e-04 ,
			-2.9400456671669945e-04 ,
			-3.0054312030186778e-05 ,



			};
			if(*location==2)
				{
				*location=1;
				return 1;
				}
			else if(*location==1)
				{
				for(j=0;j<3;j++)
					{

					datamid=0.0;
					now_fir=i_fir_list;
					int i;
					for(i=0;i<firLength;i++)
						{
		
							
							datamid=datamid+now_fir->data[j]*Fir[i];
							
						now_fir=now_fir->last;
						}

					i_result_list->data[j]=datamid;

					}


				i_result_list->utc_nanosecond=i_fir_list->utc_nanosecond-3*(long)((double)1.0/200*naomiao);
				if(i_result_list->utc_nanosecond<0)
					{
					i_result_list->utc_nanosecond=i_result_list->utc_nanosecond+naomiao;
					i_result_list->utc_second=i_fir_list->utc_second-1;
					}
				else
					{
					i_result_list->utc_nanosecond=i_result_list->utc_nanosecond;
					i_result_list->utc_second=i_fir_list->utc_second;
					}




				i_result_list->sample_rata=i_fir_list->sample_rata;


				if(*first_time==1)
					{
					int i;
					for(i=0;i<3;i++)
						{


						i_result_list->dataV[i]=i_result_list->data[i]/i_result_list->sample_rata/2;
						}

					}
				else
					{
					int i;
					for(i=0;i<3;i++)
						{


						i_result_list->dataV[i]=i_result_list->last->dataV[i]+(i_result_list->data[i]+i_result_list->last->data[i])/i_result_list->sample_rata/2;
						}
					}

				if(*first_time==1)
					{
					int i;
					for(i=0;i<3;i++)
						{


						i_result_list->dataD[i]=i_result_list->dataV[i]/i_result_list->sample_rata/2;
						}
					*first_time=2;
					}
				else
					{
					int i;
					for(i=0;i<3;i++)
						{


						i_result_list->dataD[i]=i_result_list->last->dataD[i]+(i_result_list->dataV[i]+i_result_list->last->dataV[i])/i_result_list->sample_rata/2;
						}
					}

				if(vector_type==3)
					{

					i_result_list->data[4]=pow((double)(i_result_list->data[0]*i_result_list->data[0]+i_result_list->data[1]*i_result_list->data[1]+i_result_list->data[2]*i_result_list->data[2]),0.5);
					i_result_list->dataV[4]=pow((double)(i_result_list->dataV[0]*i_result_list->dataV[0]+i_result_list->dataV[1]*i_result_list->dataV[1]+i_result_list->dataV[2]*i_result_list->dataV[2]),0.5);
					i_result_list->dataD[4]=pow((double)(i_result_list->dataD[0]*i_result_list->dataD[0]+i_result_list->dataD[1]*i_result_list->dataD[1]+i_result_list->dataD[2]*i_result_list->dataD[2]),0.5);
					}
				if(vector_type==2)
					{


					i_result_list->data[4]=pow((double)(i_result_list->data[0]*i_result_list->data[0]+i_result_list->data[1]*i_result_list->data[1]),0.5);
					i_result_list->dataV[4]=pow((double)(i_result_list->dataV[0]*i_result_list->dataV[0]+i_result_list->dataV[1]*i_result_list->dataV[1]),0.5);
					i_result_list->dataD[4]=pow((double)(i_result_list->dataD[0]*i_result_list->dataD[0]+i_result_list->dataD[1]*i_result_list->dataD[1]),0.5);
					}



					//i_result_list->utc_nanosecond=i_result_list->utc_nanosecond;
					//i_result_list->utc_second=i_fir_list->utc_second;
	

					*location=2;

				return 2;
				}

		}
	
else if(i_fir_list->sample_rata==200)
	{

	firLength=67;
	double Fir[67]={1.4886232014446173e-02 ,
		9.1851349273268643e-02 ,
		2.6047741969153282e-01 ,
		4.1903807260132420e-01 ,
		3.6142776267982529e-01 ,
		5.3635129896806445e-02 ,
		-2.0642516820711648e-01 ,
		-1.3417437356981871e-01 ,
		1.0678925914463959e-01 ,
		1.3110904610289847e-01 ,
		-5.9839012834774406e-02 ,
		-1.1374072012772786e-01 ,
		3.9705674742332303e-02 ,
		9.6384227761483060e-02 ,
		-3.2458406593244046e-02 ,
		-8.1183199160868247e-02 ,
		3.1267951742535639e-02 ,
		6.7762677235589527e-02 ,
		-3.2650438666025502e-02 ,
		-5.5485761153308936e-02 ,
		3.4701623144736723e-02 ,
		4.3944728267247365e-02 ,
		-3.6323992075672058e-02 ,
		-3.3010592036806431e-02 ,
		3.6892278052976839e-02 ,
		2.2772355918283766e-02 ,
		-3.6105057284237935e-02 ,
		-1.3452071360375245e-02 ,
		3.3910011588727418e-02 ,
		5.3209414252957284e-03 ,
		-3.0451952421755281e-02 ,
		1.3738116713718546e-03 ,
		2.6022578843828491e-02 ,
		-6.4650955089932127e-03 ,
		-2.1005679046997568e-02 ,
		9.9007348380335033e-03 ,
		1.5819267723627881e-02 ,
		-1.1755090294112168e-02 ,
		-1.0859903710326909e-02 ,
		1.2219248710943006e-02 ,
		6.4563901039831444e-03 ,
		-1.1573208899084366e-02 ,
		-2.8378165457558905e-03 ,
		1.0146498063921651e-02 ,
		1.1824061445429080e-04 ,
		-8.2770293030431132e-03 ,
		1.6979174992666972e-03 ,
		6.2692515917090498e-03 ,
		-2.7016870210823411e-03 ,
		-4.3705580419491942e-03 ,
		3.0429124477103853e-03 ,
		2.7432617781152596e-03 ,
		-2.9141905023914016e-03 ,
		-1.4853585269858490e-03 ,
		2.4863028610634390e-03 ,
		5.9137377630140626e-04 ,
		-1.9525848762372313e-03 ,
		-6.7926205118237323e-05 ,
		1.3731131779887811e-03 ,
		-2.4591351689411063e-04 ,
		-9.5537729526887379e-04 ,
		2.4994144850725840e-04 ,
		4.7279117272521756e-04 ,
		-4.0482925924241020e-04 ,
		-4.6027107085052277e-04 ,
		1.1300349010339446e-04 ,
		2.1569728584449864e-04 ,




		};
	//if(*location==2)
	//	{
	//	*location=1;
	//	return 1;
	//	}
	//else if(*location==1)
	//	{
		for(j=0;j<3;j++)
			{

			datamid=0.0;
			now_fir=i_fir_list;
			int i;
			for(i=0;i<firLength;i++)
				{


				datamid=datamid+now_fir->data[j]*Fir[i];

				now_fir=now_fir->last;
				}

			i_result_list->data[j]=datamid;

			}


		i_result_list->utc_nanosecond=i_fir_list->utc_nanosecond-2*(long)((double)1.0/200*naomiao);
		if(i_result_list->utc_nanosecond<0)
			{
			i_result_list->utc_nanosecond=i_result_list->utc_nanosecond+naomiao;
			i_result_list->utc_second=i_fir_list->utc_second-1;
			}
		else
			{
			i_result_list->utc_nanosecond=i_result_list->utc_nanosecond;
			i_result_list->utc_second=i_fir_list->utc_second;
			}




		i_result_list->sample_rata=i_fir_list->sample_rata;


		if(*first_time==1)
			{
			int i;
			for(i=0;i<3;i++)
				{


				i_result_list->dataV[i]=i_result_list->data[i]/i_result_list->sample_rata/2;
				}

			}
		else
			{
			int i;
			for(i=0;i<3;i++)
				{


				i_result_list->dataV[i]=i_result_list->last->dataV[i]+(i_result_list->data[i]+i_result_list->last->data[i])/i_result_list->sample_rata/2;
				}
			}

		if(*first_time==1)
			{
			int i;
			for(i=0;i<3;i++)
				{


				i_result_list->dataD[i]=i_result_list->dataV[i]/i_result_list->sample_rata/2;
				}
			*first_time=2;
			}
		else
			{
			int i;
			for(i=0;i<3;i++)
				{


				i_result_list->dataD[i]=i_result_list->last->dataD[i]+(i_result_list->dataV[i]+i_result_list->last->dataV[i])/i_result_list->sample_rata/2;
				}
			}

		if(vector_type==3)
			{

			i_result_list->data[4]=pow((double)(i_result_list->data[0]*i_result_list->data[0]+i_result_list->data[1]*i_result_list->data[1]+i_result_list->data[2]*i_result_list->data[2]),0.5);
			i_result_list->dataV[4]=pow((double)(i_result_list->dataV[0]*i_result_list->dataV[0]+i_result_list->dataV[1]*i_result_list->dataV[1]+i_result_list->dataV[2]*i_result_list->dataV[2]),0.5);
			i_result_list->dataD[4]=pow((double)(i_result_list->dataD[0]*i_result_list->dataD[0]+i_result_list->dataD[1]*i_result_list->dataD[1]+i_result_list->dataD[2]*i_result_list->dataD[2]),0.5);
			}
		if(vector_type==2)
			{


			i_result_list->data[4]=pow((double)(i_result_list->data[0]*i_result_list->data[0]+i_result_list->data[1]*i_result_list->data[1]),0.5);
			i_result_list->dataV[4]=pow((double)(i_result_list->dataV[0]*i_result_list->dataV[0]+i_result_list->dataV[1]*i_result_list->dataV[1]),0.5);
			i_result_list->dataD[4]=pow((double)(i_result_list->dataD[0]*i_result_list->dataD[0]+i_result_list->dataD[1]*i_result_list->dataD[1]),0.5);
			}



		//i_result_list->utc_nanosecond=i_result_list->utc_nanosecond;
		//i_result_list->utc_second=i_fir_list->utc_second;


		//*location=2;

		return 2;
		

		}

	return 0;

	};



int resample2_before20180715(FIR_LIST1 *i_fir_list,int* location,FIR_LIST *i_result_list)
	{
	int firLength,j;
	int naomiao=1000000000;
	double datamid;
	FIR_LIST1 *now_fir;
	if (i_fir_list->sample_rata==50)
		{
		firLength=165;
		double Fir[165]={4.9641455551500924e-04 ,
			2.0861378186126486e-03 ,
			5.9371867707562944e-03 ,
			1.3518407568000015e-02 ,
			2.6341291481791776e-02 ,
			4.5433407622373294e-02 ,
			7.0694789139687478e-02 ,
			1.0032599556820671e-01 ,
			1.3057809289278391e-01 ,
			1.5604920102387312e-01 ,
			1.7062620696768016e-01 ,
			1.6896304436890949e-01 ,
			1.4815777196678998e-01 ,
			1.0912468872363833e-01 ,
			5.7136290507488259e-02 ,
			1.1765053278084471e-03 ,
			-4.7920119380674246e-02 ,
			-8.0159669026659580e-02 ,
			-8.9180647540351571e-02 ,
			-7.4271692869622138e-02 ,
			-4.0882959531061157e-02 ,
			6.8228177420737808e-04 ,
			3.8130031772198307e-02 ,
			6.0778152613811566e-02 ,
			6.2770953134357349e-02 ,
			4.4833613072213487e-02 ,
			1.3932419151181995e-02 ,
			-1.9102954449573384e-02 ,
			-4.3231019385772076e-02 ,
			-5.0891959762388125e-02 ,
			-4.0467483860047435e-02 ,
			-1.6646934188868603e-02 ,
			1.1421857776306230e-02 ,
			3.3520885458170509e-02 ,
			4.2052471614766961e-02 ,
			3.4686478875163976e-02 ,
			1.5010718732802113e-02 ,
			-9.0184186909654449e-03 ,
			-2.8202041261691381e-02 ,
			-3.5592116981032720e-02 ,
			-2.9022278850113357e-02 ,
			-1.1737280586981898e-02 ,
			9.0687831748027681e-03 ,
			2.5183300867102770e-02 ,
			3.0596161151405579e-02 ,
			2.3747045860466644e-02 ,
			7.9491966081399641e-03 ,
			-1.0118766864188540e-02 ,
			-2.3193387280601028e-02 ,
			-2.6332570666082029e-02 ,
			-1.8784540879037852e-02 ,
			-4.1077507236406095e-03 ,
			1.1444165095785774e-02 ,
			2.1558537605452899e-02 ,
			2.2417130381194396e-02 ,
			1.4133943714712835e-02 ,
			5.3451923686850724e-04 ,
			-1.2569329543819424e-02 ,
			-1.9844601735316731e-02 ,
			-1.8601266430032466e-02 ,
			-9.7773704037175096e-03 ,
			2.6131953072813414e-03 ,
			1.3278887077236207e-02 ,
			1.7898119909027670e-02 ,
			1.4864737610862301e-02 ,
			5.8270635558930455e-03 ,
			-5.1519181537227491e-03 ,
			-1.3402596621367304e-02 ,
			-1.5626465614023366e-02 ,
			-1.1208101352319783e-02 ,
			-2.3414092152496471e-03 ,
			7.0285444763493674e-03 ,
			1.2948329498229844e-02 ,
			1.3117763840411755e-02 ,
			7.7738022646380248e-03 ,
			-5.3902498426174137e-04 ,
			-8.1605460504767819e-03 ,
			-1.1917827562232376e-02 ,
			-1.0439942484953170e-02 ,
			-4.6419071140587440e-03 ,
			2.7851977222961761e-03 ,
			8.6102577645724345e-03 ,
			1.0461231321983511e-02 ,
			7.7837791788257886e-03 ,
			1.9749625036189324e-03 ,
			-4.3203501210721338e-03 ,
			-8.4047263965501690e-03 ,
			-8.6782014798381935e-03 ,
			-5.2549395514285063e-03 ,
			1.8646412280456107e-04 ,
			5.2110987409515743e-03 ,
			7.7106544334032724e-03 ,
			6.7820157458664413e-03 ,
			3.0379288862060821e-03 ,
			-1.7489311403861120e-03 ,
			-5.4753949627258797e-03 ,
			-6.6263311708058981e-03 ,
			-4.8832904244723091e-03 ,
			-1.1821673665924283e-03 ,
			2.7694433605619231e-03 ,
			5.2731165254131726e-03 ,
			5.3643358691174078e-03 ,
			3.1740611902241972e-03 ,
			-2.0336140420331846e-04 ,
			-3.2454664403018768e-03 ,
			-4.6825224974431584e-03 ,
			-4.0216886909035807e-03 ,
			-1.7007493067159065e-03 ,
			1.1677646005837593e-03 ,
			3.3223266015993025e-03 ,
			3.9024742248125765e-03 ,
			2.7853577250094648e-03 ,
			5.8068877506803373e-04 ,
			-1.6874003239461088e-03 ,
			-3.0506146168672896e-03 ,
			-3.0051155179690778e-03 ,
			-1.6882524498498489e-03 ,
			2.3345697643360156e-04 ,
			1.8932191551250081e-03 ,
			2.6105522313560601e-03 ,
			2.1650290090240278e-03 ,
			8.4961889270458214e-04 ,
			-6.9991983976259021e-04 ,
			-1.8066605034299885e-03 ,
			-2.0442478039422183e-03 ,
			-1.3947895802411611e-03 ,
			-2.1778805894814116e-04 ,
			9.3880999124384479e-04 ,
			1.5896069495257657e-03 ,
			1.5114885297533255e-03 ,
			8.1186820415698059e-04 ,
			-1.5058229368607759e-04 ,
			-9.4384608750351900e-04 ,
			-1.2530996766558678e-03 ,
			-1.0012813253543512e-03 ,
			-3.5580323523576812e-04 ,
			3.6915829402987393e-04 ,
			8.6166517210201825e-04 ,
			9.4321915671371191e-04 ,
			6.2839852380132605e-04 ,
			9.5907205753932231e-05 ,
			-4.0626184847617191e-04 ,
			-6.7339954953361109e-04 ,
			-6.2450419057352626e-04 ,
			-3.2049055349451757e-04 ,
			7.9630912629678407e-05 ,
			3.9808566929092065e-04 ,
			5.1498901799025597e-04 ,
			4.1035124916093260e-04 ,
			1.5844912981049161e-04 ,
			-1.1639279192463697e-04 ,
			-2.9853442979296894e-04 ,
			-3.2749921041051673e-04 ,
			-2.1457932271049809e-04 ,
			-2.7179669080954586e-05 ,
			1.4748545183980273e-04 ,
			2.4091962748403346e-04 ,
			2.2772734522904744e-04 ,
			1.2822291339905899e-04 ,
			-7.9288020909925007e-06 ,
			-1.2676835065509535e-04 ,
			-1.9181698110169713e-04 ,
			-1.9427077204277652e-04 ,
			-1.4987365019528419e-04 ,
			-1.0932778659256012e-04 ,
			};

		if(*location!=1)
			{
			if(*location==4)
				*location=1;
			else
				*location=*location+1;

			return 1;
			}
		else if((*location==1))
			{
			for(j=0;j<4;j++)
				{

				datamid=0.0;
				now_fir=i_fir_list;
				int i;
				for(i=0;i<firLength;i++)
					{

					datamid=datamid+now_fir->data[j]*Fir[i];
						
					now_fir=now_fir->last;
					}

				i_result_list->data[j]=datamid;

				}

			i_result_list->utc_nanosecond=i_fir_list->utc_nanosecond-8*((long)1.0/200*naomiao);
			if(i_result_list->utc_nanosecond<0)
				{
				i_result_list->utc_nanosecond=i_result_list->utc_nanosecond+naomiao;
				i_result_list->utc_second=i_fir_list->utc_second-1;
				}
			else
				{
				i_result_list->utc_nanosecond=i_result_list->utc_nanosecond;
				i_result_list->utc_second=i_fir_list->utc_second;
				}



			i_result_list->sample_rata=i_fir_list->sample_rata;










				//i_result_list->utc_nanosecond=i_fir_list->utc_nanosecond;
				//i_result_list->utc_second=i_fir_list->utc_second;
				*location=*location+1;



			return 2;
			}

		}
	else if(i_fir_list->sample_rata==100)
		{

		firLength=83;
		double Fir[83]={4.9565345342527083e-03 ,
			3.1012441821297185e-02 ,
			1.0048883061092734e-01 ,
			2.1432464632013803e-01 ,
			3.2147309841312671e-01 ,
			3.3257689284339487e-01 ,
			1.9671911052858826e-01 ,
			-2.1847188192472854e-02 ,
			-1.6830668715581221e-01 ,
			-1.3502859947402918e-01 ,
			2.0698376590843448e-02 ,
			1.2584673845204788e-01 ,
			7.5979361963327677e-02 ,
			-5.2065125506812915e-02 ,
			-9.9340495169607398e-02 ,
			-1.9375994274479631e-02 ,
			7.3734074958272375e-02 ,
			6.1050418002940150e-02 ,
			-2.8979006327531337e-02 ,
			-7.0035690205542567e-02 ,
			-1.3014245086577609e-02 ,
			5.5030976942061723e-02 ,
			4.0545902573336907e-02 ,
			-2.8082696658478529e-02 ,
			-5.0421390881957857e-02 ,
			-1.7834656757996754e-05 ,
			4.5125492822974823e-02 ,
			2.1825934854468827e-02 ,
			-3.0053224212681997e-02 ,
			-3.3722901951940665e-02 ,
			1.1271393644200866e-02 ,
			3.5431365435583353e-02 ,
			6.0254388777077712e-03 ,
			-2.9032820369749107e-02 ,
			-1.8365835664428589e-02 ,
			1.7836086199393315e-02 ,
			2.4247351654105947e-02 ,
			-5.3436698372127103e-03 ,
			-2.3919138424269258e-02 ,
			-5.5308831743347978e-03 ,
			1.8877344682117301e-02 ,
			1.2918176207598490e-02 ,
			-1.1241945793509300e-02 ,
			-1.6120030679164930e-02 ,
			3.1634775158068049e-03 ,
			1.5470185531616517e-02 ,
			3.6297028820528616e-03 ,
			-1.2015319995270593e-02 ,
			-8.0877471038021970e-03 ,
			7.1258049532141269e-03 ,
			9.8962295266822528e-03 ,
			-2.1322356093256500e-03 ,
			-9.3627724581123416e-03 ,
			-1.9441131165764229e-03 ,
			7.2009863690685938e-03 ,
			4.5314263521835270e-03 ,
			-4.2793203209142480e-03 ,
			-5.5154834009744748e-03 ,
			1.3955917406249388e-03 ,
			5.1484665442471916e-03 ,
			8.7622621642518812e-04 ,
			-3.8995330161913045e-03 ,
			-2.2518533600445283e-03 ,
			2.2932017382367091e-03 ,
			2.7219589883875212e-03 ,
			-7.7854861536424036e-04 ,
			-2.4778211240336200e-03 ,
			-3.5098761756623446e-04 ,
			1.8109138109091163e-03 ,
			9.8024453827756652e-04 ,
			-1.0162695697266276e-03 ,
			-1.1460775274288132e-03 ,
			3.2131491296885509e-04 ,
			9.8339892301504191e-04 ,
			1.4727257793976242e-04 ,
			-6.6105780015931408e-04 ,
			-3.6483672132473876e-04 ,
			3.3149350245799088e-04 ,
			3.8949042799572256e-04 ,
			-1.0531691484516781e-04 ,
			-4.1081214634534669e-04 ,
			-2.9400456671669945e-04 ,
			-3.0054312030186778e-05 ,



			};
			if(*location==2)
				{
				*location=1;
				return 1;
				}
			else if(*location==1)
				{
				for(j=0;j<4;j++)
					{

					datamid=0.0;
					now_fir=i_fir_list;
					int i;
					for(i=0;i<firLength;i++)
						{
		
							
							datamid=datamid+now_fir->data[j]*Fir[i];
							
						now_fir=now_fir->last;
						}

					i_result_list->data[j]=datamid;

					}


				i_result_list->utc_nanosecond=i_fir_list->utc_nanosecond-3*((long)1.0/200*naomiao);
				if(i_result_list->utc_nanosecond<0)
					{
					i_result_list->utc_nanosecond=i_result_list->utc_nanosecond+naomiao;
					i_result_list->utc_second=i_fir_list->utc_second-1;
					}
				else
					{
					i_result_list->utc_nanosecond=i_result_list->utc_nanosecond;
					i_result_list->utc_second=i_fir_list->utc_second;
					}




				i_result_list->sample_rata=i_fir_list->sample_rata;


					//i_result_list->utc_nanosecond=i_result_list->utc_nanosecond;
					//i_result_list->utc_second=i_fir_list->utc_second;
	

					*location==2;

				return 2;
				}

		}
	


	return 0;

	};

void resample2_test_main()
	{
	int j,i;
	float data[1000];
	float dataV[1000];
	float dataD[1000];
	int i_location=1;
	double dataOut;
	int first_time=1;
	int vector_type=2;
	double pi=3.14159265358979323;
	int sample_rate=200; //  改变采样率
		
		for(i=0;i<1000;i++)
			{
			//data[i]=/*pow(-1.0,double(i))**/i;
			data[i]=sin(2*pi/50*i);
			}
	FIR_LIST1 ssdata[1000];
	FIR_LIST  rrdata[1000];
	FIR_LIST *nowFir;

	nowFir=&rrdata[0];

	for(i=0;i<1000;i++)
		{
		if(i==0)
			dataV[i]=data[i]/sample_rate/2;
		else
			dataV[i]=(data[i]+data[i-1])/sample_rate/2;
		}

	for(i=0;i<1000;i++)
		{
		if(i==0)
			dataD[i]=dataV[i]/sample_rate/2;
		else
			dataD[i]=(dataV[i]+dataV[i-1])/sample_rate/2;
		}


	for(j=0;j<5;j++)
		{
	
		ssdata[0].data[j]=data[0];
		ssdata[0].next=&ssdata[1];
		ssdata[0].sample_rata=sample_rate;
		int i;
		 for(i=1;i<999;i++)
			{
			ssdata[i].data[j]=data[i];
			ssdata[i].last=&ssdata[i-1];
			ssdata[i].next=&ssdata[i+1];
			ssdata[i].sample_rata=sample_rate;
			}

		 ssdata[999].data[j]=data[999];
		 ssdata[999].last=&ssdata[998];
		 ssdata[999].sample_rata=sample_rate;
		}

	for(j=0;j<5;j++)
		{

		rrdata[0].data[j]=data[0];
		rrdata[0].next=&rrdata[1];
		rrdata[0].sample_rata=sample_rate;
		int i;
		for(i=1;i<999;i++)
			{
			rrdata[i].data[j]=data[i];
			rrdata[i].last=&rrdata[i-1];
			rrdata[i].next=&rrdata[i+1];
			rrdata[i].sample_rata=sample_rate;
			}

		rrdata[999].data[j]=data[999];
		rrdata[999].last=&rrdata[998];
		rrdata[999].sample_rata=sample_rate;
		}



	 if(sample_rate==50)
		 {

		 int i;
		for(i=200;i<400;i++)
			{

			if(resample2(&ssdata[i],&i_location,nowFir,&first_time,vector_type)==2)
				{
				//cout<<dataOut<<"    "<<data[80]<<endl;
				printf("%16.8f  %16.8f %16.8f %16.8f \n",nowFir->data[0],nowFir->data[1],nowFir->data[2],data[i-8] );
				nowFir=nowFir->next;
				}
			}
	     }

	 if(sample_rate==100)
		 {

		 	int i;
		 for(i=203;i<400;i++)
			 {

			 if(resample2(&ssdata[i],&i_location,nowFir,&first_time,vector_type)==2)
				 {
				 //cout<<dataOut<<"    "<<data[80]<<endl;
				 printf("%16.8f  %16.8f %16.8f %16.8f \n",nowFir->data[0],nowFir->data[1],nowFir->dataV[0],data[i-3] );
				 nowFir=nowFir->next;
				 }
			 }
		 }

	 if(sample_rate==200)
		 {

		 	int i;
		 for(i=400;i<600;i++)
			 {

			 if(resample2(&ssdata[i],&i_location,nowFir,&first_time,vector_type)==2)
				 {
				 //cout<<dataOut<<"    "<<data[80]<<endl;
				 printf("%16.8f  %16.8f %16.8f %16.8f \n",nowFir->data[0],nowFir->data[1],nowFir->data[4],data[i-2] );
				 nowFir=nowFir->next;
				 }
			 }
		 }





	//band_pass(data,191,200,dataOut);
	////cout<<dataOut<<"    "<<data[60]<<endl;
	//printf("%d   %d \n",dataOut,data[190-95] );
	//band_pass(data,301,400,dataOut);
	////cout<<dataOut<<"    "<<data[40]<<endl;
	//printf("%d   %d \n",dataOut,data[300-150] );
	//cout<<"press enter kye to continue......"<<endl;
	//cin.get();
	getchar();
	}







int band_passstruct(FIR_LIST *i_fir_list,int PGV_type,int *count,int timespan)
	{
	int firLength,j;
	double datamid;
	FIR_LIST *now_fir;
	if (i_fir_list->sample_rata==50)
		{
		firLength=81;
		double Fir[81]={-4.7987787339820936e-04,
			-8.9057350076593368e-04,
			-7.2903341056485352e-04,
			-9.3968046651590189e-04,
			-2.0015152670250906e-03,
			-1.8457782153191327e-03,
			-1.4331943313841396e-03,
			-3.2987790655067970e-03,
			-3.9188767708761094e-03,
			-2.2358326021832526e-03,
			-4.2761095213556272e-03,
			-6.9685597648698229e-03,
			-4.0562398557881119e-03,
			-4.5086713435378723e-03,
			-1.0324010165847381e-02,
			-7.7980789590883538e-03,
			-4.2123548102063557e-03,
			-1.2580685653923828e-02,
			-1.3896183105007932e-02,
			-4.6707793854684938e-03,
			-1.2139776287417038e-02,
			-2.1492365469531257e-02,
			-8.0968892823001046e-03,
			-8.2631555848332473e-03,
			-2.7966602054323594e-02,
			-1.6735759731169867e-02,
			-2.1834926757662077e-03,
			-2.9254096192636532e-02,
			-3.1499163705017090e-02,
			2.3107659525776346e-03,
			-2.0832464828927390e-02,
			-5.0853889965031082e-02,
			-1.1624388651572256e-03,
			1.8841462457617236e-03,
			-7.0730297852423088e-02,
			-2.3669862992490260e-02,
			4.9655253129437991e-02,
			-8.5754335252881606e-02,
			-1.1745446174509039e-01,
			2.7761355362248835e-01,
			5.7538029520670841e-01,
			2.7761355362248769e-01,
			-1.1745446174508975e-01,
			-8.5754335252880912e-02,
			4.9655253129437457e-02,
			-2.3669862992489934e-02,
			-7.0730297852421936e-02,
			1.8841462457616889e-03,
			-1.1624388651572048e-03,
			-5.0853889965029819e-02,
			-2.0832464828926815e-02,
			2.3107659525775617e-03,
			-3.1499163705016028e-02,
			-2.9254096192635470e-02,
			-2.1834926757661245e-03,
			-1.6735759731169159e-02,
			-2.7966602054322321e-02,
			-8.2631555848328413e-03,
			-8.0968892822996814e-03,
			-2.1492365469530057e-02,
			-1.2139776287416327e-02,
			-4.6707793854682024e-03,
			-1.3896183105007011e-02,
			-1.2580685653922945e-02,
			-4.2123548102060435e-03,
			-7.7980789590877501e-03,
			-1.0324010165846531e-02,
			-4.5086713435374846e-03,
			-4.0562398557877433e-03,
			-6.9685597648691568e-03,
			-4.2761095213552005e-03,
			-2.2358326021830158e-03,
			-3.9188767708756775e-03,
			-3.2987790655064630e-03,
			-1.4331943313839600e-03,
			-1.8457782153188935e-03,
			-2.0015152670248100e-03,
			-9.3968046651576485e-04,
			-7.2903341056474108e-04,
			-8.9057350076577387e-04,
			-4.7987787339812745e-04,
			};
		//if(dataNum<81)
		//	{
		//	return -1;
		//	}
		for(j=0;j<5;j++)
			{

			datamid=0.0;
			now_fir=i_fir_list;
			int i;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->data[j]*Fir[i];
				now_fir=now_fir->last;
				}

			i_fir_list->band_pass_data[j]=datamid;
			}

		if(PGV_type==1)
			{
			datamid=0.0;
			now_fir=i_fir_list;
			int i;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->dataV[4]*Fir[i];
				now_fir=now_fir->last;
				}
			i_fir_list->band_pass_dataV[4]=datamid;



			datamid=0.0;
			now_fir=i_fir_list;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->dataD[4]*Fir[i];
				now_fir=now_fir->last;
				}
			i_fir_list->band_pass_dataD[4]=datamid;

			}
		else if(PGV_type==2)
			{
				int j;
			for(j=0;j<3;j++)
				{

				
				datamid=0.0;
				now_fir=i_fir_list;
				int i;
				for(i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataV[j]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataV[j]=datamid;

				}
							i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
			for(j=0;j<3;j++)
				{

				
				datamid=0.0;
				now_fir=i_fir_list;
				int i;
				for(i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataD[j]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataD[j]=datamid;
				}
							i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
			}

		if(*count==1)
			{
			i_fir_list->instant_PGA=i_fir_list->band_pass_data[4];
			i_fir_list->instant_PGV=i_fir_list->band_pass_dataV[4];
			i_fir_list->instant_PGD=i_fir_list->band_pass_dataD[4];
			*count+=1;
			}
		else
			{
			if(i_fir_list->band_pass_data[4]>i_fir_list->last->instant_PGA)
				{
				i_fir_list->instant_PGA=i_fir_list->band_pass_data[4];
				i_fir_list->utc_second_instant_PGA=i_fir_list->utc_second; //utc时间秒
				i_fir_list->utc_nanosecond_instant_PGA=i_fir_list->utc_nanosecond; //utc时间纳秒

				}
			else
				{
				i_fir_list->instant_PGA=i_fir_list->last->instant_PGA;
				i_fir_list->utc_second_instant_PGA=i_fir_list->last->utc_second; //utc时间秒
				i_fir_list->utc_nanosecond_instant_PGA=i_fir_list->last->utc_nanosecond; //utc时间纳秒
				}
			if(i_fir_list->band_pass_dataV[4]>i_fir_list->last->instant_PGV)
				{
				i_fir_list->instant_PGV=i_fir_list->band_pass_dataV[4];
				i_fir_list->utc_second_instant_PGV=i_fir_list->utc_second; //utc时间秒
				i_fir_list->utc_nanosecond_instant_PGV=i_fir_list->utc_nanosecond; //utc时间纳秒
				}
			else
				{
				i_fir_list->instant_PGV=i_fir_list->last->instant_PGV;
				i_fir_list->utc_second_instant_PGV=i_fir_list->last->utc_second; //utc时间秒
				i_fir_list->utc_nanosecond_instant_PGV=i_fir_list->last->utc_nanosecond; //utc时间纳秒
				}
			if(i_fir_list->band_pass_dataD[4]>i_fir_list->last->instant_PGD)
				{
				i_fir_list->instant_PGD=i_fir_list->band_pass_dataD[4];
				i_fir_list->utc_second_instant_PGD=i_fir_list->utc_second; //utc时间秒
				i_fir_list->utc_nanosecond_instant_PGD=i_fir_list->utc_nanosecond; //utc时间纳秒
				}
			else
				{
				i_fir_list->instant_PGD=i_fir_list->last->instant_PGD;
				i_fir_list->utc_second_instant_PGD=i_fir_list->last->utc_second; //utc时间秒
				i_fir_list->utc_nanosecond_instant_PGD=i_fir_list->last->utc_nanosecond; //utc时间纳秒
				}
			if(*count==timespan*50)
				
				{
				*count=1;
				return 2;
				}
			else
				{

				
				*count+=1;
				}



			}

		return 1;
		}
	else if(i_fir_list->sample_rata==100)
		{
		//if(dataNum<191)
		//	{
		//	return -1;
		//	}
		firLength=191;
		double Fir[191]={-1.0096108503799409e-03,
			-1.3950482601184145e-03,
			-2.2527488512072823e-03,
			-2.9478325266950626e-03,
			-2.9241282941009309e-03,
			-2.1964877583498382e-03,
			-1.3932186866449717e-03,
			-1.2683702309322061e-03,
			-2.0587294816955936e-03,
			-3.2307108495224480e-03,
			-3.8728518839418980e-03,
			-3.4512139742405856e-03,
			-2.3045215990983815e-03,
			-1.4270997345429326e-03,
			-1.6661388536950924e-03,
			-2.9780040916341042e-03,
			-4.3915096269727697e-03,
			-4.7685469089617048e-03,
			-3.7708238360917514e-03,
			-2.2154696854772564e-03,
			-1.4639880273141859e-03,
			-2.2943598211664952e-03,
			-4.1868456476722750e-03,
			-5.6701595913976281e-03,
			-5.5118721440431517e-03,
			-3.7942060764075075e-03,
			-1.9423711063670419e-03,
			-1.6026343679009464e-03,
			-3.2475373165740244e-03,
			-5.6846723133800129e-03,
			-6.9564131921419870e-03,
			-5.9605784961465312e-03,
			-3.4555395583318526e-03,
			-1.5446848893690436e-03,
			-1.9729728155626920e-03,
			-4.6090756549750133e-03,
			-7.4249335517157806e-03,
			-8.0957173947760943e-03,
			-5.9658402480322953e-03,
			-2.7259882160986819e-03,
			-1.1326443571281007e-03,
			-2.7279163951726233e-03,
			-6.4379538633729206e-03,
			-9.3078652451388747e-03,
			-8.8937043531173623e-03,
			-5.3843686320969916e-03,
			-1.6236386602042371e-03,
			-8.6795329695463013e-04,
			-4.0358532878403434e-03,
			-8.7602540790057502e-03,
			-1.1177665546498936e-02,
			-9.1197841612625230e-03,
			-4.0841129832286773e-03,
			-2.1710181588843413e-04,
			-9.6506787169073674e-04,
			-6.0820299780298100e-03,
			-1.1571060989487639e-02,
			-1.2821283663388564e-02,
			-8.4992305065876590e-03,
			-1.9327687604891049e-03,
			1.3784923032710335e-03,
			-1.7050246429269466e-03,
			-9.0969663617697753e-03,
			-1.4856515017832844e-02,
			-1.3958829431456619e-02,
			-6.6666698386317613e-03,
			1.2562792472859616e-03,
			3.0131140370235859e-03,
			-3.4963797956000272e-03,
			-1.3462418900154581e-02,
			-1.8662168940531118e-02,
			-1.4193048970612182e-02,
			-2.9949266075571710e-03,
			5.9029683387124953e-03,
			4.5197236235567867e-03,
			-7.1079148261703534e-03,
			-2.0084767678293092e-02,
			-2.3311188040322776e-02,
			-1.2784038623879721e-02,
			4.0762178712041601e-03,
			1.3346915816899603e-02,
			5.7359043739684543e-03,
			-1.4720837908786619e-02,
			-3.2099574332974203e-02,
			-3.0404413640455791e-02,
			-7.3824560015768315e-03,
			2.0903522723558492e-02,
			3.0096061155356627e-02,
			6.5259347250955285e-03,
			-3.8462292200619481e-02,
			-7.0869487224785352e-02,
			-5.4107874682352952e-02,
			2.5259979404526650e-02,
			1.4370865641013861e-01,
			2.4982563870147181e-01,
			2.9230819959096299e-01,
			2.4982563870147181e-01,
			1.4370865641013864e-01,
			2.5259979404526654e-02,
			-5.4107874682352966e-02,
			-7.0869487224785366e-02,
			-3.8462292200619495e-02,
			6.5259347250955302e-03,
			3.0096061155356641e-02,
			2.0903522723558506e-02,
			-7.3824560015768349e-03,
			-3.0404413640455815e-02,
			-3.2099574332974223e-02,
			-1.4720837908786630e-02,
			5.7359043739684604e-03,
			1.3346915816899613e-02,
			4.0762178712041627e-03,
			-1.2784038623879739e-02,
			-2.3311188040322804e-02,
			-2.0084767678293116e-02,
			-7.1079148261703612e-03,
			4.5197236235567911e-03,
			5.9029683387125048e-03,
			-2.9949266075571736e-03,
			-1.4193048970612207e-02,
			-1.8662168940531153e-02,
			-1.3462418900154604e-02,
			-3.4963797956000320e-03,
			3.0131140370235911e-03,
			1.2562792472859642e-03,
			-6.6666698386317743e-03,
			-1.3958829431456649e-02,
			-1.4856515017832875e-02,
			-9.0969663617697927e-03,
			-1.7050246429269492e-03,
			1.3784923032710370e-03,
			-1.9327687604891093e-03,
			-8.4992305065876780e-03,
			-1.2821283663388595e-02,
			-1.1571060989487670e-02,
			-6.0820299780298256e-03,
			-9.6506787169073935e-04,
			-2.1710181588843587e-04,
			-4.0841129832286877e-03,
			-9.1197841612625508e-03,
			-1.1177665546498967e-02,
			-8.7602540790057779e-03,
			-4.0358532878403556e-03,
			-8.6795329695463187e-04,
			-1.6236386602042424e-03,
			-5.3843686320970089e-03,
			-8.8937043531173883e-03,
			-9.3078652451389042e-03,
			-6.4379538633729406e-03,
			-2.7279163951726333e-03,
			-1.1326443571281050e-03,
			-2.7259882160986914e-03,
			-5.9658402480323187e-03,
			-8.0957173947761238e-03,
			-7.4249335517158083e-03,
			-4.6090756549750297e-03,
			-1.9729728155626998e-03,
			-1.5446848893690497e-03,
			-3.4555395583318661e-03,
			-5.9605784961465555e-03,
			-6.9564131921420139e-03,
			-5.6846723133800337e-03,
			-3.2475373165740378e-03,
			-1.6026343679009538e-03,
			-1.9423711063670500e-03,
			-3.7942060764075232e-03,
			-5.5118721440431751e-03,
			-5.6701595913976532e-03,
			-4.1868456476722923e-03,
			-2.2943598211665065e-03,
			-1.4639880273141920e-03,
			-2.2154696854772668e-03,
			-3.7708238360917696e-03,
			-4.7685469089617273e-03,
			-4.3915096269727888e-03,
			-2.9780040916341185e-03,
			-1.6661388536951005e-03,
			-1.4270997345429397e-03,
			-2.3045215990983915e-03,
			-3.4512139742406017e-03,
			-3.8728518839419141e-03,
			-3.2307108495224631e-03,
			-2.0587294816956044e-03,
			-1.2683702309322122e-03,
			-1.3932186866449782e-03,
			-2.1964877583498486e-03,
			-2.9241282941009409e-03,
			-2.9478325266950032e-03,
			-2.2527488512072988e-03,
			-1.3950482601184288e-03,
			-1.0096108503799466e-03,



			};
        for(j=0;j<5;j++)
			{

			datamid=0.0;
			now_fir=i_fir_list;
			int i;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->data[j]*Fir[i];
				now_fir=now_fir->last;
				}

			i_fir_list->band_pass_data[j]=datamid;
			}

		if(PGV_type==1)
			{
			datamid=0.0;
			now_fir=i_fir_list;
			int i;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->dataV[4]*Fir[i];
				now_fir=now_fir->last;
				}
			i_fir_list->band_pass_dataV[4]=datamid;



			datamid=0.0;
			now_fir=i_fir_list;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->dataD[4]*Fir[i];
				now_fir=now_fir->last;
				}
			i_fir_list->band_pass_dataD[4]=datamid;

			}
		else if(PGV_type==2)
			{
				int j;
			for(j=0;j<3;j++)
				{


				datamid=0.0;
				now_fir=i_fir_list;
				int i;
				for(i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataV[j]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataV[j]=datamid;

				}
			i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
			for(j=0;j<3;j++)
				{


				datamid=0.0;
				now_fir=i_fir_list;
				int i;
				for(i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataD[j]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataD[j]=datamid;
				}
			i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
			}

		if(*count==1)
			{
			i_fir_list->instant_PGA=i_fir_list->band_pass_data[j];
			i_fir_list->instant_PGV=i_fir_list->band_pass_dataV[j];
			i_fir_list->instant_PGD=i_fir_list->band_pass_dataD[j];
			*count+=1;
			}
		else
			{
			if(i_fir_list->band_pass_data[4]>i_fir_list->instant_PGA)
				{
				i_fir_list->instant_PGA=i_fir_list->band_pass_data[4];
				i_fir_list->utc_second_instant_PGA=i_fir_list->utc_second; //utc时间秒
				i_fir_list->utc_nanosecond_instant_PGA=i_fir_list->utc_nanosecond; //utc时间纳秒

				}
			if(i_fir_list->band_pass_dataV[4]>i_fir_list->instant_PGV)
				{
				i_fir_list->instant_PGV=i_fir_list->band_pass_dataV[4];
				i_fir_list->utc_second_instant_PGV=i_fir_list->utc_second; //utc时间秒
				i_fir_list->utc_nanosecond_instant_PGV=i_fir_list->utc_nanosecond; //utc时间纳秒
				}
			if(i_fir_list->band_pass_dataD[4]>i_fir_list->instant_PGD)
				{
				i_fir_list->instant_PGD=i_fir_list->band_pass_dataD[4];
				i_fir_list->utc_second_instant_PGD=i_fir_list->utc_second; //utc时间秒
				i_fir_list->utc_nanosecond_instant_PGD=i_fir_list->utc_nanosecond; //utc时间纳秒
				}
			if(*count==timespan*100)

				{
				*count=1;
				return 2;
				}
			else
				{


				*count+=1;
				}



			}


		return 1;
		}
	else if(i_fir_list->sample_rata==200)
		{
		firLength=301;
		//if(dataNum<301)
		//	{
		//	return -1;
		//	}
		double Fir[301]={-1.5738968347689628e-04,
			-1.7735491639294824e-04,
			-2.1736124094126334e-04,
			-2.7483905489700012e-04,
			-3.4266813193163193e-04,
			-4.1030106015100642e-04,
			-4.6590026089908369e-04,
			-4.9908565647348161e-04,
			-5.0368485858866155e-04,
			-4.7980096272096865e-04,
			-4.3459912811287315e-04,
			-3.8145932023061683e-04,
			-3.3750551620498548e-04,
			-3.1992389949451273e-04,
			-3.4182841427864982e-04,
			-4.0862956128619334e-04,
			-5.1584657092479044e-04,
			-6.4905509995696496e-04,
			-7.8621869932361810e-04,
			-9.0210075583715586e-04,
			-9.7391805542624665e-04,
			-9.8700968544837217e-04,
			-9.3916478239759282e-04,
			-8.4243680789333406e-04,
			-7.2175694572392348e-04,
			-6.1035700575723644e-04,
			-5.4277523357811595e-04,
			-5.4686940852928067e-04,
			-6.3663386121590247e-04,
			-8.0759555645765300e-04,
			-1.0361182005924534e-03,
			-1.2831404037890676e-03,
			-1.5018735401092786e-03,
			-1.6480075080620943e-03,
			-1.6902522160705587e-03,
			-1.6187724217614032e-03,
			-1.4493561975616916e-03,
			-1.2219729859712122e-03,
			-9.9357826868147307e-04,
			-8.2635727901226479e-04,
			-7.7376662014393995e-04,
			-8.6744203333462462e-04,
			-1.1080893063261379e-03,
			-1.4627990304460733e-03,
			-1.8699254737555102e-03,
			-2.2510004567963386e-03,
			-2.5274762640143944e-03,
			-2.6387982693635644e-03,
			-2.5577291433000224e-03,
			-2.2991713422791313e-03,
			-1.9199554375127431e-03,
			-1.5089616520395268e-03,
			-1.1691295962667500e-03,
			-9.9489997697284663e-04,
			-1.0499463509793807e-03,
			-1.3503416137936456e-03,
			-1.8574229089935940e-03,
			-2.4826907958067261e-03,
			-3.1044754803961948e-03,
			-3.5933784465069858e-03,
			-3.8412720032523487e-03,
			-3.7874595744862814e-03,
			-3.4358093523187173e-03,
			-2.8583194491591827e-03,
			-2.1833724736893233e-03,
			-1.5703255973366405e-03,
			-1.1753198885291142e-03,
			-1.1155270970319925e-03,
			-1.4398884580665875e-03,
			-2.1134488140001156e-03,
			-3.0197519628140561e-03,
			-3.9819340454248483e-03,
			-4.7989298359828224e-03,
			-5.2895315090100694e-03,
			-5.3347847421739408e-03,
			-4.9089772067057768e-03,
			-4.0914494807903403e-03,
			-3.0553263232042977e-03,
			-2.0342643861179957e-03,
			-1.2733736807093051e-03,
			-9.7444743993873348e-04,
			-1.2475579059199422e-03,
			-2.0803813561700931e-03,
			-3.3333020239832397e-03,
			-4.7630034661209093e-03,
			-6.0709747972200970e-03,
			-6.9675036714509026e-03,
			-7.2376487999995407e-03,
			-6.7944115044867989e-03,
			-5.7063144258142880e-03,
			-4.1915922126739454e-03,
			-2.5782559165073099e-03,
			-1.2369414329412996e-03,
			-5.0000439657026010e-04,
			-5.8423897384719532e-04,
			-1.5348385257546453e-03,
			-3.2045099423030948e-03,
			-5.2745989273480509e-03,
			-7.3160653117819293e-03,
			-8.8790713655859960e-03,
			-9.5928420397288355e-03,
			-9.2540312860429144e-03,
			-7.8830675166212654e-03,
			-5.7338544840285889e-03,
			-3.2517317719462481e-03,
			-9.8584385474959567e-04,
			5.2737308823975636e-04,
			8.8539160937573045e-04,
			-8.1278022656460546e-05,
			-2.2555652814956074e-03,
			-5.2408116952406677e-03,
			-8.4306412604161132e-03,
			-1.1130333116173553e-02,
			-1.2706151017152620e-02,
			-1.2731360484584070e-02,
			-1.1096337143008480e-02,
			-8.0559256539294525e-03,
			-4.1992280006084327e-03,
			-3.4304817834827792e-04,
			2.6329471431176831e-03,
			3.9772854451277720e-03,
			3.2439302636812226e-03,
			4.1585700052789186e-04,
			-4.0560792879092526e-03,
			-9.3139281317865166e-03,
			-1.4247613714347402e-02,
			-1.7717974336771903e-02,
			-1.8805230945223246e-02,
			-1.7031601742540699e-02,
			-1.2508339273051561e-02,
			-5.9695509104043653e-03,
			1.3240748146035209e-03,
			7.8028250387371500e-03,
			1.1892350786033203e-02,
			1.2350080720461974e-02,
			8.5682310423650879e-03,
			7.7979549076405419e-04,
			-9.8815104670206631e-03,
			-2.1491211233783846e-02,
			-3.1606466363625955e-02,
			-3.7661758554831441e-02,
			-3.7422874756706775e-02,
			-2.9419394015175061e-02,
			-1.3275490993334308e-02,
			1.0126511572124210e-02,
			3.8687978116648487e-02,
			6.9343825778920370e-02,
			9.8485912360757433e-02,
			1.2249350941875659e-01,
			1.3828375204993210e-01,
			1.4378957268385817e-01,
			1.3828375204993198e-01,
			1.2249350941875640e-01,
			9.8485912360757155e-02,
			6.9343825778920107e-02,
			3.8687978116648321e-02,
			1.0126511572124158e-02,
			-1.3275490993334225e-02,
			-2.9419394015174839e-02,
			-3.7422874756706463e-02,
			-3.7661758554831101e-02,
			-3.1606466363625629e-02,
			-2.1491211233783607e-02,
			-9.8815104670205468e-03,
			7.7979549076404465e-04,
			8.5682310423649734e-03,
			1.2350080720461792e-02,
			1.1892350786033016e-02,
			7.8028250387370190e-03,
			1.3240748146034983e-03,
			-5.9695509104042534e-03,
			-1.2508339273051316e-02,
			-1.7031601742540346e-02,
			-1.8805230945222844e-02,
			-1.7717974336771518e-02,
			-1.4247613714347076e-02,
			-9.3139281317862910e-03,
			-4.0560792879091503e-03,
			4.1585700052788145e-04,
			3.2439302636811385e-03,
			3.9772854451276627e-03,
			2.6329471431176059e-03,
			-3.4304817834826751e-04,
			-4.1992280006083061e-03,
			-8.0559256539291975e-03,
			-1.1096337143008119e-02,
			-1.2731360484583639e-02,
			-1.2706151017152188e-02,
			-1.1130333116173159e-02,
			-8.4306412604158061e-03,
			-5.2408116952404717e-03,
			-2.2555652814955185e-03,
			-8.1278022656457077e-05,
			8.8539160937569489e-04,
			5.2737308823973467e-04,
			-9.8584385474955491e-04,
			-3.2517317719461085e-03,
			-5.7338544840283339e-03,
			-7.8830675166209115e-03,
			-9.2540312860424894e-03,
			-9.5928420397283845e-03,
			-8.8790713655855676e-03,
			-7.3160653117815720e-03,
			-5.2745989273477829e-03,
			-3.2045099423029331e-03,
			-1.5348385257545655e-03,
			-5.8423897384716496e-04,
			-5.0000439657023278e-04,
			-1.2369414329412311e-03,
			-2.5782559165071638e-03,
			-4.1915922126737068e-03,
			-5.7063144258139575e-03,
			-6.7944115044863947e-03,
			-7.2376487999991001e-03,
			-6.9675036714504724e-03,
			-6.0709747972197223e-03,
			-4.7630034661206057e-03,
			-3.3333020239830237e-03,
			-2.0803813561699586e-03,
			-1.2475579059198585e-03,
			-9.7444743993866712e-04,
			-1.2733736807092175e-03,
			-2.0342643861178543e-03,
			-3.0553263232040791e-03,
			-4.0914494807900480e-03,
			-4.9089772067054177e-03,
			-5.3347847421735478e-03,
			-5.2895315090096687e-03,
			-4.7989298359824538e-03,
			-3.9819340454245395e-03,
			-3.0197519628138176e-03,
			-2.1134488139999473e-03,
			-1.4398884580664711e-03,
			-1.1155270970319006e-03,
			-1.1753198885290160e-03,
			-1.5703255973365086e-03,
			-2.1833724736891359e-03,
			-2.8583194491589325e-03,
			-3.4358093523184151e-03,
			-3.7874595744859440e-03,
			-3.8412720032520008e-03,
			-3.5933784465066554e-03,
			-3.1044754803959073e-03,
			-2.4826907958064920e-03,
			-1.8574229089934173e-03,
			-1.3503416137935148e-03,
			-1.0499463509792775e-03,
			-9.9489997697274797e-04,
			-1.1691295962666325e-03,
			-1.5089616520393724e-03,
			-1.9199554375125441e-03,
			-2.2991713422788910e-03,
			-2.5577291432997522e-03,
			-2.6387982693632807e-03,
			-2.5274762640141194e-03,
			-2.2510004567960896e-03,
			-1.8699254737553005e-03,
			-1.4627990304459074e-03,
			-1.1080893063260097e-03,
			-8.6744203333452400e-04,
			-7.7376662014384866e-04,
			-8.2635727901216656e-04,
			-9.9357826868135316e-04,
			-1.2219729859710637e-03,
			-1.4493561975615118e-03,
			-1.6187724217612007e-03,
			-1.6902522160703449e-03,
			-1.6480075080618820e-03,
			-1.5018735401090826e-03,
			-1.2831404037888989e-03,
			-1.0361182005923146e-03,
			-8.0759555645754327e-04,
			-6.3663386121581508e-04,
			-5.4686940852920413e-04,
			-5.4277523357803897e-04,
			-6.1035700575714949e-04,
			-7.2175694572381886e-04,
			-8.4243680789320959e-04,
			-9.3916478239745296e-04,
			-9.8700968544822277e-04,
			-9.7391805542609714e-04,
			-9.0210075583701556e-04,
			-7.8621869932349417e-04,
			-6.4905509995686088e-04,
			-5.1584657092470653e-04,
			-4.0862956128612563e-04,
			-3.4182841427859273e-04,
			-3.1992389949445831e-04,
			-3.3750551620492721e-04,
			-3.8145932023054988e-04,
			-4.3459912811279558e-04,
			-4.7980096272088148e-04,
			-5.0368485858856907e-04,
			-4.9908565647338837e-04,
			-4.6590026089899489e-04,
			-4.1030106015092717e-04,
			-3.4266813193156422e-04,
			-2.7483905489694477e-04,
			-2.1736124094121881e-04,
			-1.7735491639291114e-04,
			-1.5738968347686275e-04,


			};
		for(j=0;j<5;j++)
			{

			datamid=0.0;
			now_fir=i_fir_list;
			int i;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->data[j]*Fir[i];
				now_fir=now_fir->last;
				}

			i_fir_list->band_pass_data[j]=datamid;
			}

		if(PGV_type==1)
			{
			datamid=0.0;
			now_fir=i_fir_list;
			int i;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->dataV[4]*Fir[i];
				now_fir=now_fir->last;
				}
			i_fir_list->band_pass_dataV[4]=datamid;



			datamid=0.0;
			now_fir=i_fir_list;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->dataD[4]*Fir[i];
				now_fir=now_fir->last;
				}
			i_fir_list->band_pass_dataD[4]=datamid;

			}
		else if(PGV_type==2)
			{
				int j;
			for(j=0;j<3;j++)
				{


				datamid=0.0;
				now_fir=i_fir_list;
				int i;
				for(i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataV[j]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataV[j]=datamid;

				}
			i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
			for(int j=0;j<3;j++)
				{


				datamid=0.0;
				now_fir=i_fir_list;
				int i;
				for(i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataD[j]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataD[j]=datamid;
				}
			i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
			}

		if(*count==1)
			{
			i_fir_list->instant_PGA=i_fir_list->band_pass_data[j];
			i_fir_list->instant_PGV=i_fir_list->band_pass_dataV[j];
			i_fir_list->instant_PGD=i_fir_list->band_pass_dataD[j];
			*count+=1;
			}
		else
			{
			if(i_fir_list->band_pass_data[4]>i_fir_list->instant_PGA)
				{
				i_fir_list->instant_PGA=i_fir_list->band_pass_data[4];
				i_fir_list->utc_second_instant_PGA=i_fir_list->utc_second; //utc时间秒
				i_fir_list->utc_nanosecond_instant_PGA=i_fir_list->utc_nanosecond; //utc时间纳秒

				}
			if(i_fir_list->band_pass_dataV[4]>i_fir_list->instant_PGV)
				{
				i_fir_list->instant_PGV=i_fir_list->band_pass_dataV[4];
				i_fir_list->utc_second_instant_PGV=i_fir_list->utc_second; //utc时间秒
				i_fir_list->utc_nanosecond_instant_PGV=i_fir_list->utc_nanosecond; //utc时间纳秒
				}
			if(i_fir_list->band_pass_dataD[4]>i_fir_list->instant_PGD)
				{
				i_fir_list->instant_PGD=i_fir_list->band_pass_dataD[4];
				i_fir_list->utc_second_instant_PGD=i_fir_list->utc_second; //utc时间秒
				i_fir_list->utc_nanosecond_instant_PGD=i_fir_list->utc_nanosecond; //utc时间纳秒
				}
			if(*count==timespan*200)

				{
				*count=1;
				return 2;
				}
			else
				{


				*count+=1;
				}



			}


		return 1;
		}

	//double *Fir=new double[firLength];

	return 0;

	};








int steim2_20180726(FIR_LIST *i_fir_list,int *count,int *mincount,int *data ,int *semidata,int *semi_count,int *sample_Num,int *flag,int channel_num/*,int *flag_30_32*/)
	{
	//count 
	//int data[10]
	//count 前面已有的数据数
	//*mincount 前面所需的最小个数
	//*semidata semidata 数据
	//semi_count semi的个数
    //171192
	int countlimit[8];
	int xishu=17;
	int ss=0;
	if(*flag==1){
		data[*count]=(int)((i_fir_list->data[channel_num])*xishu);
		//data[*count]=0;
	}
	else{
data[*count]=(int)((i_fir_list->data[channel_num])*xishu)-(int)((i_fir_list->last->data[channel_num])*xishu);
	}
	
	countlimit[0]=6;
	countlimit[1]=5;
	countlimit[2]=4;
	countlimit[3]=3;
	countlimit[4]=2;
	countlimit[5]=1;
	countlimit[6]=0;
	countlimit[7]=0;
	if(*count==0)
		{
		*mincount=10;
		}
	if(*count==10000)
		{
		*count=0;
		}
	if(-8<data[*count]&&data[*count]<=7)
		{
		if(*mincount>countlimit[0])
			{
			*mincount=countlimit[0];
			}

		if(*count<*mincount)
			{

			(*count)++;
			}
		else if(*count==*mincount) 
			{
			//writesteim2(int count,int *data,int flag_32_30,int *semidata);
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
			writeCk(semidata,*semi_count,*count+1,2);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;

				}


			*count=0;
			}
		else//大于了已经存在的数
			{
			writesteim2(*count,data,2,&semidata[*semi_count],sample_Num); 
						writeCk(semidata,*semi_count,*count,2);
			//data[0]=data[*count];
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
				
				}
			else
				{
				(*semi_count)++;
				*mincount=6;
				data[0]=data[*count];
				*count=1;
				}


			}

		}
	else if((-16<data[*count]&&data[*count]<=-8)||(7<data[*count]&&data[*count]<=15))
		{
		if(*mincount>countlimit[1])
			{
			*mincount=countlimit[1];
			}


		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*count+1,data,2,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,2);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				}
			*count=0;
			}
		else
			{
			writesteim2(*count,data,2,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,2);
			//data[0]=data[*count];
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
				
				}
			else
				{
				(*semi_count)++;
				*mincount=5;
				data[0]=data[*count];
				*count=1;
				}	

			
			

			}

		}
	else if((-32<data[*count]&&data[*count]<=-16)||(15<data[*count]&&data[*count]<=31))
		{
		if(*mincount>countlimit[2])
			{
			*mincount=countlimit[2];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
					writesteim2(*count+1,data,2,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,2);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				}
			*count=0;
			}
		else
			{
			writesteim2(*count,data,2,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,2);
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
				
				}
			else
				{
				(*semi_count)++;
				*mincount=4;
				data[0]=data[*count];
				*count=1;
				}	

			}

		}
	else if((-128<data[*count]&&data[*count]<=-32)||(31<data[*count]&&data[*count]<=127))
		{
		if(*mincount>countlimit[3])
			{
			*mincount=countlimit[3];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*mincount+1,data,2,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,2);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				
				}
			else
				{
				(*semi_count)++;
				}	
			*count=0;
			}
		else
			{
			writesteim2(*count,data,2,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,2);
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				*mincount=3;
				data[0]=data[*count];
				*count=1;
				}	

			}


		}
	else if((-512<data[*count]&&data[*count]<=-128)||(127<data[*count]&&data[*count]<=511))
		{
		if(*mincount>countlimit[4])
			{
			*mincount=countlimit[4];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*count+1,data,2,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,2);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				
				}
			else
				{
				(*semi_count)++;
				}	
			*count=0;
			}
		else
			{
			writesteim2(*count,data,2,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,2);
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				*mincount=2;
				data[0]=data[*count];
				*count=1;
				}	
	
			

			}


		}
	else if(-16384<data[*count]&&data[*count]<=-512||(511<data[*count]&&data[*count]<=16383))
		{
		if(*mincount>countlimit[5])
			{
			*mincount=countlimit[5];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*count+1,data,2,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,2);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				}	
			*count=0;
			}
		else
			{
			writesteim2(*count,data,2,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,2);
			if(*semi_count==47)
				{
				ss=31;///////////////////////////////////////////////////////////这里面有很复杂的逻辑///////////////真是见了鬼了
				*semi_count=0;
			
				}
			else
				{
				(*semi_count)++;
				data[0]=data[*count];
				*count=1;
				*mincount=1;
				}	

			}


		}
	else if((-536870912<data[*count]&&data[*count]<=-16384)||(16383<data[*count]&&data[*count]<=536870911))
		{
		if(*mincount>countlimit[6])
			{
			*mincount=countlimit[6];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*mincount+1,data,2,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,2);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				*mincount=0;
				}	
			*count=0;
			}
		else
			{
			writesteim2(*count,data,2,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,2);
						/**flag_30_32=1;*/
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
	/*			*mincount=0;*/
				}
			else
				{
				(*semi_count)++;
				data[0]=data[*count];
				*count=1;
				*mincount=0;
				}	

			//writesteim2(1,data,1,semidata);
			//if(*semi_count==47)
			//	{
			//	ss=3;
			//	*semi_count=0;
			//	}
			//else
			//	{
			//	(*semi_count)++;
			//	}	

			}


		}
	else if((-2147483648<data[*count]&&data[*count]<=-536870912)||(536870911<data[*count]&&data[*count]<=2147483647))
		{
		if(*mincount>countlimit[7])
			{
			*mincount=countlimit[7];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			//int writesteim2(int count,*int data,int flag_32_30,int *semidata)
			writesteim2(*mincount+1,data,2,&semidata[*semi_count],sample_Num);

						writeCk(semidata,*semi_count,*count+1,2);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				//*mincount=0;
				}
			else
				{
				(*semi_count)++;
				*semi_count=0;
				}	
			*count=0;
			}
		else
			{

			writesteim2(*count,data,2,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,2);
						/**flag_30_32=2;*/
			if(*semi_count==47)
				{
				ss=31;
	/*			*semi_count=0;*/
				}
			else
				{
				(*semi_count)++;
				data[0]=data[*count];
				*count=1;
				*semi_count=0;
			}






			//	{
			//	(*semi_count)++;
			//	}	
			//data[0]=data[*count];
			//writesteim2(1,data,2,semidata);
			//if(*semi_count==47)
			//	{
			//	ss=31;
			//	*semi_count=0;
			//	}
			//else
			//	{
			//	(*semi_count)++;
			//	}	
			//*count=0;
			}


		}

	return ss;
	}

int steim2_20180807(FIR_LIST *i_fir_list,int *count,int *mincount,int *data ,int *semidata,int *semi_count,int *sample_Num,int *flag,int channel_num/*,int *flag_30_32*/)
	{
	//count 
	//int data[10]
	//count 前面已有的数据数
	//*mincount 前面所需的最小个数
	//*semidata semidata 数据
	//semi_count semi的个数
	if(*count<0)
		{
		*count=*count;
		}
	int countlimit[8];
	int xishu=app.xishu_globe;
	int ss=0;


	if(*flag==1)
		{
			data[*count]=(int)((i_fir_list->data[channel_num])*xishu);
		}
	else
		{

		
			data[*count]=(int)((i_fir_list->data[channel_num])*xishu)-(int)((i_fir_list->last->data[channel_num])*xishu);
		}
	countlimit[0]=6;
	countlimit[1]=5;
	countlimit[2]=4;
	countlimit[3]=3;
	countlimit[4]=2;
	countlimit[5]=1;
	countlimit[6]=0;
	countlimit[7]=0;
	if(*count==0)
		{
		*mincount=10;
		}
	if(*count==10000)
		{
		*count=0;
		}
	if(-8<data[*count]&&data[*count]<=7)
		{
		if(*mincount>countlimit[0])
			{
			*mincount=countlimit[0];
			}

		if(*count<*mincount)
			{

			(*count)++;
			}
		else if(*count==*mincount) 
			{
			//writesteim2(int count,int *data,int flag_32_30,int *semidata);
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
			writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;

				}


			*count=0;
			}
		else//大于了已经存在的数
			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num); 
						writeCk(semidata,*semi_count,*count,1);
			//data[0]=data[*count];
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
				*mincount=6;
				data[0]=data[*count];
				*count=1;
				}
			else
				{
				(*semi_count)++;
				*mincount=6;
				data[0]=data[*count];
				*count=1;
				}


			}

		}
	else if((-16<data[*count]&&data[*count]<=-8)||(7<data[*count]&&data[*count]<=15))
		{
		if(*mincount>countlimit[1])
			{
			*mincount=countlimit[1];
			}


		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				}
			*count=0;
			}
		else
			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
			//data[0]=data[*count];
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
				*mincount=5;
				data[0]=data[*count];
				*count=1;
				}
			else
				{
				(*semi_count)++;
				*mincount=5;
				data[0]=data[*count];
				*count=1;
				}	

			
			

			}

		}
	else if((-32<data[*count]&&data[*count]<=-16)||(15<data[*count]&&data[*count]<=31))
		{
		if(*mincount>countlimit[2])
			{
			*mincount=countlimit[2];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{


			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
			writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				}
			*count=0;
			}
		else
			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
				*mincount=4;
				data[0]=data[*count];
				*count=1;
				}
			else
				{
				(*semi_count)++;
				*mincount=4;
				data[0]=data[*count];
				*count=1;
				}	

			}

		}
	else if((-128<data[*count]&&data[*count]<=-32)||(31<data[*count]&&data[*count]<=127))
		{
		if(*mincount>countlimit[3])
			{
			*mincount=countlimit[3];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				
				}
			else
				{
				(*semi_count)++;
				}	
			*count=0;
			}
		else
			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
				*mincount=3;
				data[0]=data[*count];
				*count=1;
				}
			else
				{
				(*semi_count)++;
				*mincount=3;
				data[0]=data[*count];
				*count=1;
				}	

			}


		}
	else if((-512<data[*count]&&data[*count]<=-128)||(127<data[*count]&&data[*count]<=511))
		{
		if(*mincount>countlimit[4])
			{
			*mincount=countlimit[4];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				
				}
			else
				{
				(*semi_count)++;
				}	
			*count=0;
			}
		else
			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
				*mincount=2;
				data[0]=data[*count];
				*count=1;
				}
			else
				{
				(*semi_count)++;
				*mincount=2;
				data[0]=data[*count];
				*count=1;
				}	
	
			

			}


		}
	else if(-16384<data[*count]&&data[*count]<=-512||(511<data[*count]&&data[*count]<=16383))
		{
		if(*mincount>countlimit[5])
			{
			*mincount=countlimit[5];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				}	
			*count=0;
			}
		else
			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
			if(*semi_count==47)
				{
				ss=31;///////////////////////////////////////////////////////////这里面有很复杂的逻辑///////////////真是见了鬼了
				*semi_count=0;
				data[0]=data[*count];
				*count=1;
				*mincount=1;
				}
			else
				{
				(*semi_count)++;
				data[0]=data[*count];
				*count=1;
				*mincount=1;
				}	

			}


		}
	else if((-536870912<data[*count]&&data[*count]<=-16384)||(16383<data[*count]&&data[*count]<=536870911))
		{
		if(*mincount>countlimit[6])
			{
			*mincount=countlimit[6];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				*mincount=0;
				}	
			*count=0;
			}
		else

			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
						/**flag_30_32=1;*/
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;				
				data[0]=data[*count];
				*count=1;
				*mincount=0;

	/*			*mincount=0;*/
				}
			else
				{
				(*semi_count)++;
				data[0]=data[*count];
				*count=1;
				*mincount=0;
				}	

			//writesteim2(1,data,1,semidata);
			//if(*semi_count==47)
			//	{
			//	ss=3;
			//	*semi_count=0;
			//	}
			//else
			//	{
			//	(*semi_count)++;
			//	}	

			}


		}
	else if((-2147483648<data[*count]&&data[*count]<=-536870912)||(536870911<data[*count]&&data[*count]<=2147483647))
		{
		if(*mincount>countlimit[7])
			{
			*mincount=countlimit[7];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			//int writesteim2(int count,*int data,int flag_32_30,int *semidata)
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);

						writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				//*mincount=0;
				}
			else
				{
				(*semi_count)++;
				*mincount=0;
				}	
			*count=0;
			}
		else
			{

			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
						/**flag_30_32=2;*/
			if(*semi_count==47)
				{
				ss=31;
	/*			*semi_count=0;*/
				data[0]=data[*count];
				*count=1;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				data[0]=data[*count];
				*count=1;
				*mincount=0;
			}






			//	{
			//	(*semi_count)++;
			//	}	
			//data[0]=data[*count];
			//writesteim2(1,data,2,semidata);
			//if(*semi_count==47)
			//	{
			//	ss=31;
			//	*semi_count=0;
			//	}
			//else
			//	{
			//	(*semi_count)++;
			//	}	
			//*count=0;
			}


		}

	return ss;
	}
int steim2out_20180807(FIR_LIST *i_fir_list,int *count,int *mincount,int *data ,int *semidata,int *semi_count,int *out,int *sample_num,int channel_num,int *flag/*,int *flag_30_32*/)
	{
	//*semi_count 一个数据包的总个数
	//*semidata 数据包里的每个32位空间
	//*data 整形化的数据
	//*i_fir_list 原始的数据指针
	int xishu=app.xishu_globe;
	int kkkk;
	if(*semi_count==0)
		{
		int ijk;
		for(ijk=0;ijk<48;ijk++)
			{
			semidata[ijk]=0;
			}
		
		semidata[1]=i_fir_list->data[channel_num]*xishu;
		*semi_count=*semi_count+3;
		semidata[0]=0;

		*flag=1;
		kkkk=steim2(i_fir_list,count,mincount,data ,semidata,semi_count,sample_num,flag,channel_num/*,flag_30_32*/);
		*flag=0;
				*sample_num=(*sample_num)+1;
		//utc_time[0]=i_fir_list->utc_second;
		//utc_time[1]=i_fir_list->utc_nanosecond;

		}

	else

		{
			 if(*semi_count==16)
				{
				semidata[16]=0;
				(*semi_count)++;
				}
			else if(*semi_count==32)
				{
				semidata[32]=0;
				(*semi_count)++;
				}
		kkkk=steim2(i_fir_list,count,mincount,data ,semidata,semi_count,sample_num,flag,channel_num/*,flag_30_32*/);
		kkkk=kkkk;
		if(kkkk==3)
			{
			semidata[2]=i_fir_list->data[channel_num]*xishu;
			int opp;
			for(opp=0;opp<48;opp++)
				{
				out[opp]=semidata[opp];
				}
			*count=0;
			return 3;
			}
		if(kkkk==31)//31 
			{
			semidata[2]=(i_fir_list->last->data[channel_num])*xishu;
			/////////////////////////////////////////////////////////////////////////////////////////先输出//////////////////////////////////////////////////////////////////////////////////
			//utc_time1[0]=i_fir_list->utc_second;
			//utc_time1[1]=i_fir_list->utc_nanosecond;
			*flag=1;
			int opp;
			for(opp=0;opp<48;opp++)
				{
				out[opp]=semidata[opp];
				}



			int ijk;
			for(ijk=0;ijk<48;ijk++)
				{
				semidata[ijk]=0;
				}

			semidata[1]=i_fir_list->data[channel_num]*xishu;
			*semi_count=/**semi_count+*/3;




			semidata[0]=0;
			*mincount=10;
			*count=0;

			kkkk=steim2(i_fir_list,count,mincount,data ,semidata,semi_count,sample_num,flag,channel_num/*,flag_30_32*/);
			*flag=0;

			return 31;
			}
		}

	return 1;

	}









int steim2(FIR_LIST *i_fir_list,int *count,int *mincount,int *data ,int *semidata,int *semi_count,int *sample_Num,int *flag,int channel_num/*,int *flag_30_32*/)
	{
	//count 
	//int data[10]
	//count 前面已有的数据数
	//*mincount 前面所需的最小个数
	//*semidata semidata 数据
	//semi_count semi的个数
	if(*count<0)
		{
		*count=*count;
		}
	int countlimit[8];
	int xishu=app.xishu_globe;
	int ss=0;


	if(*flag==1)
		{
			data[*count]=(int)((i_fir_list->data[channel_num])*xishu);
		}
	else
		{

		
			data[*count]=(int)((i_fir_list->data[channel_num])*xishu)-(int)((i_fir_list->last->data[channel_num])*xishu);
		}
	countlimit[0]=6;
	countlimit[1]=5;
	countlimit[2]=4;
	countlimit[3]=3;
	countlimit[4]=2;
	countlimit[5]=1;
	countlimit[6]=0;
	countlimit[7]=0;
	if(*count==0)
		{
		*mincount=10;
		}
	if(*count==10000)
		{
		*count=0;
		}
	if(-8<data[*count]&&data[*count]<=7)
		{
		if(*mincount>countlimit[0])
			{
			*mincount=countlimit[0];
			}

		if(*count<*mincount)
			{

			(*count)++;
			}
		else if(*count==*mincount) 
			{
			//writesteim2(int count,int *data,int flag_32_30,int *semidata);
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
			writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;

				}


			*count=0;
			}
		else//大于了已经存在的数
			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num); 
						writeCk(semidata,*semi_count,*count,1);
			//data[0]=data[*count];
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
				*mincount=6;
				data[0]=data[*count];
				*count=1;
				}
			else
				{
				(*semi_count)++;
				*mincount=6;
				data[0]=data[*count];
				*count=1;
				}


			}

		}
	else if((-16<data[*count]&&data[*count]<=-8)||(7<data[*count]&&data[*count]<=15))
		{
		if(*mincount>countlimit[1])
			{
			*mincount=countlimit[1];
			}


		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				}
			*count=0;
			}
		else
			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
			//data[0]=data[*count];
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
				*mincount=5;
				data[0]=data[*count];
				*count=1;
				}
			else
				{
				(*semi_count)++;
				*mincount=5;
				data[0]=data[*count];
				*count=1;
				}	

			
			

			}

		}
	else if((-32<data[*count]&&data[*count]<=-16)||(15<data[*count]&&data[*count]<=31))
		{
		if(*mincount>countlimit[2])
			{
			*mincount=countlimit[2];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{


			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
			writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				}
			*count=0;
			}
		else
			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
				*mincount=4;
				data[0]=data[*count];
				*count=1;
				}
			else
				{
				(*semi_count)++;
				*mincount=4;
				data[0]=data[*count];
				*count=1;
				}	

			}

		}
	else if((-128<data[*count]&&data[*count]<=-32)||(31<data[*count]&&data[*count]<=127))
		{
		if(*mincount>countlimit[3])
			{
			*mincount=countlimit[3];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				
				}
			else
				{
				(*semi_count)++;
				}	
			*count=0;
			}
		else
			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
				*mincount=3;
				data[0]=data[*count];
				*count=1;
				}
			else
				{
				(*semi_count)++;
				*mincount=3;
				data[0]=data[*count];
				*count=1;
				}	

			}


		}
	else if((-512<data[*count]&&data[*count]<=-128)||(127<data[*count]&&data[*count]<=511))
		{
		if(*mincount>countlimit[4])
			{
			*mincount=countlimit[4];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				
				}
			else
				{
				(*semi_count)++;
				}	
			*count=0;
			}
		else
			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
			if(*semi_count==47)
				{



				ss=31;
				*semi_count=0;
				*mincount=2;
				data[0]=data[*count];
				*count=1;
				}
			else
				{
				(*semi_count)++;
				*mincount=2;
				data[0]=data[*count];
				*count=1;
				}	
	
			

			}


		}
	else if(-16384<data[*count]&&data[*count]<=-512||(511<data[*count]&&data[*count]<=16383))
		{
		if(*mincount>countlimit[5])
			{
			*mincount=countlimit[5];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				}	
			*count=0;
			}
		else
			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
			if(*semi_count==47)
				{
				ss=31;///////////////////////////////////////////////////////////这里面有很复杂的逻辑///////////////真是见了鬼了
				*semi_count=0;
				data[0]=data[*count];
				*count=1;
				*mincount=1;
				}
			else
				{
				(*semi_count)++;
				*mincount=1;
				data[0]=data[*count];
				*count=1;
				
				}	

			}


		}
	else if((-536870912<data[*count]&&data[*count]<=-16384)||(16383<data[*count]&&data[*count]<=536870911))
		{
		if(*mincount>countlimit[6])
			{
			*mincount=countlimit[6];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				
				}	
			*count=0;
			}
		else

			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
						/**flag_30_32=1;*/
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;				
				data[0]=data[*count];
				*count=1;
				*mincount=0;

	/*			*mincount=0;*/
				}
			else
				{
				(*semi_count)++;
				data[0]=data[*count];
				*count=1;
				*mincount=0;
				}	

			//writesteim2(1,data,1,semidata);
			//if(*semi_count==47)
			//	{
			//	ss=3;
			//	*semi_count=0;
			//	}
			//else
			//	{
			//	(*semi_count)++;
			//	}	

			}


		}
	else if((-2147483648<data[*count]&&data[*count]<=-536870912)||(536870911<data[*count]&&data[*count]<=2147483647))
		{
		if(*mincount>countlimit[7])
			{
			*mincount=countlimit[7];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			//int writesteim2(int count,*int data,int flag_32_30,int *semidata)
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);

						writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				//*mincount=0;
				}
			else
				{
				(*semi_count)++;
				
				}	
			*count=0;
			}
		else
			{

			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
						/**flag_30_32=2;*/
			if(*semi_count==47)
				{
				ss=31;
	/*			*semi_count=0;*/
				data[0]=data[*count];
				*count=1;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				data[0]=data[*count];
				*count=1;
				*mincount=0;
			}






			//	{
			//	(*semi_count)++;
			//	}	
			//data[0]=data[*count];
			//writesteim2(1,data,2,semidata);
			//if(*semi_count==47)
			//	{
			//	ss=31;
			//	*semi_count=0;
			//	}
			//else
			//	{
			//	(*semi_count)++;
			//	}	
			//*count=0;
			}


		}

	return ss;
	}
int steim2out(FIR_LIST *i_fir_list,int *count,int *mincount,int *data ,int *semidata,int *semi_count,int *out,int *sample_num,int channel_num,int *flag/*,int *flag_30_32*/)
	{
	int aa=0;
	//*semi_count 一个数据包的总个数
	//*semidata 数据包里的每个32位空间
	//*data 整形化的数据
	//*i_fir_list 原始的数据指针
	int xishu=app.xishu_globe;
	int kkkk;
	if(*semi_count==0)
		{
		int ijk;
		for(ijk=0;ijk<48;ijk++)
			{
			semidata[ijk]=0;
			}
		
		semidata[1]=i_fir_list->data[channel_num]*xishu;
		*semi_count=*semi_count+3;
		semidata[0]=0;

		*flag=1;
		kkkk=steim2(i_fir_list,count,mincount,data ,semidata,semi_count,sample_num,flag,channel_num/*,flag_30_32*/);
		*flag=0;
				//*sample_num=(*sample_num);
		//utc_time[0]=i_fir_list->utc_second;
		//utc_time[1]=i_fir_list->utc_nanosecond;

		}

	else

		{
			 if(*semi_count==16)
				{
				semidata[16]=0;
				(*semi_count)++;
				}
			else if(*semi_count==32)
				{
				semidata[32]=0;
				(*semi_count)++;
				}
		kkkk=steim2(i_fir_list,count,mincount,data ,semidata,semi_count,sample_num,flag,channel_num/*,flag_30_32*/);
		//kkkk=kkkk;
		if(kkkk==3)
			{
			semidata[2]=i_fir_list->data[channel_num]*xishu;
			int opp;
			for(opp=0;opp<48;opp++)
				{
				out[opp]=semidata[opp];
				}
			*count=0;
			return 3;
			}
		if(kkkk==31)//31 
			{
			semidata[2]=(i_fir_list->last->data[channel_num])*xishu;
			/////////////////////////////////////////////////////////////////////////////////////////先输出//////////////////////////////////////////////////////////////////////////////////
			//utc_time1[0]=i_fir_list->utc_second;
			//utc_time1[1]=i_fir_list->utc_nanosecond;
			
			int opp;
			for(opp=0;opp<48;opp++)
				{
				out[opp]=semidata[opp];
				}



			int ijk;
			for(ijk=0;ijk<48;ijk++)
				{
				semidata[ijk]=0;
				}

			semidata[1]=i_fir_list->data[channel_num]*xishu;
			*semi_count=/**semi_count+*/3;

			semidata[0]=0;
			*mincount=10;
			*count=0;
			*flag=1;
			kkkk=steim2(i_fir_list,count,mincount,data ,semidata,semi_count,&aa,flag,channel_num/*,flag_30_32*/);
			*flag=0;
			if (aa==0)
				return 311;
			return 31;
			}
		}

	return 1;

	}





//int steim2(FIR_LIST *i_fir_list,int *count,int *mincount,int *data ,int *semidata,int *semi_count,int *sample_Num,int *flag,int channel_num/*,int *flag_30_32*/)
int steim2_0803(FIR_LIST *i_fir_list,int *count,int *mincount,int *data ,int *semidata,int *semi_count,int *sample_Num,int *flag,int channel_num/*,int *flag_30_32*/)
	{
	//count 
	//int data[10]
	//count 前面已有的数据数
	//*mincount 前面所需的最小个数
	//*semidata semidata 数据
	//semi_count semi的个数
	if(*count<0)
		{
		*count=*count;
		}
	int countlimit[8];
	double xishu=app.xishu_globe;
	int ss=0;


	if(*flag==1)
		{
			data[*count]=(int)((i_fir_list->data[channel_num])*xishu);
		}
	else
		{

		
			data[*count]=(int)((i_fir_list->data[channel_num])*xishu)-(int)((i_fir_list->last->data[channel_num])*xishu);
		}
	countlimit[0]=6;
	countlimit[1]=5;
	countlimit[2]=4;
	countlimit[3]=3;
	countlimit[4]=2;
	countlimit[5]=1;
	countlimit[6]=0;
	countlimit[7]=0;
	if(*count==0)
		{
		*mincount=10;
		}
	if(*count==10000)
		{
		*count=0;
		}
	if(-8<data[*count]&&data[*count]<=7)
		{
		if(*mincount>countlimit[0])
			{
			*mincount=countlimit[0];
			}

		if(*count<*mincount)
			{

			(*count)++;
			}
		else if(*count==*mincount) 
			{
			//writesteim2(int count,int *data,int flag_32_30,int *semidata);
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
			writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;

				}


			*count=0;
			}
		else//大于了已经存在的数
			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num); 
						writeCk(semidata,*semi_count,*count,1);
			//data[0]=data[*count];
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
				*mincount=6;
				data[0]=data[*count];
				*count=1;
				}
			else
				{
				(*semi_count)++;
				*mincount=6;
				data[0]=data[*count];
				*count=1;
				}


			}

		}
	else if((-16<data[*count]&&data[*count]<=-8)||(7<data[*count]&&data[*count]<=15))
		{
		if(*mincount>countlimit[1])
			{
			*mincount=countlimit[1];
			}


		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				}
			*count=0;
			}
		else
			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
			//data[0]=data[*count];
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
				*mincount=5;
				data[0]=data[*count];
				*count=1;
				}
			else
				{
				(*semi_count)++;
				*mincount=5;
				data[0]=data[*count];
				*count=1;
				}	

			
			

			}

		}
	else if((-32<data[*count]&&data[*count]<=-16)||(15<data[*count]&&data[*count]<=31))
		{
		if(*mincount>countlimit[2])
			{
			*mincount=countlimit[2];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{


			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
			writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				}
			*count=0;
			}
		else
			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
				*mincount=4;
				data[0]=data[*count];
				*count=1;
				}
			else
				{
				(*semi_count)++;
				*mincount=4;
				data[0]=data[*count];
				*count=1;
				}	

			}

		}
	else if((-128<data[*count]&&data[*count]<=-32)||(31<data[*count]&&data[*count]<=127))
		{
		if(*mincount>countlimit[3])
			{
			*mincount=countlimit[3];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				
				}
			else
				{
				(*semi_count)++;
				}	
			*count=0;
			}
		else
			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
				*mincount=3;
				data[0]=data[*count];
				*count=1;
				}
			else
				{
				(*semi_count)++;
				*mincount=3;
				data[0]=data[*count];
				*count=1;
				}	

			}


		}
	else if((-512<data[*count]&&data[*count]<=-128)||(127<data[*count]&&data[*count]<=511))
		{
		if(*mincount>countlimit[4])
			{
			*mincount=countlimit[4];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				
				}
			else
				{
				(*semi_count)++;
				}	
			*count=0;
			}
		else
			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;
				*mincount=2;
				data[0]=data[*count];
				*count=1;
				}
			else
				{
				(*semi_count)++;
				*mincount=2;
				data[0]=data[*count];
				*count=1;
				}	
	
			

			}


		}
	else if(-16384<data[*count]&&data[*count]<=-512||(511<data[*count]&&data[*count]<=16383))
		{
		if(*mincount>countlimit[5])
			{
			*mincount=countlimit[5];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				}	
			*count=0;
			}
		else
			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
			if(*semi_count==47)
				{
				ss=31;///////////////////////////////////////////////////////////这里面有很复杂的逻辑///////////////真是见了鬼了
				*semi_count=0;
				data[0]=data[*count];
				*count=1;
				*mincount=1;
				}
			else
				{
				(*semi_count)++;
				data[0]=data[*count];
				*count=1;
				*mincount=1;
				}	

			}


		}
	else if((-536870912<data[*count]&&data[*count]<=-16384)||(16383<data[*count]&&data[*count]<=536870911))
		{
		if(*mincount>countlimit[6])
			{
			*mincount=countlimit[6];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				*mincount=0;
				}	
			*count=0;
			}
		else














			{
			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
						/**flag_30_32=1;*/
			if(*semi_count==47)
				{
				ss=31;
				*semi_count=0;				
				data[0]=data[*count];
				*count=1;
				*mincount=0;

	/*			*mincount=0;*/
				}
			else
				{
				(*semi_count)++;
				data[0]=data[*count];
				*count=1;
				*mincount=0;
				}	

			//writesteim2(1,data,1,semidata);
			//if(*semi_count==47)
			//	{
			//	ss=3;
			//	*semi_count=0;
			//	}
			//else
			//	{
			//	(*semi_count)++;
			//	}	

			}


		}
	else if((-2147483648<data[*count]&&data[*count]<=-536870912)||(536870911<data[*count]&&data[*count]<=2147483647))
		{
		if(*mincount>countlimit[7])
			{
			*mincount=countlimit[7];
			}
		if(*count<*mincount)
			{
			(*count)++;
			}
		else if(*count==*mincount)
			{
			//int writesteim2(int count,*int data,int flag_32_30,int *semidata)
			writesteim2(*count+1,data,1,&semidata[*semi_count],sample_Num);

						writeCk(semidata,*semi_count,*count+1,1);
			if(*semi_count==47)
				{
				ss=3;
				*semi_count=0;
				//*mincount=0;
				}
			else
				{
				(*semi_count)++;
				*mincount=0;
				}	
			*count=0;
			}
		else
			{

			writesteim2(*count,data,1,&semidata[*semi_count],sample_Num);
						writeCk(semidata,*semi_count,*count,1);
						/**flag_30_32=2;*/
			if(*semi_count==47)
				{
				ss=31;
	/*			*semi_count=0;*/
				data[0]=data[*count];
				*count=1;
				*semi_count=0;
				}
			else
				{
				(*semi_count)++;
				data[0]=data[*count];
				*count=1;
				*mincount=0;
			}






			//	{
			//	(*semi_count)++;
			//	}	
			//data[0]=data[*count];
			//writesteim2(1,data,2,semidata);
			//if(*semi_count==47)
			//	{
			//	ss=31;
			//	*semi_count=0;
			//	}
			//else
			//	{
			//	(*semi_count)++;
			//	}	
			//*count=0;
			}


		}

	return ss;
	}



int steim2out_0803(FIR_LIST *i_fir_list,int *count,int *mincount,int *data ,int *semidata,int *semi_count,int *out,int *sample_num,int channel_num,int *flag/*,int *flag_30_32*/)
	{
	//*semi_count 一个数据包的总个数
	//*semidata 数据包里的每个32位空间
	//*data 整形化的数据
	//*i_fir_list 原始的数据指针
	double xishu=app.xishu_globe;
	int kkkk;
	if(*semi_count==0)
		{
		int ijk;
		for(ijk=0;ijk<48;ijk++)
			{
			semidata[ijk]=0;
			}
		
		semidata[1]=i_fir_list->data[channel_num]*xishu;
		*semi_count=*semi_count+3;
		semidata[0]=0;

		*flag=1;
		kkkk=steim2(i_fir_list,count,mincount,data ,semidata,semi_count,sample_num,flag,channel_num/*,flag_30_32*/);
		*flag=0;
				*sample_num=(*sample_num)+1;
		//utc_time[0]=i_fir_list->utc_second;
		//utc_time[1]=i_fir_list->utc_nanosecond;

		}

	else

		{
			 if(*semi_count==16)
				{
				semidata[16]=0;
				(*semi_count)++;
				}
			else if(*semi_count==32)
				{
				semidata[32]=0;
				(*semi_count)++;
				}
		kkkk=steim2(i_fir_list,count,mincount,data ,semidata,semi_count,sample_num,flag,channel_num/*,flag_30_32*/);
		kkkk=kkkk;
		if(kkkk==3)
			{
			semidata[2]=i_fir_list->data[channel_num]*xishu;
			int opp;
			for(opp=0;opp<48;opp++)
				{
				out[opp]=semidata[opp];
				}
			*count=0;
			return 3;
			}
		if(kkkk==31)//31 
			{
			semidata[2]=(i_fir_list->last->data[channel_num])*xishu;
			/////////////////////////////////////////////////////////////////////////////////////////先输出//////////////////////////////////////////////////////////////////////////////////
			//utc_time1[0]=i_fir_list->utc_second;
			//utc_time1[1]=i_fir_list->utc_nanosecond;
			//*flag=1;
			int opp;
			for(opp=0;opp<48;opp++)
				{
				out[opp]=semidata[opp];
				}



			int ijk;
			for(ijk=0;ijk<48;ijk++)
				{
				semidata[ijk]=0;
				}

			semidata[1]=xishu*i_fir_list->data[channel_num];
			*semi_count=/**semi_count+*/3;




			semidata[0]=0;
			//*mincount=10;
			//*count=0;

			//kkkk=steim2(i_fir_list,count,mincount,data ,semidata,semi_count,sample_num,flag,channel_num/*,flag_30_32*/);
			//*flag=0;
			/**sample_num=1;*/
			return 31;
			}
		}

	return 1;

	}






















int steim2out_20180726(FIR_LIST *i_fir_list,int *count,int *mincount,int *data ,int *semidata,int *semi_count,int *out,int *sample_num,int channel_num,int *flag/*,int *flag_30_32*/)
	{
	//*semi_count 一个数据包的总个数
	//*semidata 数据包里的每个32位空间
	//*data 整形化的数据
	//*i_fir_list 原始的数据指针
	int xishu=17;
	int kkkk;
	if(*semi_count==0)
		{
			//if(channel_num==0)
			//printf("%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n");
		int ijk;
		for(ijk=0;ijk<48;ijk++)
			{
			semidata[ijk]=0;
			}
		
		semidata[1]=(int)(i_fir_list->data[channel_num]*xishu);
		*semi_count=*semi_count+3;
		semidata[0]=0;


		*flag=1;
		kkkk=steim2(i_fir_list,count,mincount,data ,semidata,semi_count,sample_num,flag,channel_num/*,flag_30_32*/);
		*flag=0;
				*sample_num=(*sample_num)+1;
		//utc_time[0]=i_fir_list->utc_second;
		//utc_time[1]=i_fir_list->utc_nanosecond;

		}

	else

		{
			 if(*semi_count==16)
				{
				semidata[16]=0;
				(*semi_count)++;
				}
			else if(*semi_count==32)
				{
				semidata[32]=0;
				(*semi_count)++;
				}
		kkkk=steim2(i_fir_list,count,mincount,data ,semidata,semi_count,sample_num,flag,channel_num/*,flag_30_32*/);
		kkkk=kkkk;
		if(kkkk==3)
			{
			semidata[2]=(int)(i_fir_list->data[channel_num]*xishu);
			int opp;
			for(opp=0;opp<48;opp++)
				{
				out[opp]=semidata[opp];
				}
			*count=0;
			return 3;
			}
		if(kkkk==31)//31 
			{
			semidata[2]=(int)((i_fir_list->last->data[channel_num])*xishu);
			/////////////////////////////////////////////////////////////////////////////////////////先输出//////////////////////////////////////////////////////////////////////////////////
			//utc_time1[0]=i_fir_list->utc_second;
			//utc_time1[1]=i_fir_list->utc_nanosecond;
          //  *flag=1;
			int opp;
			for(opp=0;opp<48;opp++)
				{
				out[opp]=semidata[opp];
				}



			int ijk;
			for(ijk=0;ijk<48;ijk++)
				{
				semidata[ijk]=0;
				}

			semidata[1]=i_fir_list->data[channel_num];
			*semi_count=/**semi_count+*/3;
			semidata[0]=0;
			//*mincount=10;
			//*count=0;
		//	kkkk=steim2(i_fir_list,count,mincount,data ,semidata,semi_count,sample_num,flag,channel_num/*,flag_30_32*/);
		//	*flag=0;
			/**sample_num=1;*/
			return 31;
			}
		}

	return 1;

	}


int writesteim2_20180807(int count,int *data,int flag_32_30,int *semidata,int *sample_Num)
	{
	// data 差分的数据
	// semidata 需要填入的一个32位的steim2 格式数据
	// semidata_num 表示第几个semi
	//flag_32_30 30:1 32:2
	int i;
	int ggtt=0;
	//int ggaa=0;
	//int b=7;
	if(count==7)
		{
		*semidata=0;
		
		int b=7;
		int c=8;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{

				ggtt=ggtt|c;
				}
			ggtt=ggtt&data[i];
			ggtt=ggtt<<(4*(count-1-i));

			*semidata=*semidata+ggtt;

			//b=b*16;
			//c=c*16;
			}

				
		*semidata=*semidata|(2<<30);

		*sample_Num=(*sample_Num)+7;
		}
	else if(count==6)
		{
		*semidata=0;
		int b=15;
		int c=16;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{
				ggtt=ggtt|c;
				}
			ggtt=ggtt&data[i];
			ggtt=ggtt<<((count-1-i)*5);

			*semidata=*semidata+ggtt;
			//b=b*32;
			//c=c*32;
			}
			*semidata=*semidata|(1<<30);
			*sample_Num=(*sample_Num)+6;
		}
	else if(count==5)
		{
		*semidata=0;
		int b=31;
		int c=32;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{
				ggtt=ggtt|c;
				}
			ggtt=ggtt&data[i];
			ggtt=ggtt<<((count-1-i)*6);

			*semidata=*semidata+ggtt;

			//b=b*64;
			//c=c*64;
			}
		*semidata=*semidata|(0<<30);
		*sample_Num=(*sample_Num)+5;
		//'00'
		}
	else if(count==4)
		{
		*semidata=0;
		int b=127;
		int c=128;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=data[i]|b;
			if(data[i]<0)
				{
			ggtt=ggtt|c;
				}
			ggtt=ggtt&data[i];
			ggtt=ggtt<<((count-1-i)*8);

			*semidata=*semidata+ggtt;
			//b=b*256;
			//c=c*256;
			}
		//*semidata=*semidata|(0<<30);
		*sample_Num=(*sample_Num)+4;
		}
	else if(count==3)
		{
		*semidata=0;
		int b=511;
		int c=512;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{
				ggtt=ggtt|c;
				}
			ggtt=ggtt&data[i];
			ggtt=ggtt<<((count-1-i)*10);

			*semidata=*semidata+ggtt;
			}
		*semidata=*semidata|(3<<30);
		*sample_Num=(*sample_Num)+3;
		}
	else if(count==2)
		{
		*semidata=0;
		int b=16383;
		int c=16384;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{
				ggtt=ggtt|c;
				}
			ggtt=ggtt&data[i];
			ggtt=ggtt<<((count-1-i)*15);

			*semidata=*semidata+ggtt;
	/*		*semidata=*semidata|ggtt;*/

			//b=b*32768;
			//c=c*32768;
			}
		    *sample_Num=(*sample_Num)+2;
			*semidata=*semidata|(2<<30);
		}
	else if(count==1)
		{
		if(flag_32_30==1)   //30位
			{
			*semidata=0;
			int b=536870911;
			int c=536870912;
			//for(i=0;i<count;i++)
				//{
			  //  ggtt=data|b;
				ggtt=0;
				ggtt=ggtt|b;
				if(data[0]<0)
					{
					ggtt=ggtt|c;
					}
				ggtt=ggtt&data[0];
				*semidata=*semidata+ggtt;
				
             //*semidata=*semidata|1073741824;
             *semidata=*semidata|(1<<30);
			 *sample_Num=(*sample_Num)+1;
				//}
			}
		else if(flag_32_30==2)
			{
			*semidata=0;
			int b=2147483647;
			int c=2147483648;
			//for(i=0;i<count;i++)
			//	{
				ggtt=0;
			    ggtt=ggtt|b;

				if(data[0]<0)
					{
					ggtt=ggtt|c;
					}
				ggtt=ggtt&data[0];
				*semidata=*semidata+ggtt;
				*sample_Num=(*sample_Num)+1;
				//b=b*32768;
				//c=c*32768;
				//}
			}
		}

	return 0;

	}
int writeCk_20180807(int *semidata,int semidata_num,int count,int flag_32_30)
	{
	int a=0;
	int b=1;
	int c=2;
	int d=3;
	if(semidata_num<=15)
		{
		if(count==7||count==6||count==5)
			{
			semidata[0]=semidata[0]|d<<(30-2*semidata_num);
			}
		else if(count==4)
			{
			semidata[0]=semidata[0]|b<<(30-2*semidata_num);
			}
		else if(count==2||(count==1&&flag_32_30==1)||count==3)
			{
			semidata[0]=semidata[0]|c<<(30-2*semidata_num);
			}

		}
	else if(semidata_num>15&&semidata_num<=31)
		{
		if(count==7||count==6||count==5)
			{
			semidata[16]=semidata[16]|d<<(30-2*(semidata_num-16));
			}
		else if(count==4)
			{
			semidata[16]=semidata[16]|b<<(30-2*(semidata_num-16));
			}
		else if(count==2||(count==1&&flag_32_30==1)||count==3)
			{
			semidata[16]=semidata[16]|c<<(30-2*(semidata_num-16));
			}

		}
	else if(semidata_num>31&&semidata_num<=47)
		{
		if(count==7||count==6||count==5)
			{
			semidata[32]=semidata[32]|d<<(30-2*(semidata_num-32));
			}
		else if(count==4)
			{
			semidata[32]=semidata[32]|b<<(30-2*(semidata_num-32));
			}
		else if(count==2||(count==1&&flag_32_30==1)||count==3)
			{
			semidata[32]=semidata[32]|c<<(30-2*(semidata_num-32));
			}

		}

	return 1;





	}





int writesteim2(int count,int *data,int flag_32_30,int *semidata,int *sample_Num)
	{
	// data 差分的数据
	// semidata 需要填入的一个32位的steim2 格式数据
	// semidata_num 表示第几个semi
	//flag_32_30 30:1 32:2
	int i;
	int ggtt=0;
	//int ggaa=0;
	//int b=7;
	if(count==7)
		{
		*semidata=0;
		
		int b=7;
		int c=8;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{

				ggtt=ggtt|c;
				}
			ggtt=ggtt&data[i];
			ggtt=ggtt<<(4*(count-1-i));

			*semidata=*semidata+ggtt;

			//b=b*16;
			//c=c*16;
			}

				
		*semidata=*semidata|(2<<30);

		*sample_Num=(*sample_Num)+7;
		}
	else if(count==6)
		{
		*semidata=0;
		int b=15;
		int c=16;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{
				ggtt=ggtt|c;
				}
			ggtt=ggtt&data[i];
			ggtt=ggtt<<((count-1-i)*5);

			*semidata=*semidata+ggtt;
			//b=b*32;
			//c=c*32;
			}
			*semidata=*semidata|(1<<30);
			*sample_Num=(*sample_Num)+6;
		}
	else if(count==5)
		{
		*semidata=0;
		int b=31;
		int c=32;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{
				ggtt=ggtt|c;
				}
			ggtt=ggtt&data[i];
			ggtt=ggtt<<((count-1-i)*6);

			*semidata=*semidata+ggtt;

			//b=b*64;
			//c=c*64;
			}
		*semidata=*semidata|(0<<30);
		*sample_Num=(*sample_Num)+5;
		//'00'
		}
	else if(count==4)
		{
		*semidata=0;
		int b=127;
		int c=128;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=data[i]|b;
			if(data[i]<0)
				{
			ggtt=ggtt|c;
				}
			ggtt=ggtt&data[i];
			ggtt=ggtt<<((count-1-i)*8);

			*semidata=*semidata+ggtt;
			//b=b*256;
			//c=c*256;
			}
		//*semidata=*semidata|(0<<30);
		*sample_Num=(*sample_Num)+4;
		}
	else if(count==3)
		{
		*semidata=0;
		int b=511;
		int c=512;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{
				ggtt=ggtt|c;
				}
			ggtt=ggtt&data[i];
			ggtt=ggtt<<((count-1-i)*10);

			*semidata=*semidata+ggtt;
			}
		*semidata=*semidata|(3<<30);
		*sample_Num=(*sample_Num)+3;
		}
	else if(count==2)
		{
		*semidata=0;
		int b=16383;
		int c=16384;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{
				ggtt=ggtt|c;
				}
			ggtt=ggtt&data[i];
			ggtt=ggtt<<((count-1-i)*15);

			*semidata=*semidata+ggtt;
	/*		*semidata=*semidata|ggtt;*/

			//b=b*32768;
			//c=c*32768;
			}
		    *sample_Num=(*sample_Num)+2;
			*semidata=*semidata|(2<<30);
		}
	else if(count==1)
		{
		if(flag_32_30==1)   //30位
			{
			*semidata=0;
			int b=536870911;
			int c=536870912;
			//for(i=0;i<count;i++)
				//{
			  //  ggtt=data|b;
				ggtt=0;
				ggtt=ggtt|b;
				if(data[0]<0)
					{
					ggtt=ggtt|c;
					}
				ggtt=ggtt&data[0];
				*semidata=*semidata+ggtt;
				
             //*semidata=*semidata|1073741824;
             *semidata=*semidata|(1<<30);
			 *sample_Num=(*sample_Num)+1;
				//}
			}
		else if(flag_32_30==2)
			{
			*semidata=0;
			int b=2147483647;
			int c=2147483648;
			//for(i=0;i<count;i++)
			//	{
				ggtt=0;
			    ggtt=ggtt|b;

				if(data[0]<0)
					{
					ggtt=ggtt|c;
					}
				ggtt=ggtt&data[0];
				*semidata=*semidata+ggtt;
				*sample_Num=(*sample_Num)+1;
				//b=b*32768;
				//c=c*32768;
				//}
			}
		}

	return 0;

	}
int writeCk(int *semidata,int semidata_num,int count,int flag_32_30)
	{
	int a=0;
	int b=1;
	int c=2;
	int d=3;
	if(semidata_num<=15)
		{
		if(count==7||count==6||count==5)
			{
			semidata[0]=semidata[0]|d<<(30-2*semidata_num);
			}
		else if(count==4)
			{
			semidata[0]=semidata[0]|b<<(30-2*semidata_num);
			}
		else if(count==2||(count==1&&flag_32_30==1)||count==3)
			{
			semidata[0]=semidata[0]|c<<(30-2*semidata_num);
			}

		}
	else if(semidata_num>15&&semidata_num<=31)
		{
		if(count==7||count==6||count==5)
			{
			semidata[16]=semidata[16]|d<<(30-2*(semidata_num-16));
			}
		else if(count==4)
			{
			semidata[16]=semidata[16]|b<<(30-2*(semidata_num-16));
			}
		else if(count==2||(count==1&&flag_32_30==1)||count==3)
			{
			semidata[16]=semidata[16]|c<<(30-2*(semidata_num-16));
			}

		}
	else if(semidata_num>31&&semidata_num<=47)
		{
		if(count==7||count==6||count==5)
			{
			semidata[32]=semidata[32]|d<<(30-2*(semidata_num-32));
			}
		else if(count==4)
			{
			semidata[32]=semidata[32]|b<<(30-2*(semidata_num-32));
			}
		else if(count==2||(count==1&&flag_32_30==1)||count==3)
			{
			semidata[32]=semidata[32]|c<<(30-2*(semidata_num-32));
			}

		}

	return 1;





	}


//int writesteim2(int count,int *data,int flag_32_30,int *semidata,int *sample_Num)
int writesteim2_0803(int count,int *data,int flag_32_30,int *semidata,int *sample_Num)
	{
	// data 差分的数据
	// semidata 需要填入的一个32位的steim2 格式数据
	// semidata_num 表示第几个semi
	//flag_32_30 30:1 32:2
	int i;
	int ggtt=0;
	//int ggaa=0;
	//int b=7;
	if(count==7)
		{
		*semidata=0;
		
		int b=7;
		int c=8;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{

				ggtt=ggtt|c;
				}
			ggtt=ggtt&data[i];
			ggtt=ggtt<<(4*i);

			*semidata=*semidata+ggtt;

			//b=b*16;
			//c=c*16;
			}

				
		*semidata=*semidata|(2<<30);

		*sample_Num=(*sample_Num)+7;
		}
	else if(count==6)
		{
		*semidata=0;
		int b=15;
		int c=16;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{
				ggtt=ggtt|c;
				}
			ggtt=ggtt&data[i];
			ggtt=ggtt<<(i*5);

			*semidata=*semidata+ggtt;
			//b=b*32;
			//c=c*32;
			}
			*semidata=*semidata|(1<<30);
			*sample_Num=(*sample_Num)+6;
		}
	else if(count==5)
		{
		*semidata=0;
		int b=31;
		int c=32;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{
				ggtt=ggtt|c;
				}
			ggtt=ggtt&data[i];
			ggtt=ggtt<<(i*6);

			*semidata=*semidata+ggtt;

			//b=b*64;
			//c=c*64;
			}
		*semidata=*semidata|(0<<30);
		*sample_Num=(*sample_Num)+5;
		//'00'
		}
	else if(count==4)
		{
		*semidata=0;
		int b=127;
		int c=128;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=data[i]|b;
			if(data[i]<0)
				{
			ggtt=ggtt|c;
				}
						ggtt=ggtt&data[i];
			ggtt=ggtt<<(i*8);

			*semidata=*semidata+ggtt;
			//b=b*256;
			//c=c*256;
			}
		//*semidata=*semidata|(0<<30);
		*sample_Num=(*sample_Num)+4;
		}
	else if(count==3)
		{
		*semidata=0;
		int b=511;
		int c=512;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{
				ggtt=ggtt|c;
				}
						ggtt=ggtt&data[i];
			ggtt=ggtt<<(i*10);

			*semidata=*semidata+ggtt;
			}
		*semidata=*semidata|(3<<30);
		*sample_Num=(*sample_Num)+3;
		}
	else if(count==2)
		{
		*semidata=0;
		int b=16383;
		int c=16384;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{
				ggtt=ggtt|c;
				}
						ggtt=ggtt&data[i];
			ggtt=ggtt<<(i*15);

			*semidata=ggtt+data[i];
	/*		*semidata=*semidata|ggtt;*/

			//b=b*32768;
			//c=c*32768;
			}
		    *sample_Num=(*sample_Num)+2;
			*semidata=*semidata|(2<<30);
		}
	else if(count==1)
		{
		if(flag_32_30==1)   //30位
			{
			*semidata=0;
			int b=536870911;
			int c=536870912;
			//for(i=0;i<count;i++)
				//{
			  //  ggtt=data|b;
				ggtt=0;
				ggtt=ggtt|b;
				if(data[0]<0)
					{
					ggtt=ggtt|c;
					}
				ggtt=ggtt&data[0];
				*semidata=*semidata+ggtt;
				
             //*semidata=*semidata|1073741824;
             *semidata=*semidata|(1<<30);
			 *sample_Num=(*sample_Num)+1;
				//}
			}
		else if(flag_32_30==2)
			{
			*semidata=0;
			int b=2147483647;
			int c=2147483648;
			//for(i=0;i<count;i++)
			//	{
				ggtt=0;
			    ggtt=ggtt|b;

				if(data[0]<0)
					{
					ggtt=ggtt|c;
					}
				ggtt=ggtt&data[0];
				*semidata=*semidata+ggtt;
				*sample_Num=(*sample_Num)+1;
				//b=b*32768;
				//c=c*32768;
				//}
			}
		}

	return 0;

	}

int writesteim2_20180726(int count,int *data,int flag_32_30,int *semidata,int *sample_Num)
	{
	// data 差分的数据
	// semidata 需要填入的一个32位的steim2 格式数据
	// semidata_num 表示第几个semi
	//flag_32_30 30:1 32:2
	int i;
	int ggtt=0;
	//int ggaa=0;
	//int b=7;
	if(count==7)
		{
		*semidata=0;
		
		int b=7;
		int c=8;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{

				ggtt=ggtt|c;
				}
			ggtt=ggtt&data[i];
			ggtt=ggtt<<(4*i);

			*semidata=*semidata+ggtt;

			//b=b*16;
			//c=c*16;
			}

				
		*semidata=*semidata|(2<<30);

		*sample_Num=(*sample_Num)+7;
		}
	else if(count==6)
		{
		*semidata=0;
		int b=15;
		int c=16;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{
				ggtt=ggtt|c;
				}
			ggtt=ggtt&data[i];
			ggtt=ggtt<<(i*5);

			*semidata=*semidata+ggtt;
			//b=b*32;
			//c=c*32;
			}
			*semidata=*semidata|(1<<30);
			*sample_Num=(*sample_Num)+6;
		}
	else if(count==5)
		{
		*semidata=0;
		int b=31;
		int c=32;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{
				ggtt=ggtt|c;
				}
			ggtt=ggtt&data[i];
			ggtt=ggtt<<(i*6);

			*semidata=*semidata+ggtt;

			//b=b*64;
			//c=c*64;
			}
		*semidata=*semidata|(0<<30);
		*sample_Num=(*sample_Num)+5;
		//'00'
		}
	else if(count==4)
		{
		*semidata=0;
		int b=127;
		int c=128;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=data[i]|b;
			if(data[i]<0)
				{
			ggtt=ggtt|c;
				}
						ggtt=ggtt&data[i];
			ggtt=ggtt<<(i*8);

			*semidata=*semidata+ggtt;
			//b=b*256;
			//c=c*256;
			}
		//*semidata=*semidata|(0<<30);
		*sample_Num=(*sample_Num)+4;
		}
	else if(count==3)
		{
		*semidata=0;
		int b=511;
		int c=512;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{
				ggtt=ggtt|c;
				}
						ggtt=ggtt&data[i];
			ggtt=ggtt<<(i*10);

			*semidata=*semidata+ggtt;
			}
		*semidata=*semidata|(3<<30);
		*sample_Num=(*sample_Num)+3;
		}
	else if(count==2)
		{
		*semidata=0;
		int b=16383;
		int c=16384;
		for(i=0;i<count;i++)
			{
			ggtt=0;
			ggtt=ggtt|b;
			//*semidata=*semidata|b;
			if(data[i]<0)
				{
				ggtt=ggtt|c;
				}
						ggtt=ggtt&data[i];
			ggtt=ggtt<<(i*15);

			*semidata=ggtt+data[i];
	/*		*semidata=*semidata|ggtt;*/

			//b=b*32768;
			//c=c*32768;
			}
		    *sample_Num=(*sample_Num)+2;
			*semidata=*semidata|(2<<30);
		}
	else if(count==1)
		{
		if(flag_32_30==1)   //30位
			{
			*semidata=0;
			int b=536870911;
			int c=536870912;
			//for(i=0;i<count;i++)
				//{
			  //  ggtt=data|b;
				ggtt=0;
				ggtt=ggtt|b;
				if(data[0]<0)
					{
					ggtt=ggtt|c;
					}
				ggtt=ggtt&data[0];
				*semidata=*semidata+ggtt;
				
             //*semidata=*semidata|1073741824;
             *semidata=*semidata|(1<<30);
			 *sample_Num=(*sample_Num)+1;
				//}
			}
		else if(flag_32_30==2)
			{
			*semidata=0;
			int b=2147483647;
			int c=2147483648;
			//for(i=0;i<count;i++)
			//	{
				ggtt=0;
			    ggtt=ggtt|b;

				if(data[0]<0)
					{
					ggtt=ggtt|c;
					}
				ggtt=ggtt&data[0];
				*semidata=*semidata+ggtt;
				*sample_Num=(*sample_Num)+1;
				//b=b*32768;
				//c=c*32768;
				//}
			}
		}

	return 0;

	}
//int writeCk(int *semidata,int semidata_num,int count,int flag_32_30)
int writeCk_0803(int *semidata,int semidata_num,int count,int flag_32_30)
	{
	int a=0;
	int b=1;
	int c=2;
	int d=3;
	if(semidata_num<=15)
		{
		if(count==7||count==6||count==5)
			{
			semidata[0]=semidata[0]|d<<(30-2*semidata_num);
			}
		else if(count==4)
			{
			semidata[0]=semidata[0]|b<<(30-2*semidata_num);
			}
		else if(count==2||(count==1&&flag_32_30==1)||count==3)
			{
			semidata[0]=semidata[0]|c<<(30-2*semidata_num);
			}

		}
	else if(semidata_num>15&&semidata_num<=31)
		{
		if(count==7||count==6||count==5)
			{
			semidata[16]=semidata[16]|d<<(30-2*(semidata_num-16));
			}
		else if(count==4)
			{
			semidata[16]=semidata[16]|b<<(30-2*(semidata_num-16));
			}
		else if(count==2||(count==1&&flag_32_30==1)||count==3)
			{
			semidata[16]=semidata[16]|c<<(30-2*(semidata_num-16));
			}

		}
	else if(semidata_num>31&&semidata_num<=47)
		{
		if(count==7||count==6||count==5)
			{
			semidata[32]=semidata[32]|d<<(30-2*(semidata_num-32));
			}
		else if(count==4)
			{
			semidata[32]=semidata[32]|b<<(30-2*(semidata_num-32));
			}
		else if(count==2||(count==1&&flag_32_30==1)||count==3)
			{
			semidata[32]=semidata[32]|c<<(30-2*(semidata_num-32));
			}

		}

	return 1;







	}





int writeCk_20180726(int *semidata,int semidata_num,int count,int flag_32_30)
	{
	int a=0;
	int b=1;
	int c=2;
	int d=3;
	if(semidata_num<=15)
		{
		if(count==7||count==6||count==5)
			{
			semidata[0]=semidata[0]|d<<(30-2*semidata_num);
			}
		else if(count==4)
			{
			semidata[0]=semidata[0]|b<<(30-2*semidata_num);
			}
		else if(count==2||(count==1&&flag_32_30==1)||count==3)
			{
			semidata[0]=semidata[0]|c<<(30-2*semidata_num);
			}

		}
	else if(semidata_num>15&&semidata_num<=31)
		{
		if(count==7||count==6||count==5)
			{
			semidata[16]=semidata[16]|d<<(30-2*(semidata_num-16));
			}
		else if(count==4)
			{
			semidata[16]=semidata[16]|b<<(30-2*(semidata_num-16));
			}
		else if(count==2||(count==1&&flag_32_30==1)||count==3)
			{
			semidata[16]=semidata[16]|c<<(30-2*(semidata_num-16));
			}

		}
	else if(semidata_num>31&&semidata_num<=47)
		{
		if(count==7||count==6||count==5)
			{
			semidata[32]=semidata[32]|d<<(30-2*(semidata_num-32));
			}
		else if(count==4)
			{
			semidata[32]=semidata[32]|b<<(30-2*(semidata_num-32));
			}
		else if(count==2||(count==1&&flag_32_30==1)||count==3)
			{
			semidata[32]=semidata[32]|c<<(30-2*(semidata_num-32));
			}

		}

	return 1;





	}





int steim2_main()
	{
	int j,i,ll,channel_num,ppp;
	int kkkk;

	long utc_time[3][2];            // 输出的utc时间 每个通道第一个为秒 第二个为纳秒
	FIR_LIST *tishen;               // 中间的变量
       
	int sample_Num[3]={0,0,0};      // 输出的采样点
	int flag_30_32=5;
	int count[3]={0,0,0};           // 中间系数
	int mincount[3]={10,10,10};     // 中间系数
	int datad[3][10];               // 查分数组
	int semidata[3][48];            // 中间数据
	int semicount[3]={0,0,0};       // W的个数
	int out[3][48];                 // 输出的值
	float data[1000];               
	int dataII[1000];
	double pi=3.14159265358979323;
	int sample_rate=100; //  改变采样率
	char *pp="outfile_0.ddd";
	char *ppa="outfile_1.ddd";
	char *ppb="outfile_2.ddd";
	char *pp2="outfile2.ddd";
	printf("sin(pi)=%f,sin(180)=%f\n",sin(pi),sin(180));
	// ofstream inputposion(pp,ios::binary);
	// 	ofstream inputposiona(ppa,ios::binary);
	// 		ofstream inputposionb(ppb,ios::binary);
	// 	ofstream inputposion2(pp2,ios::binary);
		int daaa=-100000000;
	/*	data[0]=-100;*/
		data[100]=10000000;
		data[700]=10000;
		data[701]=10000000;
		data[400]=100000;
		data[200]=100000000;
		data[600]=0;
	for(i=0;i<200;i++)
		{
		//data[i]=/*pow(-1.0,double(i))**/i;
		data[i]=sin(2*pi/10*i);
				//data[i]=data[i-1]*pow(double(-1.0000001),i);
		data[i]=data[i]*100;
		

		//data[i]=0;
		}
	for(i=200;i<300;i++)
		{
		//data[i]=/*pow(-1.0,double(i))**/i;
		data[i]=sin(2*pi/10*i);
		//data[i]=data[i-1]*pow(double(-1.0000001),i);
		data[i]=data[i]*1000000;

		//data[i]=0;
		}
	for(i=301;i<400;i++)
		{
		//data[i]=/*pow(-1.0,double(i))**/i;
		data[i]=daaa*powf(-1.0,(float)(i));
		//data[i]=data[i-1]*pow(double(-1.0000001),i);
		//data[i]=data[i]*1000000;

		//data[i]=0;
		}
	for(i=400;i<600;i++)
		{
		//data[i]=/*pow(-1.0,double(i))**/i;
		data[i]=sin(2*pi/10*i);
		//data[i]=data[i-1]*pow(double(-1.0000001),i);
		data[i]=data[i]*100;

		//data[i]=0;
		}
	for(i=600;i<650;i++)
		{
		//data[i]=/*pow(-1.0,double(i))**/i;
		data[i]=sin(2*pi/10*i);
		//data[i]=data[i-1]*pow(double(-1.0000001),i);
		data[i]=data[i]*100000000;

		//data[i]=0;
		}
	for(i=651;i<1000;i++)
		{
		//data[i]=/*pow(-1.0,double(i))**/i;
		data[i]=sin(2*pi/25*i);
		//data[i]=data[i-1]*pow(double(-1.0000001),i);
		data[i]=data[i]*10;

		//data[i]=0;
		}
	FIR_LIST ssdata[1000];
	for(i=0;i<1000;i++)
		{
		dataII[i]=data[i];
		}
	for(j=0;j<5;j++)
		{

		ssdata[0].data[j]=data[0];
		ssdata[0].next=&ssdata[1];
		ssdata[0].sample_rata=sample_rate;
		int i;
		for(i=1;i<999;i++)
			{
			ssdata[i].data[j]=data[i];
			ssdata[i].last=&ssdata[i-1];
			ssdata[i].next=&ssdata[i+1];
			ssdata[i].sample_rata=sample_rate;
			}

		ssdata[999].data[j]=data[999];
		ssdata[999].last=&ssdata[998];
		ssdata[999].sample_rata=sample_rate;
		}
	//ssdata[200].data[2]=-10000000;

		FILE * fp;
		char tmp[256];
		snprintf(tmp,256,"%s/%s","/home/pi",pp2);
		if (fp=fopen(tmp,"a+")){//打开日志文件;
			;
		}
		else{
			exit(0);
		}



	for(ll=0;ll<1000;ll++)
		{
		   for(channel_num=0;channel_num<3;channel_num++)
			   {
					//printf("%d**     ",ll);cun
					//kkkk=steim2out(&ssdata[ll],&count[channel_num],&mincount[channel_num],&datad[channel_num][0] ,&semidata[channel_num][0],&semicount[channel_num],&out[channel_num][0],&sample_Num[channel_num],channel_num/*,&flag_30_32*/);
					
					//save_bufinfile((char*)&dataII[ll],4,pp2,"/home/pi","a+");
					if(channel_num==0){
						int realwrite=mywrite((char*)&dataII[ll],4,fp);
					}	
					
					//inputposion2.write((char*)&dataII[ll],1*sizeof(int));     //输出原始数据
				if(kkkk==3||kkkk==31)
					{
				tishen=&ssdata[ll];
					if(kkkk==3)
						{
						for(ppp=0;ppp<sample_Num[channel_num]-1;ppp++)
							{
                             tishen=tishen->last;
							}
						utc_time[channel_num][0]=tishen->utc_second;              //起始时刻的utc时间  秒                  
						utc_time[channel_num][1]=tishen->utc_nanosecond;          //起始时刻的utc时间  纳秒

						printf("utc_second=  %ld utc_nasecond=  %ld\n",utc_time[channel_num][0],utc_time[channel_num][1]);




						}
					else if(kkkk==31)
						{
						for(ppp=0;ppp<sample_Num[channel_num];ppp++)
							{
							tishen=tishen->last;
							}
						utc_time[channel_num][0]=tishen->utc_second;                //起始时刻的utc时间  秒
						utc_time[channel_num][1]=tishen->utc_nanosecond;            //起始时刻的utc时间  纳秒
						printf("utc_second=  %ld utc_nasecond=  %ld\n",utc_time[channel_num][0],utc_time[channel_num][1]);
						
						}

					//save_bufinfile(char * buf,int len,const char * filename,const char * filepath,const char * mode)

	
					// if(channel_num==0)	
					// 	inputposion.write((char*)&out[channel_num][0],48*sizeof(int));                 //这里就可以写数据了   
					// else if(channel_num==1)
					// 	inputposiona.write((char*)&out[channel_num][0],48*sizeof(int));
					// else if(channel_num==2)
					// 	inputposionb.write((char*)&out[channel_num][0],48*sizeof(int));					
					
					//save_bufinfile((char*)&out[channel_num][0],48*sizeof(int),ppa,"/home/pi","a+");

	
					if(channel_num==0)	
						save_bufinfile((char*)&out[channel_num][0],48*sizeof(int),pp,"/home/pi","a+");
					else if(channel_num==1)
						save_bufinfile((char*)&out[channel_num][0],48*sizeof(int),ppa,"/home/pi","a+");
					else if(channel_num==2)
						save_bufinfile((char*)&out[channel_num][0],48*sizeof(int),ppb,"/home/pi","a+");
		
					





					printf("%d       channel_num=%d\n",sample_Num[channel_num],channel_num);
					sample_Num[channel_num]=0;
					if(kkkk==31)
						{

				       
						sample_Num[channel_num]=1;
						}
						
					}
			   }
		}
	// inputposion.close();
	// 	inputposiona.close();
	// 		inputposionb.close();
	// inputposion2.close();
	return 0;
	}

/*
typedef struct IWS_STEIM2{//
	struct IWS_STEIM2 * next;
	struct IWS_STEIM2 * prev;
	// long utc_time[IWS_CH_NUM][2];            // 输出的utc时间 每个通道第一个为秒 第二个为纳秒
	// FIR_LIST *tishen;               // 中间的变量
	// int sample_Num[IWS_CH_NUM]={0,0,0};      // 输出的采样点
	// int flag_30_32=5;
	// int count[IWS_CH_NUM]={0,0,0};           // 中间系数
	// int mincount[IWS_CH_NUM]={10,10,10};     // 中间系数
	// int datad[IWS_CH_NUM][10];               // 查分数组
	// int semidata[IWS_CH_NUM][48];            // 中间数据
	// int semicount[IWS_CH_NUM]={0,0,0};       // W的个数
	// int out[IWS_CH_NUM][48];                 // 输出的值
	long utc_time[IWS_CH_NUM][2];            //* 输出的utc时间 每个通道第一个为秒 第二个为纳秒
	FIR_LIST *tishen;               // 中间的变量
	int sample_Num[IWS_CH_NUM];      // *输出的采样点
	int flag_30_32;
	int count[IWS_CH_NUM];           // 中间系数
	int mincount[IWS_CH_NUM];     // 中间系数
	int datad[IWS_CH_NUM][10];               // 查分数组
	int semidata[IWS_CH_NUM][48];            // 中间数据
	int semicount[IWS_CH_NUM];       // W的个数
	int out[IWS_CH_NUM][48];                 //* 输出的值
	int ch_num;//*
	double pi;
	int steim2out_ret;
}__attribute__ ((packed,aligned(1)))IWS_STEIM2;







typedef struct IWS_STEIM2_OUT{//
	struct IWS_STEIM2 * next;
	struct IWS_STEIM2 * prev;
	int index;
	long utc_time[2];            //* 输出的utc时间 每个通道第一个为秒 第二个为纳秒
	int sample_Num;      // *输出的采样点
	int out[48];                 //* 输出的值
}__attribute__ ((packed,aligned(1)))IWS_STEIM2_OUT;
*/
extern int debut_print_iws_utc(iws_utc_10 * iws_up_wavedata);








int debug_print_steim_now_time(IWS_STEIM2 * steim2_init_para,iws_utc_10 * iws_utc_steim)
{

	
    struct timespec date_time;//当前时间
    clock_gettime(CLOCK_REALTIME, &date_time);
    iws_utc_10 iws_utc_now;
    struct tm  *mytm2= localtime(&(date_time.tv_sec));
    iws_utc_now.year=mytm2->tm_year+1900;
    iws_utc_now.yday=mytm2->tm_yday+1;
    iws_utc_now.hour=mytm2->tm_hour;
    iws_utc_now.min=mytm2->tm_min;
    iws_utc_now.sec=mytm2->tm_sec;
	printf(LIGHT_RED"NEW PAK now time:\n"NONE);
	printf(LIGHT_RED"NEW PAK now time date_time.tv_nsec=%d\n"NONE,date_time.tv_nsec);
    debut_print_iws_utc(&iws_utc_now);
	printf(PURPLE"app.buffer.steim2_out_buf[STEIM2_NOW]->index=%d\n"NONE,app.buffer.steim2_out_buf[STEIM2_NOW]->index);
	printf(LIGHT_CYAN"in iws_do_steim_callback utc=%d\nsteim2_init_para->sample_Num=%d\nnsec=%d\n"NONE, \
		steim2_init_para->utc_time[steim2_init_para->ch_num][0],steim2_init_para->sample_Num[steim2_init_para->ch_num],\
		steim2_init_para->utc_time[steim2_init_para->ch_num][1]);
    printf(LIGHT_RED"NEW PAK time:\n"NONE);
    debut_print_iws_utc(iws_utc_steim);
    return 0;
}






int iws_do_steim_callback(FIR_LIST *list,IWS_STEIM2 * steim2_init_para)
{

	app.buffer.steim2_out_buf[STEIM2_NOW]->utc_time[0]=steim2_init_para->utc_time[steim2_init_para->ch_num][0];
	app.buffer.steim2_out_buf[STEIM2_NOW]->utc_time[1]=steim2_init_para->utc_time[steim2_init_para->ch_num][1];
    iws_utc_10 iws_utc_now;
    struct tm  *mytm2= localtime(&(app.buffer.steim2_out_buf[STEIM2_NOW]->utc_time[0]));
    iws_utc_now.year=mytm2->tm_year+1900;
    iws_utc_now.yday=mytm2->tm_yday+1;
    iws_utc_now.hour=mytm2->tm_hour;
    iws_utc_now.min=mytm2->tm_min;
    iws_utc_now.sec=mytm2->tm_sec;
	//debug_print_steim_now_time(steim2_init_para,&iws_utc_now);
	app.buffer.steim2_out_buf[STEIM2_NOW]->sample_Num=steim2_init_para->sample_Num[steim2_init_para->ch_num];
	app.buffer.steim2_out_buf[STEIM2_NOW]->ch_num=steim2_init_para->ch_num;
	int ifor;
	// char * p = (char *)steim2_init_para->out[steim2_init_para->ch_num];
	// for(ifor=0;ifor<192;ifor++)
	// {
	// 	printf(LIGHT_GREEN"%d:%02X-%c "NONE,ifor,p[ifor],p[ifor]);
	// }
	// printf("\n");
	memcpy(app.buffer.steim2_out_buf[STEIM2_NOW]->out,steim2_init_para->out[steim2_init_para->ch_num],192);

	//app.buffer.steim2_out_buf[STEIM2_NOW]->utc_time[1]=steim2_init_para->utc_time[1];
	//app->buffer.steim2_out_buf[STEIM2_NOW]
	pthread_mutex_lock(&app.app_mut[9]);
		app.buffer.steim2_out_buf[STEIM2_NOW]=app.buffer.steim2_out_buf[STEIM2_NOW]->next;
	pthread_mutex_unlock(&app.app_mut[9]);
	for(ifor=0;ifor<6;ifor++)
	{

		if((app.iws_server[ifor].status.isconnect==1)&&(app.iws_server[ifor].mode==1)){//连续波形模式才会更新发送等待变量
			//app.buffer.steim2_out_buf[STEIM2_NOW];
			//printf(PURPLE"server %d ready app.iws_server[ifor].sig=%d\n"NONE,ifor,app.iws_server[ifor].sig);
			pthread_mutex_lock(&app.app_mut[ifor]);
				app.iws_server[ifor].sig++;
			pthread_mutex_unlock(&app.app_mut[ifor]);
			//app.iws_server[ifor].sig++;
			
		}
	}
    pthread_mutex_lock(&app.app_mut[MUTEX_LOCK_IS_CAN_STEIM]);//保存原始波形压缩包，任何模式下都执行
        app.app_sig.sig_can_steim++;
//app->iws_server[connect_index].sig--;
    pthread_mutex_unlock(&app.app_mut[MUTEX_LOCK_IS_CAN_STEIM]);
	
	// printf(BLUE"app.buffer.steim2_out_buf[STEIM2_NOW]=%d\n"NONE, app.buffer.steim2_out_buf[STEIM2_NOW]);
	// printf(BLUE"app.buffer.steim2_out_buf[STEIM2_NOW]->utc_time[0]=%d\n"NONE, app.buffer.steim2_out_buf[STEIM2_NOW]->utc_time[0]);

	
	// printf(BLUE"app.buffer.steim2_out_buf[STEIM2_NOW]->utc_time[0]=%d\n"NONE, app.buffer.steim2_out_buf[STEIM2_NOW]->utc_time[0]);

	return 0;
}


int iws_do_status_callback(FIR_LIST *list,IWS_STATUS_OUT * iws_status)
{
	int ifor;
	//printf(RED"iws_do_status_callback status_out_buf[STATUS_NOW]=%d,iws_status=%d\n"NONE,app.buffer.status_out_buf[STATUS_NOW],iws_status);
	IWS_STATUS_OUT *pp=app.buffer.status_out_buf[STATUS_NOW];
	int jfor;
	// for(jfor=0;jfor<100;jfor++)
	// {
	// 	//app->buffer.steim2_out_buf[STEIM2_NOW]=(IWS_STEIM2_OUT *)((char *)app->buffer.databuf[LOOPBUFLIST]+512);
	// 	printf(BLUE"ifor=%d,[pp]=%d,[pp]->next=%d\n"NONE,jfor,pp,pp->next);	
	// 	pp=pp->next;
	// 	//app->buffer.status_out_buf[STATUS_NOW]=app->buffer.status_out_buf[STATUS_NOW]->next;
	// }
	/*
		int index;
		long utc_time[2];            //* 输出的utc时间 每个通道第一个为秒 第二个为纳秒
		int starttime;
		// int ud_max;
		// int ud_min;
		// int ew_max;
		// int ew_min;
		// int ns_max;
		// int ns_min;
		float max[3];
		float min[3];
		int ud[10];
		int ew[10];
		int ns[10];  
	*/
	app.buffer.status_out_buf[STATUS_NOW]->utc_time[0]=iws_status->utc_time[0];
	app.buffer.status_out_buf[STATUS_NOW]->utc_time[1]=iws_status->utc_time[1];
	app.buffer.status_out_buf[STATUS_NOW]->starttime=iws_status->starttime;
	// app.buffer.status_out_buf[STATUS_NOW]->max[0]=iws_status->max[0];
	// app.buffer.status_out_buf[STATUS_NOW]->max[1]=iws_status->max[1];
	// app.buffer.status_out_buf[STATUS_NOW]->max[2]=iws_status->max[2];
	// app.buffer.status_out_buf[STATUS_NOW]->min[0]=iws_status->min[0];
	// app.buffer.status_out_buf[STATUS_NOW]->min[1]=iws_status->min[1];
	// app.buffer.status_out_buf[STATUS_NOW]->min[2]=iws_status->min[2];
	for(jfor=0;jfor<10;jfor++)
	{
		app.buffer.status_out_buf[STATUS_NOW]->ud[jfor]=iws_status->ud[jfor];
		app.buffer.status_out_buf[STATUS_NOW]->ew[jfor]=iws_status->ew[jfor];
		app.buffer.status_out_buf[STATUS_NOW]->ns[jfor]=iws_status->ns[jfor];

	}
	//memcpy(app.buffer.status_out_buf[STATUS_NOW],iws_status,sizeof(IWS_STATUS_OUT));
	for(ifor=0;ifor<6;ifor++)
	{

		if((app.iws_server[ifor].status.isconnect==1)&&(app.iws_server[ifor].mode>1)){
			//app.buffer.steim2_out_buf[STEIM2_NOW];
			printf(LIGHT_GREEN"server %d ready\n"NONE,ifor);
			app.iws_server[ifor].sig_status++;
		}
	}
	app.buffer.status_out_buf[STATUS_NOW]=app.buffer.status_out_buf[STATUS_NOW]->next;
	//printf(RED"iws_do_status_callback status_out_buf[STATUS_NOW]=%d,iws_status=%d\n"NONE,app.buffer.status_out_buf[STATUS_NOW],iws_status);
	return 0;
}



int iws_do_status_pre(FIR_LIST *list,IWS_STATUS_OUT * iws_status)
{

	iws_do_status_callback(list,iws_status);
	return 0;
}






int tmp_count=0;



print_steim2_init_para(IWS_STEIM2 * steim2_init_para,int ch_num)
{
	printf("steim2_init_para->utc_time[%d][0]=%d\n",ch_num,steim2_init_para->utc_time[ch_num][0]);
	printf("steim2_init_para->utc_time[%d][1]=%d\n",ch_num,steim2_init_para->utc_time[ch_num][1]);
	printf("steim2_init_para->semicount[0]=%d\n",steim2_init_para->semicount[0]);
	printf("steim2_init_para->semicount[1]=%d\n",steim2_init_para->semicount[1]);
	printf("steim2_init_para->semicount[2]=%d\n",steim2_init_para->semicount[2]);
	printf("steim2_init_para->mincount[0]=%d\n",steim2_init_para->mincount[0]);
	printf("steim2_init_para->mincount[1]=%d\n",steim2_init_para->mincount[1]);
	printf("steim2_init_para->mincount[2]=%d\n",steim2_init_para->mincount[2]);
	printf("steim2_init_para->sample_Num_tmp[0]=%d\n",steim2_init_para->sample_Num_tmp[0]);
	printf("steim2_init_para->sample_Num_tmp[1]=%d\n",steim2_init_para->sample_Num_tmp[1]);
	printf("steim2_init_para->sample_Num_tmp[2]=%d\n",steim2_init_para->sample_Num_tmp[2]);
	printf("steim2_init_para->sample_Num[0]=%d\n",steim2_init_para->sample_Num[0]);
	printf("steim2_init_para->sample_Num[1]=%d\n",steim2_init_para->sample_Num[1]);
	printf("steim2_init_para->sample_Num[2]=%d\n",steim2_init_para->sample_Num[2]);
	int ifor;
	for(ifor=0;ifor<3;ifor++)
	{
		if(steim2_init_para->sample_Num[ifor]!=44)
		{
			printf(RED"steim2_init_para->sample_Num[%d]=%d\n"NONE,ifor,steim2_init_para->sample_Num[ifor]);
			tmp_count++;
			if(tmp_count==100)
				exit(0);

		}
	}
	return 0;
}

/*
typedef struct IWS_STEIM2{//
	struct IWS_STEIM2 * next;
	struct IWS_STEIM2 * prev;
	// long utc_time[IWS_CH_NUM][2];            // 输出的utc时间 每个通道第一个为秒 第二个为纳秒
	// FIR_LIST *tishen;               // 中间的变量
	// int sample_Num[IWS_CH_NUM]={0,0,0};      // 输出的采样点
	// int flag_30_32=5;
	// int count[IWS_CH_NUM]={0,0,0};           // 中间系数
	// int mincount[IWS_CH_NUM]={10,10,10};     // 中间系数
	// int datad[IWS_CH_NUM][10];               // 查分数组
	// int semidata[IWS_CH_NUM][48];            // 中间数据
	// int semicount[IWS_CH_NUM]={0,0,0};       // W的个数
	// int out[IWS_CH_NUM][48];                 // 输出的值
	long utc_time[IWS_CH_NUM][2];            //* 输出的utc时间 每个通道第一个为秒 第二个为纳秒
	FIR_LIST *tishen;               // 中间的变量
	int sample_Num[IWS_CH_NUM];      // *输出的采样点
	int sample_Num_tmp[IWS_CH_NUM];      // *输出的采样点
	int flag_30_32;
	int count[IWS_CH_NUM];           // 中间系数
	int mincount[IWS_CH_NUM];     // 中间系数
	int datad[IWS_CH_NUM][10];               // 查分数组
	int semidata[IWS_CH_NUM][48];            // 中间数据
	int semicount[IWS_CH_NUM];       // W的个数
	int out[IWS_CH_NUM][48];                 //* 输出的值
	int ch_num;//*
	double pi;
	int steim2out_ret;
	float max[3];
	float min[3];
	float ffvalue[3];
	float fisrt_value_flag[3];
	int change_c;
}__attribute__ ((packed,aligned(1)))IWS_STEIM2;
*/

extern short d_d_d_d;

int iws_do_trig_pre(BAND_PASS_RESULT *band_pass_data,float * result,int final_liedu_pga,long * utc_time_imt,float sta_lta,int rela_t)
{
	//printf(CYAN"utc_time_imt[0]=%d,utc_time_imt[1]=%d\n"NONE,utc_time_imt[0],utc_time_imt[1]);

/*
	int ud_pga;//UD向PGA
	int ud_pgv;//单位为mm/s,频带范围0.1-10Hz
	int ud_pgd;//
	int ew_pga;
	int ew_pgv;
	int ew_pgd;
	int ns_pga;
	int ns_pgv;
	int ns_pgd;
	short cdv;//Column degree value
	int ud_psa03;
	int ud_psa10;
	int ud_psa30;
	int ew_psa03;
	int ew_psa10;
	int ew_psa30;
	int ns_psa03;
	int ns_psa10;
	int ns_psa30;








	long utc_second_final_PGA; //utc时间秒                最终PGA
	long utc_nanosecond_final_PGA; //utc时间纳秒          最终PGA
	long utc_second_final_PGV; //utc时间秒                最终PGV
	long utc_nanosecond_final_PGV; //utc时间纳秒          最终PGV
	long utc_second_final_PGD; //utc时间秒                最终PGD
	long utc_nanosecond_final_PGD; //utc时间纳秒          最终PGD


	//float data[5]; //原始数据
	//float dataV[5];//速度数据
	//float dataD[5];//位移数据


	//float band_pass_data1[5];//中间带通数据
	//float band_pass_dataD1[5];//中间带通数据
	//float band_pass_dataV1[5];//中间带通数据

	//float band_pass_dataV[5];//带通后速度数据
	//float band_pass_dataD[5];//带通后位移数据
	//float band_pass_data[5];//带通后加速度数据


	//float instant_PGA;//瞬时PGA
	//float instant_PGV;//瞬时PGV
	//float instant_PGD;//瞬时PGD

	//float final_PGA;//最终的PGA
	//float final_PGV;//最终的PGV
	//float final_PGD;//最终的PGD


	float final_PGA;//最终的PGA
	float final_PGV;//最终的PGV
	float final_PGD;//最终的PGD


	float final_PGA_component[3];//最终的PGA
	float final_PGV_component[3];//最终的PGV
	float final_PGD_component[3];//最终的PGD


*/
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].ud_pga=band_pass_data->final_PGA_component[2];
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].ud_pgv=band_pass_data->final_PGV_component[2];
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].ud_pgd=1000*band_pass_data->final_PGD_component[2];
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].ew_pga=band_pass_data->final_PGA_component[1];
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].ew_pgv=band_pass_data->final_PGV_component[1];
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].ew_pgd=1000*band_pass_data->final_PGD_component[1];
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].ns_pga=band_pass_data->final_PGA_component[0];
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].ns_pgv=band_pass_data->final_PGV_component[0];
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].ns_pgd=1000*band_pass_data->final_PGD_component[0];

	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].ns_psa03=result[0];
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].ns_psa10=result[1];
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].ns_psa30=result[2];
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].ew_psa03=result[3];
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].ew_psa10=result[4];
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].ew_psa30=result[5];
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].ud_psa03=result[6];
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].ud_psa10=result[7];
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].ud_psa30=result[8];	
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].cdv=final_liedu_pga;
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].imt_s=utc_time_imt[0];
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].imt_ms=(short)(utc_time_imt[1]/1000000);
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].sta_lta=(int)(sta_lta+0.5);
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].rt_s=(int)(rela_t);
	app.iws_up_ti[app.app_sig.sig_trig_ti_write_buf].imd=d_d_d_d;

}

int get_imt(FIR_LIST *list,long * imt,long * trig_start)
{
	int ifor;
	FIR_LIST *list_now=list;
	for(ifor=0;ifor<(app.iws_para.firlen-1)/2;ifor++)
	{
		list_now=list_now->last;
	}
	imt[0]=list_now->utc_second;
	imt[1]=list_now->utc_nanosecond;
	trig_start[0]=list->utc_second;
	trig_start[1]=list->utc_nanosecond;
	return 0;

}

int iws_do_steim_pre(FIR_LIST *list,IWS_STEIM2 * steim2_init_para)
{

	//FIR_LIST *tishen;
	int channel_num;
	int sample_num[3];
		
	// printf(RED"list->data[0]=%f\n"NONE,list->data[0]);
	// printf(RED"list->data[1]=%f\n"NONE,list->data[1]);
 // 	printf(RED"list->data[2]=%f\n"NONE,list->data[2]);

    for(channel_num=0;channel_num<3;channel_num++)
	{
		steim2_init_para->mincount[channel_num]=0;
		steim2_init_para->steim2out_ret=steim2out(list,&steim2_init_para->count[channel_num],\
		&steim2_init_para->mincount[channel_num],\
		&steim2_init_para->datad[channel_num][0],\
		&steim2_init_para->semidata[channel_num][0],\
		&steim2_init_para->semicount[channel_num],\
		&steim2_init_para->out[channel_num][0],\
		&steim2_init_para->sample_Num_tmp[channel_num],\
		channel_num/*,&flag_30_32*/,\
		&steim2_init_para->fisrt_value_flag[channel_num]);
		if(steim2_init_para->steim2out_ret==3||steim2_init_para->steim2out_ret==31||steim2_init_para->steim2out_ret==311)//有数据需要输出
		{
			steim2_init_para->tishen=list;
			int ppp;
			if(steim2_init_para->steim2out_ret==3)
			{
				for(ppp=0;ppp<steim2_init_para->sample_Num[channel_num]-1;ppp++)
					{
                     steim2_init_para->tishen=steim2_init_para->tishen->last;
					}
				steim2_init_para->utc_time[channel_num][0]=steim2_init_para->tishen->utc_second;              //起始时刻的utc时间  秒                  
				steim2_init_para->utc_time[channel_num][1]=steim2_init_para->tishen->utc_nanosecond;          //起始时刻的utc时间  纳秒
			}
			else if(steim2_init_para->steim2out_ret==31||steim2_init_para->steim2out_ret==311)
			{
				for(ppp=0;ppp<steim2_init_para->sample_Num[channel_num];ppp++)
					{
					steim2_init_para->tishen=steim2_init_para->tishen->last;
					}
				steim2_init_para->utc_time[channel_num][0]=steim2_init_para->tishen->utc_second;                //起始时刻的utc时间  秒
				steim2_init_para->utc_time[channel_num][1]=steim2_init_para->tishen->utc_nanosecond;            //起始时刻的utc时间  纳秒
			}
			steim2_init_para->sample_Num[channel_num]=steim2_init_para->sample_Num_tmp[channel_num];
			steim2_init_para->ch_num=channel_num;
			//print_steim2_init_para(steim2_init_para,channel_num);
			iws_do_steim_callback(list,steim2_init_para);
			steim2_init_para->sample_Num_tmp[channel_num]=0;
			if(steim2_init_para->steim2out_ret==31){
				steim2_init_para->sample_Num_tmp[channel_num]=1;
			}	
		}
	}
	return 0;
}


int debug_print_psa_para(FIR_LIST *i_list,float sample_rata,float zuni,float *period,float *result,double *dx,double *x2,double *y0,double *y1,int *first)
{
	printf("sample_rata=%f\n",sample_rata);
	printf("zuni=%f\n",zuni);
	printf("period[0]=%f\n",period[0]);
	printf("period[1]=%f\n",period[1]);
	printf("period[2]=%f\n",period[2]);
	printf("*first=%d\n",*first);
	printf("result[0]=%f\n",result[0]);
	printf("result[1]=%f\n",result[1]);
	printf("result[2]=%f\n",result[2]);
	printf("result[3]=%f\n",result[3]);
	printf("result[4]=%f\n",result[4]);
	printf("result[5]=%f\n",result[5]);
	printf("result[6]=%f\n",result[6]);
	printf("result[7]=%f\n",result[7]);
	// printf("sample_rata=%f\n",sample_rata);
	// printf("sample_rata=%f\n",sample_rata);
	// printf("sample_rata=%f\n",sample_rata);


}

//int psa_struct_2(FIR_LIST *i_list,float sample_rata,float zuni,float *period,float *result,double *dx,double *x2,double *y0,double *y1,int *first)
int psa_struct_2(FIR_LIST *i_list,float sample_rata,float zuni,float *period,float *result,double *dx,double *x2,double *y0,double *y1,int *first)
	{
	int j,i,k,kkk;
	double dp,z,w,xt,c1,c2,c3,dx0,sa2,y2;
	double dlt=1.0/sample_rata;
	for(kkk=0;kkk<3;kkk++)
		{

		//alg_locat();
		for(j=0;j<3;j++)
			{
				//alg_locat();
			dp=period[j]/10.0;//
//alg_locat();
			w=3.1415926535897932384*2/period[j];//
			//alg_locat();
			z=expf(-1*zuni*w*dlt);//
//alg_locat();
			xt=w*powf(1.0-zuni*zuni,0.5)*dlt;//
			//alg_locat();
			c1=2.0*z*cosf(xt);//
			//alg_locat();
			c2=-1*z*z;//
			c3=-1*z*sinf(xt)/xt;//
			//alg_locat();
			if(*first==1)
				{
					//alg_locat();

				dx[kkk*3+j]=i_list->band_pass_data[kkk];//*
				//alg_locat();
				x2[kkk*3+j]=i_list->band_pass_data[kkk];//*
				y0[kkk*3+j]=0.0;//*
				y1[kkk*3+j]=c3*i_list->band_pass_data[kkk];//*


				}
			else
				{
					//alg_locat();

				//for (i=0;i<i_list->data_num-1;i++)
				//	{

					dx0=dx[kkk*3+j];
					dx[kkk*3+j]=(i_list->band_pass_data[kkk]-i_list->last->band_pass_data[kkk]);
					//for(k=0;k<l;k++)
					//	{
					x2[kkk*3+j]=x2[kkk*3+j]+dx[kkk*3+j];
					y2=c1*y1[kkk*3+j]+c2*y0[kkk*3+j];
					//if(k==0)
					y2+=c3*(dx[kkk*3+j]-dx0);
					sa2=fabs(x2[kkk*3+j]+y2);
//alg_locat();
					if(sa2>result[kkk*3+j])
						result[kkk*3+j]=sa2;
					y0[kkk*3+j]=y1[kkk*3+j];
					y1[kkk*3+j]=y2;

						//}
					//}
				}
			
			}
		}

	if(*first==1)
	*first=2;
//alg_locat();
	//debug_print_psa_para(i_list,sample_rata,zuni,period,result,dx,x2,y0,y1,first);

	return 1;

	}








int psa_struct_2_main()
	{
	float data[1000];
	double pi=3.14159265358979323846264338327950288;
	double dx[3][3];//***
	double x2[3][3];//***
	double y0[3][3];//***
	double y1[3][3];//***
	float zuni=0.05;//***
	int first=1;//***
	int sample_rata=100;
	int i,j;
	float result;
	float result1[3][3]={0};//*** 第一个下标代表三个方向 第二个下标代表 三个周期
	float period[3]={0.3,1,3};//***
	//period[0]=1;
	//result[0]=0;
	result=0;
	for(i=0;i<1000;i++)
		{
		data[i]=2*sinf(2*pi*i/100)+sinf(2*pi*i/1000);   //模拟某个分量的加速度测量数据
		}

	FIR_LIST ssdata[1000];

	for(j=0;j<5;j++)
		{

		ssdata[0].data[j]=data[0];
		ssdata[0].next=&ssdata[1];
		ssdata[0].sample_rata=sample_rata;

		for(i=1;i<999;i++)
			{
			ssdata[i].data[j]=data[i];
			ssdata[i].last=&ssdata[i-1];
			ssdata[i].next=&ssdata[i+1];
			ssdata[i].sample_rata=sample_rata;
			}

		ssdata[999].data[j]=data[999];
		ssdata[999].last=&ssdata[998];
		ssdata[999].sample_rata=sample_rata;
		}

	//int psa(float *data,float &result,int num,float period ,int sample_rata);
	//这个速度慢 
	//data 各分量加速度测量数组 
	//num 测量数据长度
	//result 结果
	//sample_rata 采样率
	//period 需要计算的周期
	//psa(&data[0],result,1000,1, 100);



	//int psa_2(float *data,int data_num,float sample_rata,float zuni,float *period,int period_num,float *result);
	//计算PSA  使用psa2 速度更快
	//data 各分量加速度测量数组 
	//data_num 测量数据长度
	//sample_rata 采样率
	//zuni 阻尼
	//period 需要计算的周期数组 因为 0.3 1 3（秒）
	//result 对应的结果数组

	for(i=100;i<900;i++)
		{
		psa_struct_2(&ssdata[i],sample_rata,zuni,&period[0],&result1[0][0],&dx[0][0],&x2[0][0],&y0[0][0],&y1[0][0],&first);
		}





	//psa_2(&data[100],9000,100,0.05,&period[0],1,&result1[0]);



	printf(" psa	=   %16.13f\n",result);
	printf(" psa2	=   %16.13f   %16.13f    %16.13f",result1[0][0],result1[1][1],result1[2][2]);
	getchar();
	return 1;
	}

int alg_main(APP_S * app)
{
	return 0;
}


int PGA_V_G2(FIR_LIST *i_fir_list,BAND_PASS_RESULT *band_pass_data,int *count,int timespan,int *trig,int PGV_type,int band_pass_flag)
	{
	//printf(GREEN"in PGA_V_G2 band_pass_flag=%d\n"NONE,band_pass_flag);

	int firLength,j,jjj,iii;
	double datamid;
	FIR_LIST *now_fir;
	int i_sample_rata=i_fir_list->sample_rata;
	if (i_fir_list->sample_rata==50&&band_pass_flag==0)
		{
		firLength=81;
		double Fir[81]={-4.7987787339820936e-04,
			-8.9057350076593368e-04,
			-7.2903341056485352e-04,
			-9.3968046651590189e-04,
			-2.0015152670250906e-03,
			-1.8457782153191327e-03,
			-1.4331943313841396e-03,
			-3.2987790655067970e-03,
			-3.9188767708761094e-03,
			-2.2358326021832526e-03,
			-4.2761095213556272e-03,
			-6.9685597648698229e-03,
			-4.0562398557881119e-03,
			-4.5086713435378723e-03,
			-1.0324010165847381e-02,
			-7.7980789590883538e-03,
			-4.2123548102063557e-03,
			-1.2580685653923828e-02,
			-1.3896183105007932e-02,
			-4.6707793854684938e-03,
			-1.2139776287417038e-02,
			-2.1492365469531257e-02,
			-8.0968892823001046e-03,
			-8.2631555848332473e-03,
			-2.7966602054323594e-02,
			-1.6735759731169867e-02,
			-2.1834926757662077e-03,
			-2.9254096192636532e-02,
			-3.1499163705017090e-02,
			2.3107659525776346e-03,
			-2.0832464828927390e-02,
			-5.0853889965031082e-02,
			-1.1624388651572256e-03,
			1.8841462457617236e-03,
			-7.0730297852423088e-02,
			-2.3669862992490260e-02,
			4.9655253129437991e-02,
			-8.5754335252881606e-02,
			-1.1745446174509039e-01,
			2.7761355362248835e-01,
			5.7538029520670841e-01,
			2.7761355362248769e-01,
			-1.1745446174508975e-01,
			-8.5754335252880912e-02,
			4.9655253129437457e-02,
			-2.3669862992489934e-02,
			-7.0730297852421936e-02,
			1.8841462457616889e-03,
			-1.1624388651572048e-03,
			-5.0853889965029819e-02,
			-2.0832464828926815e-02,
			2.3107659525775617e-03,
			-3.1499163705016028e-02,
			-2.9254096192635470e-02,
			-2.1834926757661245e-03,
			-1.6735759731169159e-02,
			-2.7966602054322321e-02,
			-8.2631555848328413e-03,
			-8.0968892822996814e-03,
			-2.1492365469530057e-02,
			-1.2139776287416327e-02,
			-4.6707793854682024e-03,
			-1.3896183105007011e-02,
			-1.2580685653922945e-02,
			-4.2123548102060435e-03,
			-7.7980789590877501e-03,
			-1.0324010165846531e-02,
			-4.5086713435374846e-03,
			-4.0562398557877433e-03,
			-6.9685597648691568e-03,
			-4.2761095213552005e-03,
			-2.2358326021830158e-03,
			-3.9188767708756775e-03,
			-3.2987790655064630e-03,
			-1.4331943313839600e-03,
			-1.8457782153188935e-03,
			-2.0015152670248100e-03,
			-9.3968046651576485e-04,
			-7.2903341056474108e-04,
			-8.9057350076577387e-04,
			-4.7987787339812745e-04,
			};
		if(*trig!=0)
			{
			//if(PGV_type==1)
			//	{
			//	datamid=0.0;
			//	now_fir=i_fir_list;
			//	for(int i=0;i<firLength;i++)
			//		{
			//		datamid=datamid+now_fir->dataV[4]*Fir[i];
			//		now_fir=now_fir->last;
			//		}
			//	i_fir_list->band_pass_dataV[4]=datamid;



			//	datamid=0.0;
			//	now_fir=i_fir_list;
			//	for(int i=0;i<firLength;i++)
			//		{
			//		datamid=datamid+now_fir->dataD[4]*Fir[i];
			//		now_fir=now_fir->last;
			//		}
			//	i_fir_list->band_pass_dataD[4]=datamid;

			//	}
			//else if(PGV_type==2)
			//	{
			//	for(int j=0;j<3;j++)
			//		{


			//		datamid=0.0;
			//		now_fir=i_fir_list;
			//		for(int i=0;i<firLength;i++)
			//			{
			//			datamid=datamid+now_fir->dataV[j]*Fir[i];
			//			now_fir=now_fir->last;
			//			}
			//		i_fir_list->band_pass_dataV[j]=datamid;

			//		}
			//	i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
			//	for(int j=0;j<3;j++)
			//		{


			//		datamid=0.0;
			//		now_fir=i_fir_list;
			//		for(int i=0;i<firLength;i++)
			//			{
			//			datamid=datamid+now_fir->dataD[j]*Fir[i];
			//			now_fir=now_fir->last;
			//			}
			//		i_fir_list->band_pass_dataD[j]=datamid;
			//		}
			//	i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
			//	}




			if(*trig==1)
				{
				for(jjj=0;jjj<3;jjj++)
					{
					band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}
				band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
				band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
				band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
				now_fir=i_fir_list->last;
				for(iii=1;iii<i_sample_rata*3;iii++)
					{
					for(jjj=0;jjj<3;jjj++)
						{
						if(abs(now_fir->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
							band_pass_data->final_PGA_component[jjj]=abs(now_fir->band_pass_data[jjj]);
						if(abs(now_fir->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
							band_pass_data->final_PGV_component[jjj]=abs(now_fir->band_pass_dataV[jjj]);
						if(abs(now_fir->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
							band_pass_data->final_PGD_component[jjj]=abs(now_fir->band_pass_dataD[jjj]);
						}

					if(now_fir->band_pass_data[4]>band_pass_data->final_PGA)
						{
						band_pass_data->final_PGA=now_fir->band_pass_data[4];
						band_pass_data->utc_second_final_PGA=now_fir->utc_second; //utcÊ±¼äÃë
						band_pass_data->utc_nanosecond_final_PGA=now_fir->utc_nanosecond; //utcÊ±¼äÄÉÃë

						}
					//else
					//	{
					//	band_pass_data->final_PGA=i_fir_list->last->final_PGA;
					//	band_pass_data->utc_second_final_PGA=i_fir_list->last->utc_second; //utcÊ±¼äÃë
					//	band_pass_data->utc_nanosecond_final_PGA=i_fir_list->last->utc_nanosecond; //utcÊ±¼äÄÉÃë
					//	}
					if(now_fir->band_pass_dataV[4]>band_pass_data->final_PGV)
						{
						band_pass_data->final_PGV=now_fir->band_pass_dataV[4];
						band_pass_data->utc_second_final_PGV=now_fir->utc_second; //utcÊ±¼äÃë
						band_pass_data->utc_nanosecond_final_PGV=now_fir->utc_nanosecond; //utcÊ±¼äÄÉÃë
						}
					//else
					//	{
					//	band_pass_data->final_PGV=i_fir_list->last->final_PGV;
					//	band_pass_data->utc_second_final_PGV=i_fir_list->last->utc_second; //utcÊ±¼äÃë
					//	band_pass_data->utc_nanosecond_final_PGV=i_fir_list->last->utc_nanosecond; //utcÊ±¼äÄÉÃë
					//	}
					if(now_fir->band_pass_dataD[4]>band_pass_data->final_PGD)
						{
						band_pass_data->final_PGD=now_fir->band_pass_dataD[4];
						band_pass_data->utc_second_final_PGD=now_fir->utc_second; //utcÊ±¼äÃë
						band_pass_data->utc_nanosecond_final_PGD=now_fir->utc_nanosecond; //utcÊ±¼äÄÉÃë
						}

					now_fir=now_fir=now_fir->last;



					}

				*count+=1;
				*trig=2;
				}
			else
				{
				for(jjj=0;jjj<3;jjj++)
					{
					if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
						band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					if(abs(i_fir_list->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
						band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					if(abs(i_fir_list->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
						band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);

					}

				if(i_fir_list->band_pass_data[4]>band_pass_data->final_PGA)
					{
					band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
					band_pass_data->utc_second_final_PGA=i_fir_list->utc_second; //utcÊ±¼äÃë
					band_pass_data->utc_nanosecond_final_PGA=i_fir_list->utc_nanosecond; //utcÊ±¼äÄÉÃë

					}
				//else
				//	{
				//	band_pass_data->final_PGA=i_fir_list->last->final_PGA;
				//	band_pass_data->utc_second_final_PGA=i_fir_list->last->utc_second; //utcÊ±¼äÃë
				//	band_pass_data->utc_nanosecond_final_PGA=i_fir_list->last->utc_nanosecond; //utcÊ±¼äÄÉÃë
				//	}
				if(i_fir_list->band_pass_dataV[4]>band_pass_data->final_PGV)
					{
					band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
					band_pass_data->utc_second_final_PGV=i_fir_list->utc_second; //utcÊ±¼äÃë
					band_pass_data->utc_nanosecond_final_PGV=i_fir_list->utc_nanosecond; //utcÊ±¼äÄÉÃë
					}
				//else
				//	{
				//	band_pass_data->final_PGV=i_fir_list->last->final_PGV;
				//	band_pass_data->utc_second_final_PGV=i_fir_list->last->utc_second; //utcÊ±¼äÃë
				//	band_pass_data->utc_nanosecond_final_PGV=i_fir_list->last->utc_nanosecond; //utcÊ±¼äÄÉÃë
				//	}
				if(i_fir_list->band_pass_dataD[4]>band_pass_data->final_PGD)
					{
					band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
					band_pass_data->utc_second_final_PGD=i_fir_list->utc_second; //utcÊ±¼äÃë
					band_pass_data->utc_nanosecond_final_PGD=i_fir_list->utc_nanosecond; //utcÊ±¼äÄÉÃë
					}
				//else
				//	{
				//	band_pass_data->final_PGD=i_fir_list->last->final_PGD;
				//	band_pass_data->utc_second_final_PGD=i_fir_list->last->utc_second; //utcÊ±¼äÃë
				//	band_pass_data->utc_nanosecond_final_PGD=i_fir_list->last->utc_nanosecond; //utcÊ±¼äÄÉÃë
				//	}
				if(*count==timespan*50)

					{
					*count=1;
					return 2;
					}
				else
					{


					*count+=1;
					}



				}
			}
		return 1;
		}
	else if (i_fir_list->sample_rata==50&&band_pass_flag==1)
			{
			firLength=151;
			double Fir[151]={-2.8052426906829513e-03,
				-4.2393366582970269e-03,
				-3.8887138369385330e-03,
				-2.2354116003412555e-03,
				-1.7151340451976370e-03,
				-3.3681835107814504e-03,
				-5.1779067586189562e-03,
				-4.6965135173902524e-03,
				-2.5638580821051682e-03,
				-1.8818136148366425e-03,
				-3.9473893023176630e-03,
				-6.1968403681345145e-03,
				-5.5591924712764754e-03,
				-2.8602285633303683e-03,
				-1.9855715179514558e-03,
				-4.5343773820232715e-03,
				-7.2993746523036347e-03,
				-6.4757972766725895e-03,
				-3.1075377181290190e-03,
				-2.0034515060087738e-03,
				-5.1201983246674521e-03,
				-8.4924282172401180e-03,
				-7.4477448916228876e-03,
				-3.2854307785719003e-03,
				-1.9068638995382889e-03,
				-5.6956197214221181e-03,
				-9.7890130188554095e-03,
				-8.4805326328304762e-03,
				-3.3686880184671422e-03,
				-1.6587501518070553e-03,
				-6.2513201008398845e-03,
				-1.1212180130190147e-02,
				-9.5865220664507079e-03,
				-3.3245287368907092e-03,
				-1.2085331900947341e-03,
				-6.7780883098406538e-03,
				-1.2801858768458711e-02,
				-1.0789770869833983e-02,
				-3.1075700373275851e-03,
				-4.8269424897207818e-04,
				-7.2670234585519751e-03,
				-1.4627552535563389e-02,
				-1.2135072981765502e-02,
				-2.6498708200075548e-03,
				6.3396297658225372e-04,
				-7.7097304696529074e-03,
				-1.6813951744110978e-02,
				-1.3706460562373948e-02,
				-1.8396919533613628e-03,
				2.3388911427624061e-03,
				-8.0985063426770101e-03,
				-1.9598293978969096e-02,
				-1.5669566680424962e-02,
				-4.7103250693004398e-04,
				5.0106092712312988e-03,
				-8.4265124453908481e-03,
				-2.3477962536707364e-02,
				-1.8384256507005932e-02,
				1.8961989182070325e-03,
				9.4930912865623281e-03,
				-8.6879284730553841e-03,
				-2.9673940083844816e-02,
				-2.2776743005803374e-02,
				6.4259738795488016e-03,
				1.8156146307088068e-02,
				-8.8780841635862553e-03,
				-4.2138499851260856e-02,
				-3.2106505797306333e-02,
				1.7595589150292312e-02,
				4.1258267838167328e-02,
				-8.9935654105577235e-03,
				-8.4619383336774115e-02,
				-7.1400968296348372e-02,
				8.4628282316732584e-02,
				2.9419739638965176e-01,
				3.9169381130492797e-01,
				2.9419739638965176e-01,
				8.4628282316732584e-02,
				-7.1400968296348372e-02,
				-8.4619383336774115e-02,
				-8.9935654105577252e-03,
				4.1258267838167349e-02,
				1.7595589150292319e-02,
				-3.2106505797306346e-02,
				-4.2138499851260863e-02,
				-8.8780841635862588e-03,
				1.8156146307088072e-02,
				6.4259738795488016e-03,
				-2.2776743005803384e-02,
				-2.9673940083844830e-02,
				-8.6879284730553893e-03,
				9.4930912865623333e-03,
				1.8961989182070343e-03,
				-1.8384256507005946e-02,
				-2.3477962536707378e-02,
				-8.4265124453908533e-03,
				5.0106092712313005e-03,
				-4.7103250693004398e-04,
				-1.5669566680424969e-02,
				-1.9598293978969110e-02,
				-8.0985063426770188e-03,
				2.3388911427624079e-03,
				-1.8396919533613663e-03,
				-1.3706460562373958e-02,
				-1.6813951744110992e-02,
				-7.7097304696529126e-03,
				6.3396297658225372e-04,
				-2.6498708200075574e-03,
				-1.2135072981765515e-02,
				-1.4627552535563406e-02,
				-7.2670234585519829e-03,
				-4.8269424897207731e-04,
				-3.1075700373275877e-03,
				-1.0789770869833994e-02,
				-1.2801858768458723e-02,
				-6.7780883098406616e-03,
				-1.2085331900947350e-03,
				-3.3245287368907140e-03,
				-9.5865220664507183e-03,
				-1.1212180130190158e-02,
				-6.2513201008398932e-03,
				-1.6587501518070587e-03,
				-3.3686880184671461e-03,
				-8.4805326328304884e-03,
				-9.7890130188554234e-03,
				-5.6956197214221250e-03,
				-1.9068638995382910e-03,
				-3.2854307785719064e-03,
				-7.4477448916228997e-03,
				-8.4924282172401319e-03,
				-5.1201983246674599e-03,
				-2.0034515060087777e-03,
				-3.1075377181290238e-03,
				-6.4757972766725999e-03,
				-7.2993746523036451e-03,
				-4.5343773820232776e-03,
				-1.9855715179514588e-03,
				-2.8602285633303726e-03,
				-5.5591924712764867e-03,
				-6.1968403681345232e-03,
				-3.9473893023176700e-03,
				-1.8818136148366458e-03,
				-2.5638580821051716e-03,
				-4.6965135173902611e-03,
				-5.1779067586189640e-03,
				-3.3681835107814543e-03,
				-1.7151340451976407e-03,
				-2.2354116003412351e-03,
				-3.8887138369385656e-03,
				-4.2393366582969870e-03,
				-2.8052426906829439e-03,
				};
			if(*trig!=0)
				{
				//if(PGV_type==1)
				//	{
				//	datamid=0.0;
				//	now_fir=i_fir_list;
				//	for(int i=0;i<firLength;i++)
				//		{
				//		datamid=datamid+now_fir->dataV[4]*Fir[i];
				//		now_fir=now_fir->last;
				//		}
				//	i_fir_list->band_pass_dataV[4]=datamid;



				//	datamid=0.0;
				//	now_fir=i_fir_list;
				//	for(int i=0;i<firLength;i++)
				//		{
				//		datamid=datamid+now_fir->dataD[4]*Fir[i];
				//		now_fir=now_fir->last;
				//		}
				//	i_fir_list->band_pass_dataD[4]=datamid;

				//	}
				//else if(PGV_type==2)
				//	{
				//	for(int j=0;j<3;j++)
				//		{


				//		datamid=0.0;
				//		now_fir=i_fir_list;
				//		for(int i=0;i<firLength;i++)
				//			{
				//			datamid=datamid+now_fir->dataV[j]*Fir[i];
				//			now_fir=now_fir->last;
				//			}
				//		i_fir_list->band_pass_dataV[j]=datamid;

				//		}
				//	i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
				//	for(int j=0;j<3;j++)
				//		{


				//		datamid=0.0;
				//		now_fir=i_fir_list;
				//		for(int i=0;i<firLength;i++)
				//			{
				//			datamid=datamid+now_fir->dataD[j]*Fir[i];
				//			now_fir=now_fir->last;
				//			}
				//		i_fir_list->band_pass_dataD[j]=datamid;
				//		}
				//	i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
				//	}




				if(*trig==1)
					{
					for(jjj=0;jjj<3;jjj++)
						{
						band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
						band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
						band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
						}
					band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
					band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
					band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];

					now_fir=i_fir_list->last;
					for(iii=1;iii<i_sample_rata*3;iii++)
						{
						for(jjj=0;jjj<3;jjj++)
							{
							if(abs(now_fir->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
								band_pass_data->final_PGA_component[jjj]=abs(now_fir->band_pass_data[jjj]);
							if(abs(now_fir->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
								band_pass_data->final_PGV_component[jjj]=abs(now_fir->band_pass_dataV[jjj]);
							if(abs(now_fir->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
								band_pass_data->final_PGD_component[jjj]=abs(now_fir->band_pass_dataD[jjj]);

							}
						if(now_fir->band_pass_data[4]>band_pass_data->final_PGA)
							{
							band_pass_data->final_PGA=now_fir->band_pass_data[4];
							band_pass_data->utc_second_final_PGA=now_fir->utc_second; //utcÊ±¼äÃë
							band_pass_data->utc_nanosecond_final_PGA=now_fir->utc_nanosecond; //utcÊ±¼äÄÉÃë

							}
						//else
						//	{
						//	band_pass_data->final_PGA=i_fir_list->last->final_PGA;
						//	band_pass_data->utc_second_final_PGA=i_fir_list->last->utc_second; //utcÊ±¼äÃë
						//	band_pass_data->utc_nanosecond_final_PGA=i_fir_list->last->utc_nanosecond; //utcÊ±¼äÄÉÃë
						//	}
						if(now_fir->band_pass_dataV[4]>band_pass_data->final_PGV)
							{
							band_pass_data->final_PGV=now_fir->band_pass_dataV[4];
							band_pass_data->utc_second_final_PGV=now_fir->utc_second; //utcÊ±¼äÃë
							band_pass_data->utc_nanosecond_final_PGV=now_fir->utc_nanosecond; //utcÊ±¼äÄÉÃë
							}
						//else
						//	{
						//	band_pass_data->final_PGV=i_fir_list->last->final_PGV;
						//	band_pass_data->utc_second_final_PGV=i_fir_list->last->utc_second; //utcÊ±¼äÃë
						//	band_pass_data->utc_nanosecond_final_PGV=i_fir_list->last->utc_nanosecond; //utcÊ±¼äÄÉÃë
						//	}
						if(now_fir->band_pass_dataD[4]>band_pass_data->final_PGD)
							{
							band_pass_data->final_PGD=now_fir->band_pass_dataD[4];
							band_pass_data->utc_second_final_PGD=now_fir->utc_second; //utcÊ±¼äÃë
							band_pass_data->utc_nanosecond_final_PGD=now_fir->utc_nanosecond; //utcÊ±¼äÄÉÃë
							}

						now_fir=now_fir=now_fir->last;



						}





					*count+=1;
					*trig=2;
					}
				else
					{
					for(jjj=0;jjj<3;jjj++)
						{
						if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
							band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
						if(abs(i_fir_list->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
							band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
						if(abs(i_fir_list->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
							band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
						}




					if(i_fir_list->band_pass_data[4]>band_pass_data->final_PGA)
						{
						band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
						band_pass_data->utc_second_final_PGA=i_fir_list->utc_second; //utcÊ±¼äÃë
						band_pass_data->utc_nanosecond_final_PGA=i_fir_list->utc_nanosecond; //utcÊ±¼äÄÉÃë

						}
					//else
					//	{
					//	band_pass_data->final_PGA=i_fir_list->last->final_PGA;
					//	band_pass_data->utc_second_final_PGA=i_fir_list->last->utc_second; //utcÊ±¼äÃë
					//	band_pass_data->utc_nanosecond_final_PGA=i_fir_list->last->utc_nanosecond; //utcÊ±¼äÄÉÃë
					//	}
					if(i_fir_list->band_pass_dataV[4]>band_pass_data->final_PGV)
						{
						band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
						band_pass_data->utc_second_final_PGV=i_fir_list->utc_second; //utcÊ±¼äÃë
						band_pass_data->utc_nanosecond_final_PGV=i_fir_list->utc_nanosecond; //utcÊ±¼äÄÉÃë
						}
					//else
					//	{
					//	band_pass_data->final_PGV=i_fir_list->last->final_PGV;
					//	band_pass_data->utc_second_final_PGV=i_fir_list->last->utc_second; //utcÊ±¼äÃë
					//	band_pass_data->utc_nanosecond_final_PGV=i_fir_list->last->utc_nanosecond; //utcÊ±¼äÄÉÃë
					//	}
					if(i_fir_list->band_pass_dataD[4]>band_pass_data->final_PGD)
						{
						band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
						band_pass_data->utc_second_final_PGD=i_fir_list->utc_second; //utcÊ±¼äÃë
						band_pass_data->utc_nanosecond_final_PGD=i_fir_list->utc_nanosecond; //utcÊ±¼äÄÉÃë
						}
					//else
					//	{
					//	band_pass_data->final_PGD=i_fir_list->last->final_PGD;
					//	band_pass_data->utc_second_final_PGD=i_fir_list->last->utc_second; //utcÊ±¼äÃë
					//	band_pass_data->utc_nanosecond_final_PGD=i_fir_list->last->utc_nanosecond; //utcÊ±¼äÄÉÃë
					//	}
					if(*count==timespan*50)

						{
						*count=1;
						return 2;
						}
					else
						{


						*count+=1;
						}



					}
				}
			return 1;
			}
	else if(i_fir_list->sample_rata==100&&band_pass_flag==0)
		{
		firLength=191;
		double Fir[191]={-1.0096108503799409e-03,
			-1.3950482601184145e-03,
			-2.2527488512072823e-03,
			-2.9478325266950626e-03,
			-2.9241282941009309e-03,
			-2.1964877583498382e-03,
			-1.3932186866449717e-03,
			-1.2683702309322061e-03,
			-2.0587294816955936e-03,
			-3.2307108495224480e-03,
			-3.8728518839418980e-03,
			-3.4512139742405856e-03,
			-2.3045215990983815e-03,
			-1.4270997345429326e-03,
			-1.6661388536950924e-03,
			-2.9780040916341042e-03,
			-4.3915096269727697e-03,
			-4.7685469089617048e-03,
			-3.7708238360917514e-03,
			-2.2154696854772564e-03,
			-1.4639880273141859e-03,
			-2.2943598211664952e-03,
			-4.1868456476722750e-03,
			-5.6701595913976281e-03,
			-5.5118721440431517e-03,
			-3.7942060764075075e-03,
			-1.9423711063670419e-03,
			-1.6026343679009464e-03,
			-3.2475373165740244e-03,
			-5.6846723133800129e-03,
			-6.9564131921419870e-03,
			-5.9605784961465312e-03,
			-3.4555395583318526e-03,
			-1.5446848893690436e-03,
			-1.9729728155626920e-03,
			-4.6090756549750133e-03,
			-7.4249335517157806e-03,
			-8.0957173947760943e-03,
			-5.9658402480322953e-03,
			-2.7259882160986819e-03,
			-1.1326443571281007e-03,
			-2.7279163951726233e-03,
			-6.4379538633729206e-03,
			-9.3078652451388747e-03,
			-8.8937043531173623e-03,
			-5.3843686320969916e-03,
			-1.6236386602042371e-03,
			-8.6795329695463013e-04,
			-4.0358532878403434e-03,
			-8.7602540790057502e-03,
			-1.1177665546498936e-02,
			-9.1197841612625230e-03,
			-4.0841129832286773e-03,
			-2.1710181588843413e-04,
			-9.6506787169073674e-04,
			-6.0820299780298100e-03,
			-1.1571060989487639e-02,
			-1.2821283663388564e-02,
			-8.4992305065876590e-03,
			-1.9327687604891049e-03,
			1.3784923032710335e-03,
			-1.7050246429269466e-03,
			-9.0969663617697753e-03,
			-1.4856515017832844e-02,
			-1.3958829431456619e-02,
			-6.6666698386317613e-03,
			1.2562792472859616e-03,
			3.0131140370235859e-03,
			-3.4963797956000272e-03,
			-1.3462418900154581e-02,
			-1.8662168940531118e-02,
			-1.4193048970612182e-02,
			-2.9949266075571710e-03,
			5.9029683387124953e-03,
			4.5197236235567867e-03,
			-7.1079148261703534e-03,
			-2.0084767678293092e-02,
			-2.3311188040322776e-02,
			-1.2784038623879721e-02,
			4.0762178712041601e-03,
			1.3346915816899603e-02,
			5.7359043739684543e-03,
			-1.4720837908786619e-02,
			-3.2099574332974203e-02,
			-3.0404413640455791e-02,
			-7.3824560015768315e-03,
			2.0903522723558492e-02,
			3.0096061155356627e-02,
			6.5259347250955285e-03,
			-3.8462292200619481e-02,
			-7.0869487224785352e-02,
			-5.4107874682352952e-02,
			2.5259979404526650e-02,
			1.4370865641013861e-01,
			2.4982563870147181e-01,
			2.9230819959096299e-01,
			2.4982563870147181e-01,
			1.4370865641013864e-01,
			2.5259979404526654e-02,
			-5.4107874682352966e-02,
			-7.0869487224785366e-02,
			-3.8462292200619495e-02,
			6.5259347250955302e-03,
			3.0096061155356641e-02,
			2.0903522723558506e-02,
			-7.3824560015768349e-03,
			-3.0404413640455815e-02,
			-3.2099574332974223e-02,
			-1.4720837908786630e-02,
			5.7359043739684604e-03,
			1.3346915816899613e-02,
			4.0762178712041627e-03,
			-1.2784038623879739e-02,
			-2.3311188040322804e-02,
			-2.0084767678293116e-02,
			-7.1079148261703612e-03,
			4.5197236235567911e-03,
			5.9029683387125048e-03,
			-2.9949266075571736e-03,
			-1.4193048970612207e-02,
			-1.8662168940531153e-02,
			-1.3462418900154604e-02,
			-3.4963797956000320e-03,
			3.0131140370235911e-03,
			1.2562792472859642e-03,
			-6.6666698386317743e-03,
			-1.3958829431456649e-02,
			-1.4856515017832875e-02,
			-9.0969663617697927e-03,
			-1.7050246429269492e-03,
			1.3784923032710370e-03,
			-1.9327687604891093e-03,
			-8.4992305065876780e-03,
			-1.2821283663388595e-02,
			-1.1571060989487670e-02,
			-6.0820299780298256e-03,
			-9.6506787169073935e-04,
			-2.1710181588843587e-04,
			-4.0841129832286877e-03,
			-9.1197841612625508e-03,
			-1.1177665546498967e-02,
			-8.7602540790057779e-03,
			-4.0358532878403556e-03,
			-8.6795329695463187e-04,
			-1.6236386602042424e-03,
			-5.3843686320970089e-03,
			-8.8937043531173883e-03,
			-9.3078652451389042e-03,
			-6.4379538633729406e-03,
			-2.7279163951726333e-03,
			-1.1326443571281050e-03,
			-2.7259882160986914e-03,
			-5.9658402480323187e-03,
			-8.0957173947761238e-03,
			-7.4249335517158083e-03,
			-4.6090756549750297e-03,
			-1.9729728155626998e-03,
			-1.5446848893690497e-03,
			-3.4555395583318661e-03,
			-5.9605784961465555e-03,
			-6.9564131921420139e-03,
			-5.6846723133800337e-03,
			-3.2475373165740378e-03,
			-1.6026343679009538e-03,
			-1.9423711063670500e-03,
			-3.7942060764075232e-03,
			-5.5118721440431751e-03,
			-5.6701595913976532e-03,
			-4.1868456476722923e-03,
			-2.2943598211665065e-03,
			-1.4639880273141920e-03,
			-2.2154696854772668e-03,
			-3.7708238360917696e-03,
			-4.7685469089617273e-03,
			-4.3915096269727888e-03,
			-2.9780040916341185e-03,
			-1.6661388536951005e-03,
			-1.4270997345429397e-03,
			-2.3045215990983915e-03,
			-3.4512139742406017e-03,
			-3.8728518839419141e-03,
			-3.2307108495224631e-03,
			-2.0587294816956044e-03,
			-1.2683702309322122e-03,
			-1.3932186866449782e-03,
			-2.1964877583498486e-03,
			-2.9241282941009409e-03,
			-2.9478325266950032e-03,
			-2.2527488512072988e-03,
			-1.3950482601184288e-03,
			-1.0096108503799466e-03,



			};
		if(*trig!=0)
			{


			//if(PGV_type==1)
			//	{
			//	datamid=0.0;
			//	now_fir=i_fir_list;
			//	for(int i=0;i<firLength;i++)
			//		{
			//		datamid=datamid+now_fir->dataV[4]*Fir[i];
			//		now_fir=now_fir->last;
			//		}
			//	i_fir_list->band_pass_dataV[4]=datamid;



			//	datamid=0.0;
			//	now_fir=i_fir_list;
			//	for(int i=0;i<firLength;i++)
			//		{
			//		datamid=datamid+now_fir->dataD[4]*Fir[i];
			//		now_fir=now_fir->last;
			//		}
			//	i_fir_list->band_pass_dataD[4]=datamid;

			//	}
			//else if(PGV_type==2)
			//	{
			//	for(int j=0;j<3;j++)
			//		{


			//		datamid=0.0;
			//		now_fir=i_fir_list;
			//		for(int i=0;i<firLength;i++)
			//			{
			//			datamid=datamid+now_fir->dataV[j]*Fir[i];
			//			now_fir=now_fir->last;
			//			}
			//		i_fir_list->band_pass_dataV[j]=datamid;

			//		}
			//	i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
			//	for(int j=0;j<3;j++)
			//		{


			//		datamid=0.0;
			//		now_fir=i_fir_list;
			//		for(int i=0;i<firLength;i++)
			//			{
			//			datamid=datamid+now_fir->dataD[j]*Fir[i];
			//			now_fir=now_fir->last;
			//			}
			//		i_fir_list->band_pass_dataD[j]=datamid;
			//		}
			//	i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
			//	}

			if(*trig==1)
				{
				for(jjj=0;jjj<3;jjj++)
					{
					band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}
				band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
				band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
				band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];

				now_fir=i_fir_list->last;
				for(iii=1;iii<i_sample_rata*3;iii++)
					{
					for(jjj=0;jjj<3;jjj++)
						{
						if(abs(now_fir->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
							band_pass_data->final_PGA_component[jjj]=abs(now_fir->band_pass_data[jjj]);
						if(abs(now_fir->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
							band_pass_data->final_PGV_component[jjj]=abs(now_fir->band_pass_dataV[jjj]);
						if(abs(now_fir->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
							band_pass_data->final_PGD_component[jjj]=abs(now_fir->band_pass_dataD[jjj]);
						}

					if(now_fir->band_pass_data[4]>band_pass_data->final_PGA)
						{
						band_pass_data->final_PGA=now_fir->band_pass_data[4];
						band_pass_data->utc_second_final_PGA=now_fir->utc_second; //utcÊ±¼äÃë
						band_pass_data->utc_nanosecond_final_PGA=now_fir->utc_nanosecond; //utcÊ±¼äÄÉÃë

						}
					//else
					//	{
					//	band_pass_data->final_PGA=i_fir_list->last->final_PGA;
					//	band_pass_data->utc_second_final_PGA=i_fir_list->last->utc_second; //utcÊ±¼äÃë
					//	band_pass_data->utc_nanosecond_final_PGA=i_fir_list->last->utc_nanosecond; //utcÊ±¼äÄÉÃë
					//	}
					if(now_fir->band_pass_dataV[4]>band_pass_data->final_PGV)
						{
						band_pass_data->final_PGV=now_fir->band_pass_dataV[4];
						band_pass_data->utc_second_final_PGV=now_fir->utc_second; //utcÊ±¼äÃë
						band_pass_data->utc_nanosecond_final_PGV=now_fir->utc_nanosecond; //utcÊ±¼äÄÉÃë
						}
					//else
					//	{
					//	band_pass_data->final_PGV=i_fir_list->last->final_PGV;
					//	band_pass_data->utc_second_final_PGV=i_fir_list->last->utc_second; //utcÊ±¼äÃë
					//	band_pass_data->utc_nanosecond_final_PGV=i_fir_list->last->utc_nanosecond; //utcÊ±¼äÄÉÃë
					//	}
					if(now_fir->band_pass_dataD[4]>band_pass_data->final_PGD)
						{
						band_pass_data->final_PGD=now_fir->band_pass_dataD[4];
						band_pass_data->utc_second_final_PGD=now_fir->utc_second; //utcÊ±¼äÃë
						band_pass_data->utc_nanosecond_final_PGD=now_fir->utc_nanosecond; //utcÊ±¼äÄÉÃë
						}

					now_fir=now_fir=now_fir->last;



					}




				*trig=2;
				*count+=1;
				}
			else
				{
				for(jjj=0;jjj<3;jjj++)
					{
					if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
						band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					if(abs(i_fir_list->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
						band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					if(abs(i_fir_list->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
						band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}

				if(i_fir_list->band_pass_data[4]>band_pass_data->final_PGA)
					{
					band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
					band_pass_data->utc_second_final_PGA=i_fir_list->utc_second; //utcÊ±¼äÃë
					band_pass_data->utc_nanosecond_final_PGA=i_fir_list->utc_nanosecond; //utcÊ±¼äÄÉÃë

					}
				if(i_fir_list->band_pass_dataV[4]>band_pass_data->final_PGV)
					{
					band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
					band_pass_data->utc_second_final_PGV=i_fir_list->utc_second; //utcÊ±¼äÃë
					band_pass_data->utc_nanosecond_final_PGV=i_fir_list->utc_nanosecond; //utcÊ±¼äÄÉÃë
					}
				if(i_fir_list->band_pass_dataD[4]>band_pass_data->final_PGD)
					{
					band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
					band_pass_data->utc_second_final_PGD=i_fir_list->utc_second; //utcÊ±¼äÃë
					band_pass_data->utc_nanosecond_final_PGD=i_fir_list->utc_nanosecond; //utcÊ±¼äÄÉÃë
					}
				if(*count==timespan*100)

					{
					*count=1;
					return 2;
					}
				else
					{


					*count+=1;
					}



				}
			}
		return 1;
		}
	else if(i_fir_list->sample_rata==100&&band_pass_flag==1)
				{
				firLength=301;
				double Fir[301]={-1.3934901977829615e-03,
					-1.8159417519245753e-03,
					-2.1047061992379365e-03,
					-2.1499567281675455e-03,
					-1.9319560065597574e-03,
					-1.5336077824486048e-03,
					-1.1131764610959451e-03,
					-8.4586773282764453e-04,
					-8.5571492559512663e-04,
					-1.1641429939370940e-03,
					-1.6763388826177095e-03,
					-2.2127045829863049e-03,
					-2.5752520825855834e-03,
					-2.6245209995463341e-03,
					-2.3372518475216625e-03,
					-1.8211766253946077e-03,
					-1.2790312324263129e-03,
					-9.3350462293830287e-04,
					-9.4077162689895221e-04,
					-1.3260577655623985e-03,
					-1.9675936202030414e-03,
					-2.6375233932370771e-03,
					-3.0863445849885914e-03,
					-3.1397319857095246e-03,
					-2.7703067122125825e-03,
					-2.1150445844176149e-03,
					-1.4290329171544275e-03,
					-9.9084931593346887e-04,
					-9.9450274977262157e-04,
					-1.4697037836401406e-03,
					-2.2629691037629874e-03,
					-3.0896434805398041e-03,
					-3.6395636772003424e-03,
					-3.6973125284921167e-03,
					-3.2306007769072587e-03,
					-2.4107945111442089e-03,
					-1.5546360967761310e-03,
					-1.0065972753527060e-03,
					-1.0053738031440373e-03,
					-1.5860839569270741e-03,
					-2.5579388666770995e-03,
					-3.5692958764463449e-03,
					-4.2383209384534298e-03,
					-4.3009144849360951e-03,
					-3.7187912246025431e-03,
					-2.7038140209237104e-03,
					-1.6456047543273620e-03,
					-9.6672554881740698e-04,
					-9.5902862506833195e-04,
					-1.6643298430027724e-03,
					-2.8478287426786748e-03,
					-4.0784458396371038e-03,
					-4.8890672246237271e-03,
					-4.9573843372280107e-03,
					-4.2375689803696064e-03,
					-2.9893918921230977e-03,
					-1.6892661355065719e-03,
					-8.5315338472186943e-04,
					-8.3687322528905046e-04,
					-1.6908134983387932e-03,
					-3.1279156197627396e-03,
					-4.6219899287065240e-03,
					-5.6032676672302818e-03,
					-5.6788440317752488e-03,
					-4.7930527289633748e-03,
					-3.2628185712932083e-03,
					-1.6691643874906282e-03,
					-6.4136490201577951e-04,
					-6.1355241309235965e-04,
					-1.6475301337705620e-03,
					-3.3935290783997270e-03,
					-5.2097909555231794e-03,
					-6.4008237800856037e-03,
					-6.4863194218901269e-03,
					-5.3972072803381739e-03,
					-3.5194883154958849e-03,
					-1.5625414496258179e-03,
					-2.9599484306628491e-04,
					-2.5223929370514470e-04,
					-1.5090285192966766e-03,
					-3.6401534025372944e-03,
					-5.8603941401391838e-03,
					-7.3164248762943827e-03,
					-7.4165259229421188e-03,
					-6.0723665880914419e-03,
					-3.7550004343177984e-03,
					-1.3353600892311249e-03,
					2.3788693116028032e-04,
					3.0473249946160190e-04,
					-1.2362210827844447e-03,
					-3.8635274170506517e-03,
					-6.6084146410208293e-03,
					-8.4123588516069620e-03,
					-8.5356836076430822e-03,
					-6.8604886253879381e-03,
					-3.9652570935789742e-03,
					-9.3168387924516256e-04,
					1.0534705820681239e-03,
					1.1561602642038765e-03,
					-7.6279308836732713e-04,
					-4.0597396392069423e-03,
					-7.5208401297042239e-03,
					-9.8072001726968727e-03,
					-9.9708294562862142e-03,
					-7.8443429100596568e-03,
					-4.1465552109397862e-03,
					-2.4844224798785294e-04,
					2.3271192130121512e-03,
					2.4913851040193188e-03,
					3.8417223566559994e-05,
					-4.2253163338121661e-03,
					-8.7382536865734783e-03,
					-1.1749625514224836e-02,
					-1.1991733098263043e-02,
					-9.2038390171244738e-03,
					-4.2956701090024274e-03,
					9.3449579474537436e-04,
					4.4450971219227456e-03,
					4.7325123287797061e-03,
					1.4542781444556027e-03,
					-4.3573002295476306e-03,
					-1.0601141815511635e-02,
					-1.4850187602870650e-02,
					-1.5274622891964655e-02,
					-1.1402122422123587e-02,
					-4.4099287906940446e-03,
					3.1992627279992338e-03,
					8.4610861449535505e-03,
					9.0647035001510286e-03,
					4.3128967563563032e-03,
					-4.4533178832161045e-03,
					-1.4174787943096560e-02,
					-2.1085357894361143e-02,
					-2.2096384652325083e-02,
					-1.6069207429197555e-02,
					-4.4872709594348387e-03,
					8.7849658638558172e-03,
					1.8665591162767350e-02,
					2.0618219193568481e-02,
					1.2446574643172092e-02,
					-4.5116339631119861e-03,
					-2.5272940970094884e-02,
					-4.2331277335992394e-02,
					-4.7764061273754821e-02,
					-3.5721208137345535e-02,
					-4.5262962159261927e-03,
					4.2308025951629580e-02,
					9.6544322689801162e-02,
					1.4711299332650787e-01,
					1.8293486636295642e-01,
					1.9587085363289147e-01,
					1.8293486636295639e-01,
					1.4711299332650785e-01,
					9.6544322689801135e-02,
					4.2308025951629566e-02,
					-4.5262962159261918e-03,
					-3.5721208137345535e-02,
					-4.7764061273754814e-02,
					-4.2331277335992387e-02,
					-2.5272940970094880e-02,
					-4.5116339631119853e-03,
					1.2446574643172089e-02,
					2.0618219193568474e-02,
					1.8665591162767347e-02,
					8.7849658638558138e-03,
					-4.4872709594348361e-03,
					-1.6069207429197544e-02,
					-2.2096384652325073e-02,
					-2.1085357894361126e-02,
					-1.4174787943096552e-02,
					-4.4533178832161010e-03,
					4.3128967563563006e-03,
					9.0647035001510234e-03,
					8.4610861449535436e-03,
					3.1992627279992312e-03,
					-4.4099287906940411e-03,
					-1.1402122422123580e-02,
					-1.5274622891964643e-02,
					-1.4850187602870640e-02,
					-1.0601141815511625e-02,
					-4.3573002295476280e-03,
					1.4542781444556018e-03,
					4.7325123287797017e-03,
					4.4450971219227413e-03,
					9.3449579474537349e-04,
					-4.2956701090024231e-03,
					-9.2038390171244669e-03,
					-1.1991733098263025e-02,
					-1.1749625514224822e-02,
					-8.7382536865734661e-03,
					-4.2253163338121600e-03,
					3.8417223566559994e-05,
					2.4913851040193153e-03,
					2.3271192130121469e-03,
					-2.4844224798785381e-04,
					-4.1465552109397810e-03,
					-7.8443429100596446e-03,
					-9.9708294562862020e-03,
					-9.8072001726968588e-03,
					-7.5208401297042135e-03,
					-4.0597396392069380e-03,
					-7.6279308836732583e-04,
					1.1561602642038756e-03,
					1.0534705820681221e-03,
					-9.3168387924516213e-04,
					-3.9652570935789682e-03,
					-6.8604886253879251e-03,
					-8.5356836076430683e-03,
					-8.4123588516069481e-03,
					-6.6084146410208154e-03,
					-3.8635274170506460e-03,
					-1.2362210827844425e-03,
					3.0473249946160017e-04,
					2.3788693116027988e-04,
					-1.3353600892311228e-03,
					-3.7550004343177915e-03,
					-6.0723665880914298e-03,
					-7.4165259229421032e-03,
					-7.3164248762943671e-03,
					-5.8603941401391716e-03,
					-3.6401534025372871e-03,
					-1.5090285192966731e-03,
					-2.5223929370514383e-04,
					-2.9599484306628491e-04,
					-1.5625414496258144e-03,
					-3.5194883154958771e-03,
					-5.3972072803381609e-03,
					-6.4863194218901122e-03,
					-6.4008237800855889e-03,
					-5.2097909555231664e-03,
					-3.3935290783997183e-03,
					-1.6475301337705575e-03,
					-6.1355241309235748e-04,
					-6.4136490201577821e-04,
					-1.6691643874906245e-03,
					-3.2628185712932005e-03,
					-4.7930527289633627e-03,
					-5.6788440317752332e-03,
					-5.6032676672302679e-03,
					-4.6219899287065127e-03,
					-3.1279156197627305e-03,
					-1.6908134983387882e-03,
					-8.3687322528904872e-04,
					-8.5315338472186726e-04,
					-1.6892661355065672e-03,
					-2.9893918921230908e-03,
					-4.2375689803695943e-03,
					-4.9573843372279977e-03,
					-4.8890672246237124e-03,
					-4.0784458396370933e-03,
					-2.8478287426786674e-03,
					-1.6643298430027674e-03,
					-9.5902862506832913e-04,
					-9.6672554881740416e-04,
					-1.6456047543273575e-03,
					-2.7038140209237008e-03,
					-3.7187912246025327e-03,
					-4.3009144849360829e-03,
					-4.2383209384534160e-03,
					-3.5692958764463336e-03,
					-2.5579388666770917e-03,
					-1.5860839569270702e-03,
					-1.0053738031440341e-03,
					-1.0065972753527028e-03,
					-1.5546360967761263e-03,
					-2.4107945111442020e-03,
					-3.2306007769072496e-03,
					-3.6973125284921046e-03,
					-3.6395636772003298e-03,
					-3.0896434805397937e-03,
					-2.2629691037629792e-03,
					-1.4697037836401362e-03,
					-9.9450274977261875e-04,
					-9.9084931593346518e-04,
					-1.4290329171544223e-03,
					-2.1150445844176089e-03,
					-2.7703067122125742e-03,
					-3.1397319857095142e-03,
					-3.0863445849885810e-03,
					-2.6375233932370672e-03,
					-1.9675936202030344e-03,
					-1.3260577655623941e-03,
					-9.4077162689894884e-04,
					-9.3350462293829940e-04,
					-1.2790312324263090e-03,
					-1.8211766253946012e-03,
					-2.3372518475216551e-03,
					-2.6245209995463237e-03,
					-2.5752520825855730e-03,
					-2.2127045829862962e-03,
					-1.6763388826177036e-03,
					-1.1641429939370888e-03,
					-8.5571492559512359e-04,
					-8.4586773282764138e-04,
					-1.1131764610959410e-03,
					-1.5336077824486000e-03,
					-1.9319560065597509e-03,
					-2.1499567281675781e-03,
					-2.1047061992379612e-03,
					-1.8159417519245733e-03,
					-1.3934901977829676e-03,



					};
				if(*trig!=0)
					{


					//if(PGV_type==1)
					//	{
					//	datamid=0.0;
					//	now_fir=i_fir_list;
					//	for(int i=0;i<firLength;i++)
					//		{
					//		datamid=datamid+now_fir->dataV[4]*Fir[i];
					//		now_fir=now_fir->last;
					//		}
					//	i_fir_list->band_pass_dataV[4]=datamid;



					//	datamid=0.0;
					//	now_fir=i_fir_list;
					//	for(int i=0;i<firLength;i++)
					//		{
					//		datamid=datamid+now_fir->dataD[4]*Fir[i];
					//		now_fir=now_fir->last;
					//		}
					//	i_fir_list->band_pass_dataD[4]=datamid;

					//	}
					//else if(PGV_type==2)
					//	{
					//	for(int j=0;j<3;j++)
					//		{


					//		datamid=0.0;
					//		now_fir=i_fir_list;
					//		for(int i=0;i<firLength;i++)
					//			{
					//			datamid=datamid+now_fir->dataV[j]*Fir[i];
					//			now_fir=now_fir->last;
					//			}
					//		i_fir_list->band_pass_dataV[j]=datamid;

					//		}
					//	i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
					//	for(int j=0;j<3;j++)
					//		{


					//		datamid=0.0;
					//		now_fir=i_fir_list;
					//		for(int i=0;i<firLength;i++)
					//			{
					//			datamid=datamid+now_fir->dataD[j]*Fir[i];
					//			now_fir=now_fir->last;
					//			}
					//		i_fir_list->band_pass_dataD[j]=datamid;
					//		}
					//	i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
					//	}

					if(*trig==1)
						{
						for(jjj=0;jjj<3;jjj++)
							{
							band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
							band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
							band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
							}
						band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
						band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
						band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];

						now_fir=i_fir_list->last;
						for(iii=1;iii<i_sample_rata*3;iii++)
							{
							for(jjj=0;jjj<3;jjj++)
								{
								if(abs(now_fir->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
									band_pass_data->final_PGA_component[jjj]=abs(now_fir->band_pass_data[jjj]);
								if(abs(now_fir->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
									band_pass_data->final_PGV_component[jjj]=abs(now_fir->band_pass_dataV[jjj]);
								if(abs(now_fir->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
									band_pass_data->final_PGD_component[jjj]=abs(now_fir->band_pass_dataD[jjj]);
								}

							if(now_fir->band_pass_data[4]>band_pass_data->final_PGA)
								{
								band_pass_data->final_PGA=now_fir->band_pass_data[4];
								band_pass_data->utc_second_final_PGA=now_fir->utc_second; //utcÊ±¼äÃë
								band_pass_data->utc_nanosecond_final_PGA=now_fir->utc_nanosecond; //utcÊ±¼äÄÉÃë

								}
							//else
							//	{
							//	band_pass_data->final_PGA=i_fir_list->last->final_PGA;
							//	band_pass_data->utc_second_final_PGA=i_fir_list->last->utc_second; //utcÊ±¼äÃë
							//	band_pass_data->utc_nanosecond_final_PGA=i_fir_list->last->utc_nanosecond; //utcÊ±¼äÄÉÃë
							//	}
							if(now_fir->band_pass_dataV[4]>band_pass_data->final_PGV)
								{
								band_pass_data->final_PGV=now_fir->band_pass_dataV[4];
								band_pass_data->utc_second_final_PGV=now_fir->utc_second; //utcÊ±¼äÃë
								band_pass_data->utc_nanosecond_final_PGV=now_fir->utc_nanosecond; //utcÊ±¼äÄÉÃë
								}
							//else
							//	{
							//	band_pass_data->final_PGV=i_fir_list->last->final_PGV;
							//	band_pass_data->utc_second_final_PGV=i_fir_list->last->utc_second; //utcÊ±¼äÃë
							//	band_pass_data->utc_nanosecond_final_PGV=i_fir_list->last->utc_nanosecond; //utcÊ±¼äÄÉÃë
							//	}
							if(now_fir->band_pass_dataD[4]>band_pass_data->final_PGD)
								{
								band_pass_data->final_PGD=now_fir->band_pass_dataD[4];
								band_pass_data->utc_second_final_PGD=now_fir->utc_second; //utcÊ±¼äÃë
								band_pass_data->utc_nanosecond_final_PGD=now_fir->utc_nanosecond; //utcÊ±¼äÄÉÃë
								}

							now_fir=now_fir=now_fir->last;



							}



						*trig=2;
						*count+=1;
						}
					else
						{
						for(jjj=0;jjj<3;jjj++)
							{
							if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
								band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
							if(abs(i_fir_list->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
								band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
							if(abs(i_fir_list->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
								band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
							}

						if(i_fir_list->band_pass_data[4]>band_pass_data->final_PGA)
							{
							band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
							band_pass_data->utc_second_final_PGA=i_fir_list->utc_second; //utcÊ±¼äÃë
							band_pass_data->utc_nanosecond_final_PGA=i_fir_list->utc_nanosecond; //utcÊ±¼äÄÉÃë

							}
						if(i_fir_list->band_pass_dataV[4]>band_pass_data->final_PGV)
							{
							band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
							band_pass_data->utc_second_final_PGV=i_fir_list->utc_second; //utcÊ±¼äÃë
							band_pass_data->utc_nanosecond_final_PGV=i_fir_list->utc_nanosecond; //utcÊ±¼äÄÉÃë
							}
						if(i_fir_list->band_pass_dataD[4]>band_pass_data->final_PGD)
							{
							band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
							band_pass_data->utc_second_final_PGD=i_fir_list->utc_second; //utcÊ±¼äÃë
							band_pass_data->utc_nanosecond_final_PGD=i_fir_list->utc_nanosecond; //utcÊ±¼äÄÉÃë
							}
						if(*count==timespan*100)

							{
							*count=1;
							return 2;
							}
						else
							{


							*count+=1;
							}



						}
					}
				return 1;
		}
	else if(i_fir_list->sample_rata==200&&band_pass_flag==0)
		{
		firLength=301;
		//if(dataNum<301)
		//	{
		//	return -1;
		//	}
		double Fir[301]={-1.5738968347689628e-04,
			-1.7735491639294824e-04,
			-2.1736124094126334e-04,
			-2.7483905489700012e-04,
			-3.4266813193163193e-04,
			-4.1030106015100642e-04,
			-4.6590026089908369e-04,
			-4.9908565647348161e-04,
			-5.0368485858866155e-04,
			-4.7980096272096865e-04,
			-4.3459912811287315e-04,
			-3.8145932023061683e-04,
			-3.3750551620498548e-04,
			-3.1992389949451273e-04,
			-3.4182841427864982e-04,
			-4.0862956128619334e-04,
			-5.1584657092479044e-04,
			-6.4905509995696496e-04,
			-7.8621869932361810e-04,
			-9.0210075583715586e-04,
			-9.7391805542624665e-04,
			-9.8700968544837217e-04,
			-9.3916478239759282e-04,
			-8.4243680789333406e-04,
			-7.2175694572392348e-04,
			-6.1035700575723644e-04,
			-5.4277523357811595e-04,
			-5.4686940852928067e-04,
			-6.3663386121590247e-04,
			-8.0759555645765300e-04,
			-1.0361182005924534e-03,
			-1.2831404037890676e-03,
			-1.5018735401092786e-03,
			-1.6480075080620943e-03,
			-1.6902522160705587e-03,
			-1.6187724217614032e-03,
			-1.4493561975616916e-03,
			-1.2219729859712122e-03,
			-9.9357826868147307e-04,
			-8.2635727901226479e-04,
			-7.7376662014393995e-04,
			-8.6744203333462462e-04,
			-1.1080893063261379e-03,
			-1.4627990304460733e-03,
			-1.8699254737555102e-03,
			-2.2510004567963386e-03,
			-2.5274762640143944e-03,
			-2.6387982693635644e-03,
			-2.5577291433000224e-03,
			-2.2991713422791313e-03,
			-1.9199554375127431e-03,
			-1.5089616520395268e-03,
			-1.1691295962667500e-03,
			-9.9489997697284663e-04,
			-1.0499463509793807e-03,
			-1.3503416137936456e-03,
			-1.8574229089935940e-03,
			-2.4826907958067261e-03,
			-3.1044754803961948e-03,
			-3.5933784465069858e-03,
			-3.8412720032523487e-03,
			-3.7874595744862814e-03,
			-3.4358093523187173e-03,
			-2.8583194491591827e-03,
			-2.1833724736893233e-03,
			-1.5703255973366405e-03,
			-1.1753198885291142e-03,
			-1.1155270970319925e-03,
			-1.4398884580665875e-03,
			-2.1134488140001156e-03,
			-3.0197519628140561e-03,
			-3.9819340454248483e-03,
			-4.7989298359828224e-03,
			-5.2895315090100694e-03,
			-5.3347847421739408e-03,
			-4.9089772067057768e-03,
			-4.0914494807903403e-03,
			-3.0553263232042977e-03,
			-2.0342643861179957e-03,
			-1.2733736807093051e-03,
			-9.7444743993873348e-04,
			-1.2475579059199422e-03,
			-2.0803813561700931e-03,
			-3.3333020239832397e-03,
			-4.7630034661209093e-03,
			-6.0709747972200970e-03,
			-6.9675036714509026e-03,
			-7.2376487999995407e-03,
			-6.7944115044867989e-03,
			-5.7063144258142880e-03,
			-4.1915922126739454e-03,
			-2.5782559165073099e-03,
			-1.2369414329412996e-03,
			-5.0000439657026010e-04,
			-5.8423897384719532e-04,
			-1.5348385257546453e-03,
			-3.2045099423030948e-03,
			-5.2745989273480509e-03,
			-7.3160653117819293e-03,
			-8.8790713655859960e-03,
			-9.5928420397288355e-03,
			-9.2540312860429144e-03,
			-7.8830675166212654e-03,
			-5.7338544840285889e-03,
			-3.2517317719462481e-03,
			-9.8584385474959567e-04,
			5.2737308823975636e-04,
			8.8539160937573045e-04,
			-8.1278022656460546e-05,
			-2.2555652814956074e-03,
			-5.2408116952406677e-03,
			-8.4306412604161132e-03,
			-1.1130333116173553e-02,
			-1.2706151017152620e-02,
			-1.2731360484584070e-02,
			-1.1096337143008480e-02,
			-8.0559256539294525e-03,
			-4.1992280006084327e-03,
			-3.4304817834827792e-04,
			2.6329471431176831e-03,
			3.9772854451277720e-03,
			3.2439302636812226e-03,
			4.1585700052789186e-04,
			-4.0560792879092526e-03,
			-9.3139281317865166e-03,
			-1.4247613714347402e-02,
			-1.7717974336771903e-02,
			-1.8805230945223246e-02,
			-1.7031601742540699e-02,
			-1.2508339273051561e-02,
			-5.9695509104043653e-03,
			1.3240748146035209e-03,
			7.8028250387371500e-03,
			1.1892350786033203e-02,
			1.2350080720461974e-02,
			8.5682310423650879e-03,
			7.7979549076405419e-04,
			-9.8815104670206631e-03,
			-2.1491211233783846e-02,
			-3.1606466363625955e-02,
			-3.7661758554831441e-02,
			-3.7422874756706775e-02,
			-2.9419394015175061e-02,
			-1.3275490993334308e-02,
			1.0126511572124210e-02,
			3.8687978116648487e-02,
			6.9343825778920370e-02,
			9.8485912360757433e-02,
			1.2249350941875659e-01,
			1.3828375204993210e-01,
			1.4378957268385817e-01,
			1.3828375204993198e-01,
			1.2249350941875640e-01,
			9.8485912360757155e-02,
			6.9343825778920107e-02,
			3.8687978116648321e-02,
			1.0126511572124158e-02,
			-1.3275490993334225e-02,
			-2.9419394015174839e-02,
			-3.7422874756706463e-02,
			-3.7661758554831101e-02,
			-3.1606466363625629e-02,
			-2.1491211233783607e-02,
			-9.8815104670205468e-03,
			7.7979549076404465e-04,
			8.5682310423649734e-03,
			1.2350080720461792e-02,
			1.1892350786033016e-02,
			7.8028250387370190e-03,
			1.3240748146034983e-03,
			-5.9695509104042534e-03,
			-1.2508339273051316e-02,
			-1.7031601742540346e-02,
			-1.8805230945222844e-02,
			-1.7717974336771518e-02,
			-1.4247613714347076e-02,
			-9.3139281317862910e-03,
			-4.0560792879091503e-03,
			4.1585700052788145e-04,
			3.2439302636811385e-03,
			3.9772854451276627e-03,
			2.6329471431176059e-03,
			-3.4304817834826751e-04,
			-4.1992280006083061e-03,
			-8.0559256539291975e-03,
			-1.1096337143008119e-02,
			-1.2731360484583639e-02,
			-1.2706151017152188e-02,
			-1.1130333116173159e-02,
			-8.4306412604158061e-03,
			-5.2408116952404717e-03,
			-2.2555652814955185e-03,
			-8.1278022656457077e-05,
			8.8539160937569489e-04,
			5.2737308823973467e-04,
			-9.8584385474955491e-04,
			-3.2517317719461085e-03,
			-5.7338544840283339e-03,
			-7.8830675166209115e-03,
			-9.2540312860424894e-03,
			-9.5928420397283845e-03,
			-8.8790713655855676e-03,
			-7.3160653117815720e-03,
			-5.2745989273477829e-03,
			-3.2045099423029331e-03,
			-1.5348385257545655e-03,
			-5.8423897384716496e-04,
			-5.0000439657023278e-04,
			-1.2369414329412311e-03,
			-2.5782559165071638e-03,
			-4.1915922126737068e-03,
			-5.7063144258139575e-03,
			-6.7944115044863947e-03,
			-7.2376487999991001e-03,
			-6.9675036714504724e-03,
			-6.0709747972197223e-03,
			-4.7630034661206057e-03,
			-3.3333020239830237e-03,
			-2.0803813561699586e-03,
			-1.2475579059198585e-03,
			-9.7444743993866712e-04,
			-1.2733736807092175e-03,
			-2.0342643861178543e-03,
			-3.0553263232040791e-03,
			-4.0914494807900480e-03,
			-4.9089772067054177e-03,
			-5.3347847421735478e-03,
			-5.2895315090096687e-03,
			-4.7989298359824538e-03,
			-3.9819340454245395e-03,
			-3.0197519628138176e-03,
			-2.1134488139999473e-03,
			-1.4398884580664711e-03,
			-1.1155270970319006e-03,
			-1.1753198885290160e-03,
			-1.5703255973365086e-03,
			-2.1833724736891359e-03,
			-2.8583194491589325e-03,
			-3.4358093523184151e-03,
			-3.7874595744859440e-03,
			-3.8412720032520008e-03,
			-3.5933784465066554e-03,
			-3.1044754803959073e-03,
			-2.4826907958064920e-03,
			-1.8574229089934173e-03,
			-1.3503416137935148e-03,
			-1.0499463509792775e-03,
			-9.9489997697274797e-04,
			-1.1691295962666325e-03,
			-1.5089616520393724e-03,
			-1.9199554375125441e-03,
			-2.2991713422788910e-03,
			-2.5577291432997522e-03,
			-2.6387982693632807e-03,
			-2.5274762640141194e-03,
			-2.2510004567960896e-03,
			-1.8699254737553005e-03,
			-1.4627990304459074e-03,
			-1.1080893063260097e-03,
			-8.6744203333452400e-04,
			-7.7376662014384866e-04,
			-8.2635727901216656e-04,
			-9.9357826868135316e-04,
			-1.2219729859710637e-03,
			-1.4493561975615118e-03,
			-1.6187724217612007e-03,
			-1.6902522160703449e-03,
			-1.6480075080618820e-03,
			-1.5018735401090826e-03,
			-1.2831404037888989e-03,
			-1.0361182005923146e-03,
			-8.0759555645754327e-04,
			-6.3663386121581508e-04,
			-5.4686940852920413e-04,
			-5.4277523357803897e-04,
			-6.1035700575714949e-04,
			-7.2175694572381886e-04,
			-8.4243680789320959e-04,
			-9.3916478239745296e-04,
			-9.8700968544822277e-04,
			-9.7391805542609714e-04,
			-9.0210075583701556e-04,
			-7.8621869932349417e-04,
			-6.4905509995686088e-04,
			-5.1584657092470653e-04,
			-4.0862956128612563e-04,
			-3.4182841427859273e-04,
			-3.1992389949445831e-04,
			-3.3750551620492721e-04,
			-3.8145932023054988e-04,
			-4.3459912811279558e-04,
			-4.7980096272088148e-04,
			-5.0368485858856907e-04,
			-4.9908565647338837e-04,
			-4.6590026089899489e-04,
			-4.1030106015092717e-04,
			-3.4266813193156422e-04,
			-2.7483905489694477e-04,
			-2.1736124094121881e-04,
			-1.7735491639291114e-04,
			-1.5738968347686275e-04,


			};
		if(*trig!=0)
			{

	/*		if(PGV_type==1)
				{
				datamid=0.0;
				now_fir=i_fir_list;
				for(int i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataV[4]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataV[4]=datamid;



				datamid=0.0;
				now_fir=i_fir_list;
				for(int i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataD[4]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataD[4]=datamid;

				}
			else if(PGV_type==2)
				{
				for(int j=0;j<3;j++)
					{


					datamid=0.0;
					now_fir=i_fir_list;
					for(int i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataV[j]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataV[j]=datamid;

					}
				i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
				for(int j=0;j<3;j++)
					{


					datamid=0.0;
					now_fir=i_fir_list;
					for(int i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataD[j]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataD[j]=datamid;
					}
				i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
				}*/

			if(*trig==1)
				{
				for(jjj=0;jjj<3;jjj++)
					{
					band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}
				band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
				band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
				band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];

				now_fir=i_fir_list->last;
				for(iii=1;iii<i_sample_rata*3;iii++)
					{
					for(jjj=0;jjj<3;jjj++)
						{
						if(abs(now_fir->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
							band_pass_data->final_PGA_component[jjj]=abs(now_fir->band_pass_data[jjj]);
						if(abs(now_fir->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
							band_pass_data->final_PGV_component[jjj]=abs(now_fir->band_pass_dataV[jjj]);
						if(abs(now_fir->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
							band_pass_data->final_PGD_component[jjj]=abs(now_fir->band_pass_dataD[jjj]);
						}

					if(now_fir->band_pass_data[4]>band_pass_data->final_PGA)
						{
						band_pass_data->final_PGA=now_fir->band_pass_data[4];
						band_pass_data->utc_second_final_PGA=now_fir->utc_second; //utcÊ±¼äÃë
						band_pass_data->utc_nanosecond_final_PGA=now_fir->utc_nanosecond; //utcÊ±¼äÄÉÃë

						}
					//else
					//	{
					//	band_pass_data->final_PGA=i_fir_list->last->final_PGA;
					//	band_pass_data->utc_second_final_PGA=i_fir_list->last->utc_second; //utcÊ±¼äÃë
					//	band_pass_data->utc_nanosecond_final_PGA=i_fir_list->last->utc_nanosecond; //utcÊ±¼äÄÉÃë
					//	}
					if(now_fir->band_pass_dataV[4]>band_pass_data->final_PGV)
						{
						band_pass_data->final_PGV=now_fir->band_pass_dataV[4];
						band_pass_data->utc_second_final_PGV=now_fir->utc_second; //utcÊ±¼äÃë
						band_pass_data->utc_nanosecond_final_PGV=now_fir->utc_nanosecond; //utcÊ±¼äÄÉÃë
						}
					//else
					//	{
					//	band_pass_data->final_PGV=i_fir_list->last->final_PGV;
					//	band_pass_data->utc_second_final_PGV=i_fir_list->last->utc_second; //utcÊ±¼äÃë
					//	band_pass_data->utc_nanosecond_final_PGV=i_fir_list->last->utc_nanosecond; //utcÊ±¼äÄÉÃë
					//	}
					if(now_fir->band_pass_dataD[4]>band_pass_data->final_PGD)
						{
						band_pass_data->final_PGD=now_fir->band_pass_dataD[4];
						band_pass_data->utc_second_final_PGD=now_fir->utc_second; //utcÊ±¼äÃë
						band_pass_data->utc_nanosecond_final_PGD=now_fir->utc_nanosecond; //utcÊ±¼äÄÉÃë
						}

					now_fir=now_fir=now_fir->last;



					}




				*trig=2;
				*count+=1;
				}
			else
				{


				for(jjj=0;jjj<3;jjj++)
					{
					if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
						band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					if(abs(i_fir_list->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
						band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					if(abs(i_fir_list->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
						band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}

				if(i_fir_list->band_pass_data[4]>band_pass_data->final_PGA)
					{
					band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
					band_pass_data->utc_second_final_PGA=i_fir_list->utc_second; //utcÊ±¼äÃë
					band_pass_data->utc_nanosecond_final_PGA=i_fir_list->utc_nanosecond; //utcÊ±¼äÄÉÃë

					}
				if(i_fir_list->band_pass_dataV[4]>band_pass_data->final_PGV)
					{
					band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
					band_pass_data->utc_second_final_PGV=i_fir_list->utc_second; //utcÊ±¼äÃë
					band_pass_data->utc_nanosecond_final_PGV=i_fir_list->utc_nanosecond; //utcÊ±¼äÄÉÃë
					}
				if(i_fir_list->band_pass_dataD[4]>band_pass_data->final_PGD)
					{
					band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
					band_pass_data->utc_second_final_PGD=i_fir_list->utc_second; //utcÊ±¼äÃë
					band_pass_data->utc_nanosecond_final_PGD=i_fir_list->utc_nanosecond; //utcÊ±¼äÄÉÃë
					}
				if(*count==timespan*200)

					{
					*count=1;
					return 2;
					}
				else
					{


					*count+=1;
					}



				}
			}
		return 1;
		}
	else if(i_fir_list->sample_rata==200&&band_pass_flag==1)
		{
		firLength=541;
		//if(dataNum<301)
		//	{
		//	return -1;
		//	}
		double Fir[541]={-9.2099036038378532e-04,
			-7.8804826816350514e-04,
			-6.6560344061362866e-04,
			-5.6687547227462695e-04,
			-5.0305195443362731e-04,
			-4.8212458142003447e-04,
			-5.0801522925230963e-04,
			-5.8008622249482611e-04,
			-6.9309294300030314e-04,
			-8.3759419607064940e-04,
			-1.0007904473973064e-03,
			-1.1677166438897948e-03,
			-1.3226792145237351e-03,
			-1.4507998700714149e-03,
			-1.5395149164156340e-03,
			-1.5798796606311268e-03,
			-1.5675433814101799e-03,
			-1.5032900196379525e-03,
			-1.3930805785312536e-03,
			-1.2475813887482972e-03,
			-1.0812132551662164e-03,
			-9.1080504603679199e-04,
			-7.5397661608138985e-04,
			-6.2740578524895022e-04,
			-5.4514918710074384e-04,
			-5.1718531515799690e-04,
			-5.4832980445290475e-04,
			-6.3763933271860978e-04,
			-7.7837451944441324e-04,
			-9.5853814908441635e-04,
			-1.1619481531160475e-03,
			-1.3697506595220668e-03,
			-1.5622325114940184e-03,
			-1.7207597251464868e-03,
			-1.8296519661545247e-03,
			-1.8778052751213447e-03,
			-1.8598961554604190e-03,
			-1.7770380880220437e-03,
			-1.6368131495740684e-03,
			-1.4526618487227868e-03,
			-1.2426777301980229e-03,
			-1.0279134888687795e-03,
			-8.3035621871027751e-04,
			-6.7076573516148576e-04,
			-5.6658772472861297e-04,
			-5.3015062268610609e-04,
			-5.6733143777716296e-04,
			-6.7683314040934404e-04,
			-8.5015853938458274e-04,
			-1.0722982056842946e-03,
			-1.3230794514709333e-03,
			-1.5790565837738907e-03,
			-1.8157663436507616e-03,
			-2.0101324311648091e-03,
			-2.1427836247891099e-03,
			-2.2000535925879644e-03,
			-2.1754571889266504e-03,
			-2.0704856679088202e-03,
			-1.8946275302998378e-03,
			-1.6645966177239893e-03,
			-1.4028273596775336e-03,
			-1.1353710613629898e-03,
			-8.8938935754289306e-04,
			-6.9048502597345474e-04,
			-5.6013150133180209e-04,
			-5.1345808254886992e-04,
			-5.5761788704660181e-04,
			-6.9091251719947467e-04,
			-9.0277595818363658e-04,
			-1.1746371336738743e-03,
			-1.4815938115070816e-03,
			-1.7947487057919354e-03,
			-2.0839898846883352e-03,
			-2.3209490512706072e-03,
			-2.4818481466164577e-03,
			-2.5499498422015465e-03,
			-2.5173609120326093e-03,
			-2.3859964670479806e-03,
			-2.1675922672027342e-03,
			-1.8827443572853935e-03,
			-1.5590512379570593e-03,
			-1.2285242513423947e-03,
			-9.2450775236682355e-04,
			-6.7840413588373869e-04,
			-5.1652413990349946e-04,
			-4.5737696479821453e-04,
			-5.0967758766085958e-04,
			-6.7128325883947910e-04,
			-9.2918345122575824e-04,
			-1.2605657298138107e-03,
			-1.6348739179959412e-03,
			-2.0166749784740114e-03,
			-2.3690672229614647e-03,
			-2.6573034400949446e-03,
			-2.8522746288034552e-03,
			-2.9335066344339071e-03,
			-2.8913631482099544e-03,
			-2.7282208685875907e-03,
			-2.4584796038279720e-03,
			-2.1073826169179673e-03,
			-1.7087397545895546e-03,
			-1.3017563556190544e-03,
			-9.2726353456713112e-04,
			-6.2371066482157266e-04,
			-4.2331173523314162e-04,
			-3.4872998370800008e-04,
			-4.1063976990715308e-04,
			-6.0642476251474388e-04,
			-9.2016438994335105e-04,
			-1.3239361803047587e-03,
			-1.7803320420881636e-03,
			-2.2459644154696938e-03,
			-2.6756357782218845e-03,
			-3.0267727437604114e-03,
			-3.2636916931282249e-03,
			-3.3612706949638629e-03,
			-3.3076524683700241e-03,
			-3.1056912475649718e-03,
			-2.7729746824372565e-03,
			-2.3403892837598060e-03,
			-1.8493412139778430e-03,
			-1.3478794014496636e-03,
			-8.8608150223198922e-04,
			-5.1114349515264787e-04,
			-2.6265206842258714e-04,
			-1.6851079481957512e-04,
			-2.4193625100973236e-04,
			-4.7984317191924781e-04,
			-8.6280715728713074e-04,
			-1.3566415625985743e-03,
			-1.9154665600813400e-03,
			-2.4859984617802782e-03,
			-3.0126612251738065e-03,
			-3.4430325498542480e-03,
			-3.7330937104403427e-03,
			-3.8517604832979464e-03,
			-3.7842324736531100e-03,
			-3.5338050023559580e-03,
			-3.1219319124799489e-03,
			-2.5864957712039751e-03,
			-1.9784179024470525e-03,
			-1.3569073131266510e-03,
			-7.8378825350351668e-04,
			-3.1744647022797834e-04,
			-6.9834312824419518e-06,
			1.1284000836526972e-04,
			2.5354317567758977e-05,
			-2.6597224788052265e-04,
			-7.3743067972836655e-04,
			-1.3469646033695993e-03,
			-2.0379172193921657e-03,
			-2.7443031575346403e-03,
			-3.3971190584163721e-03,
			-3.9310935787960494e-03,
			-4.2912209155740550e-03,
			-4.4384286657659696e-03,
			-4.3538016122489434e-03,
			-4.0409122987702514e-03,
			-3.5259856147050032e-03,
			-2.8558317578400881e-03,
			-2.0937002074628681e-03,
			-1.3134155200516908e-03,
			-5.9233317583970750e-04,
			-3.7822358250078755e-06,
			3.9027251319353107e-04,
			5.4562083721612718e-04,
			4.4059792201310989e-04,
			7.8766065900046770e-05,
			-5.1082710083981203e-04,
			-1.2758972595056852e-03,
			-2.1455177714411132e-03,
			-3.0366641508699954e-03,
			-3.8621118097987728e-03,
			-4.5389428080685424e-03,
			-4.9968394044701686e-03,
			-5.1853430528545691e-03,
			-5.0793389195515149e-03,
			-4.6821819764329082e-03,
			-4.0260977778495107e-03,
			-3.1697493995113059e-03,
			-2.1931374329631778e-03,
			-1.1902658708177875e-03,
			-2.6023694791261148e-04,
			5.0239086906258580e-04,
			1.0170537242174349e-03,
			1.2255086096815426e-03,
			1.0981873138275063e-03,
			6.3790127253392042e-04,
			-1.1953798113192900e-04,
			-1.1079276778061561e-03,
			-2.2363446488090528e-03,
			-3.3974065727959773e-03,
			-4.4773856919170718e-03,
			-5.3672354801872664e-03,
			-5.9734753110310982e-03,
			-6.2278624174949846e-03,
			-6.0948685932705384e-03,
			-5.5761654078248781e-03,
			-4.7115908003906980e-03,
			-3.5763979419758700e-03,
			-2.2749440304833169e-03,
			-9.3132842805940036e-04,
			3.2219796078291040e-04,
			1.3579883121752859e-03,
			2.0657109495232774e-03,
			2.3637734346849855e-03,
			2.2083038115951678e-03,
			1.5987342434481875e-03,
			5.7933196288304162e-04,
			-7.6360523631937476e-04,
			-2.3087604573219398e-03,
			-3.9104757284739783e-03,
			-5.4121833258849901e-03,
			-6.6613801997739783e-03,
			-7.5247452268142716e-03,
			-7.9019373222448622e-03,
			-7.7366891333259091e-03,
			-7.0240232005336425e-03,
			-5.8127492393513962e-03,
			-4.2028248373273342e-03,
			-2.3376400760274124e-03,
			-3.9177573876898449e-04,
			1.4447611912945188e-03,
			2.9844462893490794e-03,
			4.0606549183290512e-03,
			4.5448405291744071e-03,
			4.3607762636084981e-03,
			3.4943738979672815e-03,
			1.9979539455294236e-03,
			-1.1679981628951848e-05,
			-2.3614511802506899e-03,
			-4.8360047833993728e-03,
			-7.1964238219141821e-03,
			-9.2021151553450583e-03,
			-1.0633951165805386e-02,
			-1.1316552798255641e-02,
			-1.1137586000254470e-02,
			-1.0062124842053854e-02,
			-8.1405010867291669e-03,
			-5.5085851061377634e-03,
			-2.3800849646007840e-03,
			9.6884449252551230e-04,
			4.2216836898676243e-03,
			7.0486768194433849e-03,
			9.1368371170709086e-03,
			1.0220305897430315e-02,
			1.0108397670110335e-02,
			8.7087474354680741e-03,
			6.0432886744458819e-03,
			2.2553117568610858e-03,
			-2.3934561482566973e-03,
			-7.5360015862024794e-03,
			-1.2722801055507309e-02,
			-1.7452784005121087e-02,
			-2.1210303569516521e-02,
			-2.3505355684549270e-02,
			-2.3913919959109343e-02,
			-2.2115177846259819e-02,
			-1.7922511198655740e-02,
			-1.1305590976966528e-02,
			-2.4015034641907277e-03,
			8.4863183807199517e-03,
			2.0901652188791666e-02,
			3.4260844192471288e-02,
			4.7888335453839595e-02,
			6.1059894106108653e-02,
			7.3050446110118419e-02,
			8.3182990982319571e-02,
			9.0874957753215704e-02,
			9.5678513253330877e-02,
			9.7311769218428879e-02,
			9.5678513253330918e-02,
			9.0874957753215677e-02,
			8.3182990982319585e-02,
			7.3050446110118419e-02,
			6.1059894106108667e-02,
			4.7888335453839609e-02,
			3.4260844192471288e-02,
			2.0901652188791666e-02,
			8.4863183807199569e-03,
			-2.4015034641907285e-03,
			-1.1305590976966534e-02,
			-1.7922511198655757e-02,
			-2.2115177846259833e-02,
			-2.3913919959109346e-02,
			-2.3505355684549270e-02,
			-2.1210303569516531e-02,
			-1.7452784005121090e-02,
			-1.2722801055507311e-02,
			-7.5360015862024829e-03,
			-2.3934561482566981e-03,
			2.2553117568610867e-03,
			6.0432886744458819e-03,
			8.7087474354680741e-03,
			1.0108397670110337e-02,
			1.0220305897430322e-02,
			9.1368371170709086e-03,
			7.0486768194433849e-03,
			4.2216836898676261e-03,
			9.6884449252551273e-04,
			-2.3800849646007844e-03,
			-5.5085851061377642e-03,
			-8.1405010867291686e-03,
			-1.0062124842053856e-02,
			-1.1137586000254470e-02,
			-1.1316552798255644e-02,
			-1.0633951165805386e-02,
			-9.2021151553450635e-03,
			-7.1964238219141838e-03,
			-4.8360047833993763e-03,
			-2.3614511802506908e-03,
			-1.1679981628951848e-05,
			1.9979539455294258e-03,
			3.4943738979672854e-03,
			4.3607762636085007e-03,
			4.5448405291744088e-03,
			4.0606549183290546e-03,
			2.9844462893490803e-03,
			1.4447611912945196e-03,
			-3.9177573876898449e-04,
			-2.3376400760274133e-03,
			-4.2028248373273359e-03,
			-5.8127492393514005e-03,
			-7.0240232005336460e-03,
			-7.7366891333259160e-03,
			-7.9019373222448709e-03,
			-7.5247452268142768e-03,
			-6.6613801997739835e-03,
			-5.4121833258849944e-03,
			-3.9104757284739800e-03,
			-2.3087604573219420e-03,
			-7.6360523631937541e-04,
			5.7933196288304206e-04,
			1.5987342434481888e-03,
			2.2083038115951695e-03,
			2.3637734346849881e-03,
			2.0657109495232787e-03,
			1.3579883121752868e-03,
			3.2219796078291127e-04,
			-9.3132842805940057e-04,
			-2.2749440304833191e-03,
			-3.5763979419758734e-03,
			-4.7115908003907024e-03,
			-5.5761654078248851e-03,
			-6.0948685932705410e-03,
			-6.2278624174949872e-03,
			-5.9734753110311043e-03,
			-5.3672354801872690e-03,
			-4.4773856919170770e-03,
			-3.3974065727959803e-03,
			-2.2363446488090563e-03,
			-1.1079276778061574e-03,
			-1.1953798113192943e-04,
			6.3790127253392085e-04,
			1.0981873138275076e-03,
			1.2255086096815435e-03,
			1.0170537242174358e-03,
			5.0239086906258667e-04,
			-2.6023694791261213e-04,
			-1.1902658708177892e-03,
			-2.1931374329631804e-03,
			-3.1697493995113107e-03,
			-4.0260977778495150e-03,
			-4.6821819764329151e-03,
			-5.0793389195515218e-03,
			-5.1853430528545760e-03,
			-4.9968394044701747e-03,
			-4.5389428080685442e-03,
			-3.8621118097987776e-03,
			-3.0366641508699980e-03,
			-2.1455177714411145e-03,
			-1.2758972595056867e-03,
			-5.1082710083981311e-04,
			7.8766065900046770e-05,
			4.4059792201311075e-04,
			5.4562083721612805e-04,
			3.9027251319353150e-04,
			-3.7822358250078755e-06,
			-5.9233317583970880e-04,
			-1.3134155200516921e-03,
			-2.0937002074628711e-03,
			-2.8558317578400915e-03,
			-3.5259856147050088e-03,
			-4.0409122987702592e-03,
			-4.3538016122489503e-03,
			-4.4384286657659757e-03,
			-4.2912209155740620e-03,
			-3.9310935787960546e-03,
			-3.3971190584163777e-03,
			-2.7443031575346438e-03,
			-2.0379172193921687e-03,
			-1.3469646033696017e-03,
			-7.3743067972836828e-04,
			-2.6597224788052351e-04,
			2.5354317567759410e-05,
			1.1284000836526972e-04,
			-6.9834312824415181e-06,
			-3.1744647022797877e-04,
			-7.8378825350351841e-04,
			-1.3569073131266529e-03,
			-1.9784179024470564e-03,
			-2.5864957712039799e-03,
			-3.1219319124799550e-03,
			-3.5338050023559641e-03,
			-3.7842324736531187e-03,
			-3.8517604832979556e-03,
			-3.7330937104403505e-03,
			-3.4430325498542550e-03,
			-3.0126612251738143e-03,
			-2.4859984617802843e-03,
			-1.9154665600813439e-03,
			-1.3566415625985765e-03,
			-8.6280715728713248e-04,
			-4.7984317191924932e-04,
			-2.4193625100973301e-04,
			-1.6851079481957555e-04,
			-2.6265206842258801e-04,
			-5.1114349515264874e-04,
			-8.8608150223199096e-04,
			-1.3478794014496660e-03,
			-1.8493412139778472e-03,
			-2.3403892837598117e-03,
			-2.7729746824372626e-03,
			-3.1056912475649788e-03,
			-3.3076524683700315e-03,
			-3.3612706949638690e-03,
			-3.2636916931282319e-03,
			-3.0267727437604183e-03,
			-2.6756357782218901e-03,
			-2.2459644154696990e-03,
			-1.7803320420881675e-03,
			-1.3239361803047617e-03,
			-9.2016438994335268e-04,
			-6.0642476251474497e-04,
			-4.1063976990715395e-04,
			-3.4872998370800073e-04,
			-4.2331173523314271e-04,
			-6.2371066482157418e-04,
			-9.2726353456713318e-04,
			-1.3017563556190573e-03,
			-1.7087397545895596e-03,
			-2.1073826169179721e-03,
			-2.4584796038279785e-03,
			-2.7282208685875963e-03,
			-2.8913631482099622e-03,
			-2.9335066344339149e-03,
			-2.8522746288034630e-03,
			-2.6573034400949511e-03,
			-2.3690672229614721e-03,
			-2.0166749784740171e-03,
			-1.6348739179959453e-03,
			-1.2605657298138137e-03,
			-9.2918345122576030e-04,
			-6.7128325883948105e-04,
			-5.0967758766086110e-04,
			-4.5737696479821561e-04,
			-5.1652413990350054e-04,
			-6.7840413588374053e-04,
			-9.2450775236682593e-04,
			-1.2285242513423978e-03,
			-1.5590512379570643e-03,
			-1.8827443572853996e-03,
			-2.1675922672027411e-03,
			-2.3859964670479871e-03,
			-2.5173609120326171e-03,
			-2.5499498422015530e-03,
			-2.4818481466164642e-03,
			-2.3209490512706150e-03,
			-2.0839898846883422e-03,
			-1.7947487057919410e-03,
			-1.4815938115070857e-03,
			-1.1746371336738774e-03,
			-9.0277595818363940e-04,
			-6.9091251719947640e-04,
			-5.5761788704660311e-04,
			-5.1345808254887144e-04,
			-5.6013150133180361e-04,
			-6.9048502597345647e-04,
			-8.8938935754289588e-04,
			-1.1353710613629931e-03,
			-1.4028273596775388e-03,
			-1.6645966177239954e-03,
			-1.8946275302998434e-03,
			-2.0704856679088272e-03,
			-2.1754571889266573e-03,
			-2.2000535925879735e-03,
			-2.1427836247891172e-03,
			-2.0101324311648161e-03,
			-1.8157663436507688e-03,
			-1.5790565837738965e-03,
			-1.3230794514709379e-03,
			-1.0722982056842985e-03,
			-8.5015853938458566e-04,
			-6.7683314040934653e-04,
			-5.6733143777716502e-04,
			-5.3015062268610771e-04,
			-5.6658772472861503e-04,
			-6.7076573516148782e-04,
			-8.3035621871028087e-04,
			-1.0279134888687830e-03,
			-1.2426777301980277e-03,
			-1.4526618487227918e-03,
			-1.6368131495740745e-03,
			-1.7770380880220505e-03,
			-1.8598961554604264e-03,
			-1.8778052751213517e-03,
			-1.8296519661545317e-03,
			-1.7207597251464937e-03,
			-1.5622325114940253e-03,
			-1.3697506595220725e-03,
			-1.1619481531160521e-03,
			-9.5853814908442015e-04,
			-7.7837451944441616e-04,
			-6.3763933271861217e-04,
			-5.4832980445290724e-04,
			-5.1718531515799874e-04,
			-5.4514918710074623e-04,
			-6.2740578524895249e-04,
			-7.5397661608139343e-04,
			-9.1080504603679589e-04,
			-1.0812132551662208e-03,
			-1.2475813887483022e-03,
			-1.3930805785312590e-03,
			-1.5032900196379592e-03,
			-1.5675433814101875e-03,
			-1.5798796606311340e-03,
			-1.5395149164156405e-03,
			-1.4507998700714214e-03,
			-1.3226792145237412e-03,
			-1.1677166438897998e-03,
			-1.0007904473973103e-03,
			-8.3759419607065287e-04,
			-6.9309294300030650e-04,
			-5.8008622249482893e-04,
			-5.0801522925231191e-04,
			-4.8212458142003674e-04,
			-5.0305195443362970e-04,
			-5.6687547227462652e-04,
			-6.6560344061365078e-04,
			-7.8804826816350926e-04,
			-9.2099036038381839e-04,


			};
		if(*trig!=0)
			{

			//if(PGV_type==1)
			//	{
			//	datamid=0.0;
			//	now_fir=i_fir_list;
			//	for(int i=0;i<firLength;i++)
			//		{
			//		datamid=datamid+now_fir->dataV[4]*Fir[i];
			//		now_fir=now_fir->last;
			//		}
			//	i_fir_list->band_pass_dataV[4]=datamid;



			//	datamid=0.0;
			//	now_fir=i_fir_list;
			//	for(int i=0;i<firLength;i++)
			//		{
			//		datamid=datamid+now_fir->dataD[4]*Fir[i];
			//		now_fir=now_fir->last;
			//		}
			//	i_fir_list->band_pass_dataD[4]=datamid;

			//	}
			//else if(PGV_type==2)
			//	{
			//	for(int j=0;j<3;j++)
			//		{


			//		datamid=0.0;
			//		now_fir=i_fir_list;
			//		for(int i=0;i<firLength;i++)
			//			{
			//			datamid=datamid+now_fir->dataV[j]*Fir[i];
			//			now_fir=now_fir->last;
			//			}
			//		i_fir_list->band_pass_dataV[j]=datamid;

			//		}
			//	i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
			//	for(int j=0;j<3;j++)
			//		{


			//		datamid=0.0;
			//		now_fir=i_fir_list;
			//		for(int i=0;i<firLength;i++)
			//			{
			//			datamid=datamid+now_fir->dataD[j]*Fir[i];
			//			now_fir=now_fir->last;
			//			}
			//		i_fir_list->band_pass_dataD[j]=datamid;
			//		}
			//	i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
			//	}

			if(*trig==1)
				{
				for(jjj=0;jjj<3;jjj++)
					{
					band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}
				band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
				band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
				band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];

				now_fir=i_fir_list->last;
				for(iii=1;iii<i_sample_rata*3;iii++)
					{
					for(jjj=0;jjj<3;jjj++)
						{
						if(abs(now_fir->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
							band_pass_data->final_PGA_component[jjj]=abs(now_fir->band_pass_data[jjj]);
						if(abs(now_fir->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
							band_pass_data->final_PGV_component[jjj]=abs(now_fir->band_pass_dataV[jjj]);
						if(abs(now_fir->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
							band_pass_data->final_PGD_component[jjj]=abs(now_fir->band_pass_dataD[jjj]);

						}
					if(now_fir->band_pass_data[4]>band_pass_data->final_PGA)
						{
						band_pass_data->final_PGA=now_fir->band_pass_data[4];
						band_pass_data->utc_second_final_PGA=now_fir->utc_second; //utcÊ±¼äÃë
						band_pass_data->utc_nanosecond_final_PGA=now_fir->utc_nanosecond; //utcÊ±¼äÄÉÃë

						}
					//else
					//	{
					//	band_pass_data->final_PGA=i_fir_list->last->final_PGA;
					//	band_pass_data->utc_second_final_PGA=i_fir_list->last->utc_second; //utcÊ±¼äÃë
					//	band_pass_data->utc_nanosecond_final_PGA=i_fir_list->last->utc_nanosecond; //utcÊ±¼äÄÉÃë
					//	}
					if(now_fir->band_pass_dataV[4]>band_pass_data->final_PGV)
						{
						band_pass_data->final_PGV=now_fir->band_pass_dataV[4];
						band_pass_data->utc_second_final_PGV=now_fir->utc_second; //utcÊ±¼äÃë
						band_pass_data->utc_nanosecond_final_PGV=now_fir->utc_nanosecond; //utcÊ±¼äÄÉÃë
						}
					//else
					//	{
					//	band_pass_data->final_PGV=i_fir_list->last->final_PGV;
					//	band_pass_data->utc_second_final_PGV=i_fir_list->last->utc_second; //utcÊ±¼äÃë
					//	band_pass_data->utc_nanosecond_final_PGV=i_fir_list->last->utc_nanosecond; //utcÊ±¼äÄÉÃë
					//	}
					if(now_fir->band_pass_dataD[4]>band_pass_data->final_PGD)
						{
						band_pass_data->final_PGD=now_fir->band_pass_dataD[4];
						band_pass_data->utc_second_final_PGD=now_fir->utc_second; //utcÊ±¼äÃë
						band_pass_data->utc_nanosecond_final_PGD=now_fir->utc_nanosecond; //utcÊ±¼äÄÉÃë
						}

					now_fir=now_fir=now_fir->last;



					}




				*trig=2;
				*count+=1;
				}
			else
				{


				for(jjj=0;jjj<3;jjj++)
					{
					if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
						band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					if(abs(i_fir_list->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
						band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					if(abs(i_fir_list->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
						band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}

				if(i_fir_list->band_pass_data[4]>band_pass_data->final_PGA)
					{
					band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
					band_pass_data->utc_second_final_PGA=i_fir_list->utc_second; //utcÊ±¼äÃë
					band_pass_data->utc_nanosecond_final_PGA=i_fir_list->utc_nanosecond; //utcÊ±¼äÄÉÃë

					}
				if(i_fir_list->band_pass_dataV[4]>band_pass_data->final_PGV)
					{
					band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
					band_pass_data->utc_second_final_PGV=i_fir_list->utc_second; //utcÊ±¼äÃë
					band_pass_data->utc_nanosecond_final_PGV=i_fir_list->utc_nanosecond; //utcÊ±¼äÄÉÃë
					}
				if(i_fir_list->band_pass_dataD[4]>band_pass_data->final_PGD)
					{
					band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
					band_pass_data->utc_second_final_PGD=i_fir_list->utc_second; //utcÊ±¼äÃë
					band_pass_data->utc_nanosecond_final_PGD=i_fir_list->utc_nanosecond; //utcÊ±¼äÄÉÃë
					}
				if(*count==timespan*200)

					{
					*count=1;
					return 2;
					}
				else
					{


					*count+=1;
					}



				}
			}
		return 1;
		}



	}

//20180728

int PGA_V_G2_20180815(FIR_LIST *i_fir_list,BAND_PASS_RESULT *band_pass_data,int *count,int timespan,int *trig,int PGV_type,int band_pass_flag)
	{
		printf("band_pass_flag=%d\n",band_pass_flag);
		//exit(0);
		//return 0;
		alg_locat();
	int firLength,j,jjj;
	double datamid;
	FIR_LIST *now_fir;
	if (i_fir_list->sample_rata==50&&band_pass_flag==0)
		{
		firLength=81;
		double Fir[81]={-4.7987787339820936e-04,
			-8.9057350076593368e-04,
			-7.2903341056485352e-04,
			-9.3968046651590189e-04,
			-2.0015152670250906e-03,
			-1.8457782153191327e-03,
			-1.4331943313841396e-03,
			-3.2987790655067970e-03,
			-3.9188767708761094e-03,
			-2.2358326021832526e-03,
			-4.2761095213556272e-03,
			-6.9685597648698229e-03,
			-4.0562398557881119e-03,
			-4.5086713435378723e-03,
			-1.0324010165847381e-02,
			-7.7980789590883538e-03,
			-4.2123548102063557e-03,
			-1.2580685653923828e-02,
			-1.3896183105007932e-02,
			-4.6707793854684938e-03,
			-1.2139776287417038e-02,
			-2.1492365469531257e-02,
			-8.0968892823001046e-03,
			-8.2631555848332473e-03,
			-2.7966602054323594e-02,
			-1.6735759731169867e-02,
			-2.1834926757662077e-03,
			-2.9254096192636532e-02,
			-3.1499163705017090e-02,
			2.3107659525776346e-03,
			-2.0832464828927390e-02,
			-5.0853889965031082e-02,
			-1.1624388651572256e-03,
			1.8841462457617236e-03,
			-7.0730297852423088e-02,
			-2.3669862992490260e-02,
			4.9655253129437991e-02,
			-8.5754335252881606e-02,
			-1.1745446174509039e-01,
			2.7761355362248835e-01,
			5.7538029520670841e-01,
			2.7761355362248769e-01,
			-1.1745446174508975e-01,
			-8.5754335252880912e-02,
			4.9655253129437457e-02,
			-2.3669862992489934e-02,
			-7.0730297852421936e-02,
			1.8841462457616889e-03,
			-1.1624388651572048e-03,
			-5.0853889965029819e-02,
			-2.0832464828926815e-02,
			2.3107659525775617e-03,
			-3.1499163705016028e-02,
			-2.9254096192635470e-02,
			-2.1834926757661245e-03,
			-1.6735759731169159e-02,
			-2.7966602054322321e-02,
			-8.2631555848328413e-03,
			-8.0968892822996814e-03,
			-2.1492365469530057e-02,
			-1.2139776287416327e-02,
			-4.6707793854682024e-03,
			-1.3896183105007011e-02,
			-1.2580685653922945e-02,
			-4.2123548102060435e-03,
			-7.7980789590877501e-03,
			-1.0324010165846531e-02,
			-4.5086713435374846e-03,
			-4.0562398557877433e-03,
			-6.9685597648691568e-03,
			-4.2761095213552005e-03,
			-2.2358326021830158e-03,
			-3.9188767708756775e-03,
			-3.2987790655064630e-03,
			-1.4331943313839600e-03,
			-1.8457782153188935e-03,
			-2.0015152670248100e-03,
			-9.3968046651576485e-04,
			-7.2903341056474108e-04,
			-8.9057350076577387e-04,
			-4.7987787339812745e-04,
			};
		if(*trig!=0)
			{
			if(PGV_type==1)
				{
				datamid=0.0;
				now_fir=i_fir_list;
				for(int i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataV[4]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataV[4]=datamid;



				datamid=0.0;
				now_fir=i_fir_list;
				for(int i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataD[4]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataD[4]=datamid;

				}
			else if(PGV_type==2)
				{
				for(int j=0;j<3;j++)
					{


					datamid=0.0;
					now_fir=i_fir_list;
					for(int i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataV[j]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataV[j]=datamid;

					}
				i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
				for(int j=0;j<3;j++)
					{


					datamid=0.0;
					now_fir=i_fir_list;
					for(int i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataD[j]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataD[j]=datamid;
					}
				i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
				}




			if(*trig==1)
				{
				for(jjj=0;jjj<3;jjj++)
					{
					band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}
				band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
				band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
				band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
				*count+=1;
				*trig=2;
				}
			else
				{
				for(jjj=0;jjj<3;jjj++)
					{
					if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
						band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					if(abs(i_fir_list->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
						band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					if(abs(i_fir_list->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
						band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}




				if(i_fir_list->band_pass_data[4]>band_pass_data->final_PGA)
					{
					band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
					band_pass_data->utc_second_final_PGA=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGA=i_fir_list->utc_nanosecond; //utc时间纳秒

					}
				//else
				//	{
				//	band_pass_data->final_PGA=i_fir_list->last->final_PGA;
				//	band_pass_data->utc_second_final_PGA=i_fir_list->last->utc_second; //utc时间秒
				//	band_pass_data->utc_nanosecond_final_PGA=i_fir_list->last->utc_nanosecond; //utc时间纳秒
				//	}
				if(i_fir_list->band_pass_dataV[4]>band_pass_data->final_PGV)
					{
					band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
					band_pass_data->utc_second_final_PGV=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGV=i_fir_list->utc_nanosecond; //utc时间纳秒
					}
				//else
				//	{
				//	band_pass_data->final_PGV=i_fir_list->last->final_PGV;
				//	band_pass_data->utc_second_final_PGV=i_fir_list->last->utc_second; //utc时间秒
				//	band_pass_data->utc_nanosecond_final_PGV=i_fir_list->last->utc_nanosecond; //utc时间纳秒
				//	}
				if(i_fir_list->band_pass_dataD[4]>band_pass_data->final_PGD)
					{
					band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
					band_pass_data->utc_second_final_PGD=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGD=i_fir_list->utc_nanosecond; //utc时间纳秒
					}
				//else
				//	{
				//	band_pass_data->final_PGD=i_fir_list->last->final_PGD;
				//	band_pass_data->utc_second_final_PGD=i_fir_list->last->utc_second; //utc时间秒
				//	band_pass_data->utc_nanosecond_final_PGD=i_fir_list->last->utc_nanosecond; //utc时间纳秒
				//	}
				if(*count==timespan*50)

					{
					*count=1;
					return 2;
					}
				else
					{


					*count+=1;
					}



				}
			}
		return 1;
		}
	else if (i_fir_list->sample_rata==50&&band_pass_flag==1)
			{
			firLength=151;
			double Fir[151]={-2.8052426906829513e-03,
				-4.2393366582970269e-03,
				-3.8887138369385330e-03,
				-2.2354116003412555e-03,
				-1.7151340451976370e-03,
				-3.3681835107814504e-03,
				-5.1779067586189562e-03,
				-4.6965135173902524e-03,
				-2.5638580821051682e-03,
				-1.8818136148366425e-03,
				-3.9473893023176630e-03,
				-6.1968403681345145e-03,
				-5.5591924712764754e-03,
				-2.8602285633303683e-03,
				-1.9855715179514558e-03,
				-4.5343773820232715e-03,
				-7.2993746523036347e-03,
				-6.4757972766725895e-03,
				-3.1075377181290190e-03,
				-2.0034515060087738e-03,
				-5.1201983246674521e-03,
				-8.4924282172401180e-03,
				-7.4477448916228876e-03,
				-3.2854307785719003e-03,
				-1.9068638995382889e-03,
				-5.6956197214221181e-03,
				-9.7890130188554095e-03,
				-8.4805326328304762e-03,
				-3.3686880184671422e-03,
				-1.6587501518070553e-03,
				-6.2513201008398845e-03,
				-1.1212180130190147e-02,
				-9.5865220664507079e-03,
				-3.3245287368907092e-03,
				-1.2085331900947341e-03,
				-6.7780883098406538e-03,
				-1.2801858768458711e-02,
				-1.0789770869833983e-02,
				-3.1075700373275851e-03,
				-4.8269424897207818e-04,
				-7.2670234585519751e-03,
				-1.4627552535563389e-02,
				-1.2135072981765502e-02,
				-2.6498708200075548e-03,
				6.3396297658225372e-04,
				-7.7097304696529074e-03,
				-1.6813951744110978e-02,
				-1.3706460562373948e-02,
				-1.8396919533613628e-03,
				2.3388911427624061e-03,
				-8.0985063426770101e-03,
				-1.9598293978969096e-02,
				-1.5669566680424962e-02,
				-4.7103250693004398e-04,
				5.0106092712312988e-03,
				-8.4265124453908481e-03,
				-2.3477962536707364e-02,
				-1.8384256507005932e-02,
				1.8961989182070325e-03,
				9.4930912865623281e-03,
				-8.6879284730553841e-03,
				-2.9673940083844816e-02,
				-2.2776743005803374e-02,
				6.4259738795488016e-03,
				1.8156146307088068e-02,
				-8.8780841635862553e-03,
				-4.2138499851260856e-02,
				-3.2106505797306333e-02,
				1.7595589150292312e-02,
				4.1258267838167328e-02,
				-8.9935654105577235e-03,
				-8.4619383336774115e-02,
				-7.1400968296348372e-02,
				8.4628282316732584e-02,
				2.9419739638965176e-01,
				3.9169381130492797e-01,
				2.9419739638965176e-01,
				8.4628282316732584e-02,
				-7.1400968296348372e-02,
				-8.4619383336774115e-02,
				-8.9935654105577252e-03,
				4.1258267838167349e-02,
				1.7595589150292319e-02,
				-3.2106505797306346e-02,
				-4.2138499851260863e-02,
				-8.8780841635862588e-03,
				1.8156146307088072e-02,
				6.4259738795488016e-03,
				-2.2776743005803384e-02,
				-2.9673940083844830e-02,
				-8.6879284730553893e-03,
				9.4930912865623333e-03,
				1.8961989182070343e-03,
				-1.8384256507005946e-02,
				-2.3477962536707378e-02,
				-8.4265124453908533e-03,
				5.0106092712313005e-03,
				-4.7103250693004398e-04,
				-1.5669566680424969e-02,
				-1.9598293978969110e-02,
				-8.0985063426770188e-03,
				2.3388911427624079e-03,
				-1.8396919533613663e-03,
				-1.3706460562373958e-02,
				-1.6813951744110992e-02,
				-7.7097304696529126e-03,
				6.3396297658225372e-04,
				-2.6498708200075574e-03,
				-1.2135072981765515e-02,
				-1.4627552535563406e-02,
				-7.2670234585519829e-03,
				-4.8269424897207731e-04,
				-3.1075700373275877e-03,
				-1.0789770869833994e-02,
				-1.2801858768458723e-02,
				-6.7780883098406616e-03,
				-1.2085331900947350e-03,
				-3.3245287368907140e-03,
				-9.5865220664507183e-03,
				-1.1212180130190158e-02,
				-6.2513201008398932e-03,
				-1.6587501518070587e-03,
				-3.3686880184671461e-03,
				-8.4805326328304884e-03,
				-9.7890130188554234e-03,
				-5.6956197214221250e-03,
				-1.9068638995382910e-03,
				-3.2854307785719064e-03,
				-7.4477448916228997e-03,
				-8.4924282172401319e-03,
				-5.1201983246674599e-03,
				-2.0034515060087777e-03,
				-3.1075377181290238e-03,
				-6.4757972766725999e-03,
				-7.2993746523036451e-03,
				-4.5343773820232776e-03,
				-1.9855715179514588e-03,
				-2.8602285633303726e-03,
				-5.5591924712764867e-03,
				-6.1968403681345232e-03,
				-3.9473893023176700e-03,
				-1.8818136148366458e-03,
				-2.5638580821051716e-03,
				-4.6965135173902611e-03,
				-5.1779067586189640e-03,
				-3.3681835107814543e-03,
				-1.7151340451976407e-03,
				-2.2354116003412351e-03,
				-3.8887138369385656e-03,
				-4.2393366582969870e-03,
				-2.8052426906829439e-03,
				};
			if(*trig!=0)
				{
				if(PGV_type==1)
					{
					datamid=0.0;
					now_fir=i_fir_list;
					for(int i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataV[4]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataV[4]=datamid;



					datamid=0.0;
					now_fir=i_fir_list;
					for(int i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataD[4]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataD[4]=datamid;

					}
				else if(PGV_type==2)
					{
					for(int j=0;j<3;j++)
						{


						datamid=0.0;
						now_fir=i_fir_list;
						for(int i=0;i<firLength;i++)
							{
							datamid=datamid+now_fir->dataV[j]*Fir[i];
							now_fir=now_fir->last;
							}
						i_fir_list->band_pass_dataV[j]=datamid;

						}
					i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
					for(int j=0;j<3;j++)
						{


						datamid=0.0;
						now_fir=i_fir_list;
						for(int i=0;i<firLength;i++)
							{
							datamid=datamid+now_fir->dataD[j]*Fir[i];
							now_fir=now_fir->last;
							}
						i_fir_list->band_pass_dataD[j]=datamid;
						}
					i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
					}




				if(*trig==1)
					{
					for(jjj=0;jjj<3;jjj++)
						{
						band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
						band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
						band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
						}
					band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
					band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
					band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
					*count+=1;
					*trig=2;
					}
				else
					{
					for(jjj=0;jjj<3;jjj++)
						{
						if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
							band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
						if(abs(i_fir_list->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
							band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
						if(abs(i_fir_list->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
							band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
						}




					if(i_fir_list->band_pass_data[4]>band_pass_data->final_PGA)
						{
						band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
						band_pass_data->utc_second_final_PGA=i_fir_list->utc_second; //utc时间秒
						band_pass_data->utc_nanosecond_final_PGA=i_fir_list->utc_nanosecond; //utc时间纳秒

						}
					//else
					//	{
					//	band_pass_data->final_PGA=i_fir_list->last->final_PGA;
					//	band_pass_data->utc_second_final_PGA=i_fir_list->last->utc_second; //utc时间秒
					//	band_pass_data->utc_nanosecond_final_PGA=i_fir_list->last->utc_nanosecond; //utc时间纳秒
					//	}
					if(i_fir_list->band_pass_dataV[4]>band_pass_data->final_PGV)
						{
						band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
						band_pass_data->utc_second_final_PGV=i_fir_list->utc_second; //utc时间秒
						band_pass_data->utc_nanosecond_final_PGV=i_fir_list->utc_nanosecond; //utc时间纳秒
						}
					//else
					//	{
					//	band_pass_data->final_PGV=i_fir_list->last->final_PGV;
					//	band_pass_data->utc_second_final_PGV=i_fir_list->last->utc_second; //utc时间秒
					//	band_pass_data->utc_nanosecond_final_PGV=i_fir_list->last->utc_nanosecond; //utc时间纳秒
					//	}
					if(i_fir_list->band_pass_dataD[4]>band_pass_data->final_PGD)
						{
						band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
						band_pass_data->utc_second_final_PGD=i_fir_list->utc_second; //utc时间秒
						band_pass_data->utc_nanosecond_final_PGD=i_fir_list->utc_nanosecond; //utc时间纳秒
						}
					//else
					//	{
					//	band_pass_data->final_PGD=i_fir_list->last->final_PGD;
					//	band_pass_data->utc_second_final_PGD=i_fir_list->last->utc_second; //utc时间秒
					//	band_pass_data->utc_nanosecond_final_PGD=i_fir_list->last->utc_nanosecond; //utc时间纳秒
					//	}
					if(*count==timespan*50)

						{
						*count=1;
						return 2;
						}
					else
						{


						*count+=1;
						}



					}
				}
			return 1;
			}
	else if(i_fir_list->sample_rata==100&&band_pass_flag==0)
		{
		firLength=191;
		double Fir[191]={-1.0096108503799409e-03,
			-1.3950482601184145e-03,
			-2.2527488512072823e-03,
			-2.9478325266950626e-03,
			-2.9241282941009309e-03,
			-2.1964877583498382e-03,
			-1.3932186866449717e-03,
			-1.2683702309322061e-03,
			-2.0587294816955936e-03,
			-3.2307108495224480e-03,
			-3.8728518839418980e-03,
			-3.4512139742405856e-03,
			-2.3045215990983815e-03,
			-1.4270997345429326e-03,
			-1.6661388536950924e-03,
			-2.9780040916341042e-03,
			-4.3915096269727697e-03,
			-4.7685469089617048e-03,
			-3.7708238360917514e-03,
			-2.2154696854772564e-03,
			-1.4639880273141859e-03,
			-2.2943598211664952e-03,
			-4.1868456476722750e-03,
			-5.6701595913976281e-03,
			-5.5118721440431517e-03,
			-3.7942060764075075e-03,
			-1.9423711063670419e-03,
			-1.6026343679009464e-03,
			-3.2475373165740244e-03,
			-5.6846723133800129e-03,
			-6.9564131921419870e-03,
			-5.9605784961465312e-03,
			-3.4555395583318526e-03,
			-1.5446848893690436e-03,
			-1.9729728155626920e-03,
			-4.6090756549750133e-03,
			-7.4249335517157806e-03,
			-8.0957173947760943e-03,
			-5.9658402480322953e-03,
			-2.7259882160986819e-03,
			-1.1326443571281007e-03,
			-2.7279163951726233e-03,
			-6.4379538633729206e-03,
			-9.3078652451388747e-03,
			-8.8937043531173623e-03,
			-5.3843686320969916e-03,
			-1.6236386602042371e-03,
			-8.6795329695463013e-04,
			-4.0358532878403434e-03,
			-8.7602540790057502e-03,
			-1.1177665546498936e-02,
			-9.1197841612625230e-03,
			-4.0841129832286773e-03,
			-2.1710181588843413e-04,
			-9.6506787169073674e-04,
			-6.0820299780298100e-03,
			-1.1571060989487639e-02,
			-1.2821283663388564e-02,
			-8.4992305065876590e-03,
			-1.9327687604891049e-03,
			1.3784923032710335e-03,
			-1.7050246429269466e-03,
			-9.0969663617697753e-03,
			-1.4856515017832844e-02,
			-1.3958829431456619e-02,
			-6.6666698386317613e-03,
			1.2562792472859616e-03,
			3.0131140370235859e-03,
			-3.4963797956000272e-03,
			-1.3462418900154581e-02,
			-1.8662168940531118e-02,
			-1.4193048970612182e-02,
			-2.9949266075571710e-03,
			5.9029683387124953e-03,
			4.5197236235567867e-03,
			-7.1079148261703534e-03,
			-2.0084767678293092e-02,
			-2.3311188040322776e-02,
			-1.2784038623879721e-02,
			4.0762178712041601e-03,
			1.3346915816899603e-02,
			5.7359043739684543e-03,
			-1.4720837908786619e-02,
			-3.2099574332974203e-02,
			-3.0404413640455791e-02,
			-7.3824560015768315e-03,
			2.0903522723558492e-02,
			3.0096061155356627e-02,
			6.5259347250955285e-03,
			-3.8462292200619481e-02,
			-7.0869487224785352e-02,
			-5.4107874682352952e-02,
			2.5259979404526650e-02,
			1.4370865641013861e-01,
			2.4982563870147181e-01,
			2.9230819959096299e-01,
			2.4982563870147181e-01,
			1.4370865641013864e-01,
			2.5259979404526654e-02,
			-5.4107874682352966e-02,
			-7.0869487224785366e-02,
			-3.8462292200619495e-02,
			6.5259347250955302e-03,
			3.0096061155356641e-02,
			2.0903522723558506e-02,
			-7.3824560015768349e-03,
			-3.0404413640455815e-02,
			-3.2099574332974223e-02,
			-1.4720837908786630e-02,
			5.7359043739684604e-03,
			1.3346915816899613e-02,
			4.0762178712041627e-03,
			-1.2784038623879739e-02,
			-2.3311188040322804e-02,
			-2.0084767678293116e-02,
			-7.1079148261703612e-03,
			4.5197236235567911e-03,
			5.9029683387125048e-03,
			-2.9949266075571736e-03,
			-1.4193048970612207e-02,
			-1.8662168940531153e-02,
			-1.3462418900154604e-02,
			-3.4963797956000320e-03,
			3.0131140370235911e-03,
			1.2562792472859642e-03,
			-6.6666698386317743e-03,
			-1.3958829431456649e-02,
			-1.4856515017832875e-02,
			-9.0969663617697927e-03,
			-1.7050246429269492e-03,
			1.3784923032710370e-03,
			-1.9327687604891093e-03,
			-8.4992305065876780e-03,
			-1.2821283663388595e-02,
			-1.1571060989487670e-02,
			-6.0820299780298256e-03,
			-9.6506787169073935e-04,
			-2.1710181588843587e-04,
			-4.0841129832286877e-03,
			-9.1197841612625508e-03,
			-1.1177665546498967e-02,
			-8.7602540790057779e-03,
			-4.0358532878403556e-03,
			-8.6795329695463187e-04,
			-1.6236386602042424e-03,
			-5.3843686320970089e-03,
			-8.8937043531173883e-03,
			-9.3078652451389042e-03,
			-6.4379538633729406e-03,
			-2.7279163951726333e-03,
			-1.1326443571281050e-03,
			-2.7259882160986914e-03,
			-5.9658402480323187e-03,
			-8.0957173947761238e-03,
			-7.4249335517158083e-03,
			-4.6090756549750297e-03,
			-1.9729728155626998e-03,
			-1.5446848893690497e-03,
			-3.4555395583318661e-03,
			-5.9605784961465555e-03,
			-6.9564131921420139e-03,
			-5.6846723133800337e-03,
			-3.2475373165740378e-03,
			-1.6026343679009538e-03,
			-1.9423711063670500e-03,
			-3.7942060764075232e-03,
			-5.5118721440431751e-03,
			-5.6701595913976532e-03,
			-4.1868456476722923e-03,
			-2.2943598211665065e-03,
			-1.4639880273141920e-03,
			-2.2154696854772668e-03,
			-3.7708238360917696e-03,
			-4.7685469089617273e-03,
			-4.3915096269727888e-03,
			-2.9780040916341185e-03,
			-1.6661388536951005e-03,
			-1.4270997345429397e-03,
			-2.3045215990983915e-03,
			-3.4512139742406017e-03,
			-3.8728518839419141e-03,
			-3.2307108495224631e-03,
			-2.0587294816956044e-03,
			-1.2683702309322122e-03,
			-1.3932186866449782e-03,
			-2.1964877583498486e-03,
			-2.9241282941009409e-03,
			-2.9478325266950032e-03,
			-2.2527488512072988e-03,
			-1.3950482601184288e-03,
			-1.0096108503799466e-03,



			};
		if(*trig!=0)
			{


			if(PGV_type==1)
				{
				datamid=0.0;
				now_fir=i_fir_list;
				for(int i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataV[4]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataV[4]=datamid;



				datamid=0.0;
				now_fir=i_fir_list;
				for(int i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataD[4]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataD[4]=datamid;

				}
			else if(PGV_type==2)
				{
				for(int j=0;j<3;j++)
					{


					datamid=0.0;
					now_fir=i_fir_list;
					for(int i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataV[j]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataV[j]=datamid;

					}
				i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
				for(int j=0;j<3;j++)
					{


					datamid=0.0;
					now_fir=i_fir_list;
					for(int i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataD[j]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataD[j]=datamid;
					}
				i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
				}

			if(*trig==1)
				{
				for(jjj=0;jjj<3;jjj++)
					{
					band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}
				band_pass_data->final_PGA=i_fir_list->band_pass_data[j];
				band_pass_data->final_PGV=i_fir_list->band_pass_dataV[j];
				band_pass_data->final_PGD=i_fir_list->band_pass_dataD[j];
				*trig=2;
				*count+=1;
				}
			else
				{
				for(jjj=0;jjj<3;jjj++)
					{
					if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
						band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					if(abs(i_fir_list->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
						band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					if(abs(i_fir_list->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
						band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}

				if(i_fir_list->band_pass_data[4]>band_pass_data->final_PGA)
					{
					band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
					band_pass_data->utc_second_final_PGA=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGA=i_fir_list->utc_nanosecond; //utc时间纳秒

					}
				if(i_fir_list->band_pass_dataV[4]>band_pass_data->final_PGV)
					{
					band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
					band_pass_data->utc_second_final_PGV=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGV=i_fir_list->utc_nanosecond; //utc时间纳秒
					}
				if(i_fir_list->band_pass_dataD[4]>band_pass_data->final_PGD)
					{
					band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
					band_pass_data->utc_second_final_PGD=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGD=i_fir_list->utc_nanosecond; //utc时间纳秒
					}
				if(*count==timespan*100)

					{
					*count=1;
					return 2;
					}
				else
					{


					*count+=1;
					}



				}
			}
		return 1;
		}
	else if(i_fir_list->sample_rata==100&&band_pass_flag==1)
				{
				firLength=301;
				double Fir[301]={-1.3934901977829615e-03,
					-1.8159417519245753e-03,
					-2.1047061992379365e-03,
					-2.1499567281675455e-03,
					-1.9319560065597574e-03,
					-1.5336077824486048e-03,
					-1.1131764610959451e-03,
					-8.4586773282764453e-04,
					-8.5571492559512663e-04,
					-1.1641429939370940e-03,
					-1.6763388826177095e-03,
					-2.2127045829863049e-03,
					-2.5752520825855834e-03,
					-2.6245209995463341e-03,
					-2.3372518475216625e-03,
					-1.8211766253946077e-03,
					-1.2790312324263129e-03,
					-9.3350462293830287e-04,
					-9.4077162689895221e-04,
					-1.3260577655623985e-03,
					-1.9675936202030414e-03,
					-2.6375233932370771e-03,
					-3.0863445849885914e-03,
					-3.1397319857095246e-03,
					-2.7703067122125825e-03,
					-2.1150445844176149e-03,
					-1.4290329171544275e-03,
					-9.9084931593346887e-04,
					-9.9450274977262157e-04,
					-1.4697037836401406e-03,
					-2.2629691037629874e-03,
					-3.0896434805398041e-03,
					-3.6395636772003424e-03,
					-3.6973125284921167e-03,
					-3.2306007769072587e-03,
					-2.4107945111442089e-03,
					-1.5546360967761310e-03,
					-1.0065972753527060e-03,
					-1.0053738031440373e-03,
					-1.5860839569270741e-03,
					-2.5579388666770995e-03,
					-3.5692958764463449e-03,
					-4.2383209384534298e-03,
					-4.3009144849360951e-03,
					-3.7187912246025431e-03,
					-2.7038140209237104e-03,
					-1.6456047543273620e-03,
					-9.6672554881740698e-04,
					-9.5902862506833195e-04,
					-1.6643298430027724e-03,
					-2.8478287426786748e-03,
					-4.0784458396371038e-03,
					-4.8890672246237271e-03,
					-4.9573843372280107e-03,
					-4.2375689803696064e-03,
					-2.9893918921230977e-03,
					-1.6892661355065719e-03,
					-8.5315338472186943e-04,
					-8.3687322528905046e-04,
					-1.6908134983387932e-03,
					-3.1279156197627396e-03,
					-4.6219899287065240e-03,
					-5.6032676672302818e-03,
					-5.6788440317752488e-03,
					-4.7930527289633748e-03,
					-3.2628185712932083e-03,
					-1.6691643874906282e-03,
					-6.4136490201577951e-04,
					-6.1355241309235965e-04,
					-1.6475301337705620e-03,
					-3.3935290783997270e-03,
					-5.2097909555231794e-03,
					-6.4008237800856037e-03,
					-6.4863194218901269e-03,
					-5.3972072803381739e-03,
					-3.5194883154958849e-03,
					-1.5625414496258179e-03,
					-2.9599484306628491e-04,
					-2.5223929370514470e-04,
					-1.5090285192966766e-03,
					-3.6401534025372944e-03,
					-5.8603941401391838e-03,
					-7.3164248762943827e-03,
					-7.4165259229421188e-03,
					-6.0723665880914419e-03,
					-3.7550004343177984e-03,
					-1.3353600892311249e-03,
					2.3788693116028032e-04,
					3.0473249946160190e-04,
					-1.2362210827844447e-03,
					-3.8635274170506517e-03,
					-6.6084146410208293e-03,
					-8.4123588516069620e-03,
					-8.5356836076430822e-03,
					-6.8604886253879381e-03,
					-3.9652570935789742e-03,
					-9.3168387924516256e-04,
					1.0534705820681239e-03,
					1.1561602642038765e-03,
					-7.6279308836732713e-04,
					-4.0597396392069423e-03,
					-7.5208401297042239e-03,
					-9.8072001726968727e-03,
					-9.9708294562862142e-03,
					-7.8443429100596568e-03,
					-4.1465552109397862e-03,
					-2.4844224798785294e-04,
					2.3271192130121512e-03,
					2.4913851040193188e-03,
					3.8417223566559994e-05,
					-4.2253163338121661e-03,
					-8.7382536865734783e-03,
					-1.1749625514224836e-02,
					-1.1991733098263043e-02,
					-9.2038390171244738e-03,
					-4.2956701090024274e-03,
					9.3449579474537436e-04,
					4.4450971219227456e-03,
					4.7325123287797061e-03,
					1.4542781444556027e-03,
					-4.3573002295476306e-03,
					-1.0601141815511635e-02,
					-1.4850187602870650e-02,
					-1.5274622891964655e-02,
					-1.1402122422123587e-02,
					-4.4099287906940446e-03,
					3.1992627279992338e-03,
					8.4610861449535505e-03,
					9.0647035001510286e-03,
					4.3128967563563032e-03,
					-4.4533178832161045e-03,
					-1.4174787943096560e-02,
					-2.1085357894361143e-02,
					-2.2096384652325083e-02,
					-1.6069207429197555e-02,
					-4.4872709594348387e-03,
					8.7849658638558172e-03,
					1.8665591162767350e-02,
					2.0618219193568481e-02,
					1.2446574643172092e-02,
					-4.5116339631119861e-03,
					-2.5272940970094884e-02,
					-4.2331277335992394e-02,
					-4.7764061273754821e-02,
					-3.5721208137345535e-02,
					-4.5262962159261927e-03,
					4.2308025951629580e-02,
					9.6544322689801162e-02,
					1.4711299332650787e-01,
					1.8293486636295642e-01,
					1.9587085363289147e-01,
					1.8293486636295639e-01,
					1.4711299332650785e-01,
					9.6544322689801135e-02,
					4.2308025951629566e-02,
					-4.5262962159261918e-03,
					-3.5721208137345535e-02,
					-4.7764061273754814e-02,
					-4.2331277335992387e-02,
					-2.5272940970094880e-02,
					-4.5116339631119853e-03,
					1.2446574643172089e-02,
					2.0618219193568474e-02,
					1.8665591162767347e-02,
					8.7849658638558138e-03,
					-4.4872709594348361e-03,
					-1.6069207429197544e-02,
					-2.2096384652325073e-02,
					-2.1085357894361126e-02,
					-1.4174787943096552e-02,
					-4.4533178832161010e-03,
					4.3128967563563006e-03,
					9.0647035001510234e-03,
					8.4610861449535436e-03,
					3.1992627279992312e-03,
					-4.4099287906940411e-03,
					-1.1402122422123580e-02,
					-1.5274622891964643e-02,
					-1.4850187602870640e-02,
					-1.0601141815511625e-02,
					-4.3573002295476280e-03,
					1.4542781444556018e-03,
					4.7325123287797017e-03,
					4.4450971219227413e-03,
					9.3449579474537349e-04,
					-4.2956701090024231e-03,
					-9.2038390171244669e-03,
					-1.1991733098263025e-02,
					-1.1749625514224822e-02,
					-8.7382536865734661e-03,
					-4.2253163338121600e-03,
					3.8417223566559994e-05,
					2.4913851040193153e-03,
					2.3271192130121469e-03,
					-2.4844224798785381e-04,
					-4.1465552109397810e-03,
					-7.8443429100596446e-03,
					-9.9708294562862020e-03,
					-9.8072001726968588e-03,
					-7.5208401297042135e-03,
					-4.0597396392069380e-03,
					-7.6279308836732583e-04,
					1.1561602642038756e-03,
					1.0534705820681221e-03,
					-9.3168387924516213e-04,
					-3.9652570935789682e-03,
					-6.8604886253879251e-03,
					-8.5356836076430683e-03,
					-8.4123588516069481e-03,
					-6.6084146410208154e-03,
					-3.8635274170506460e-03,
					-1.2362210827844425e-03,
					3.0473249946160017e-04,
					2.3788693116027988e-04,
					-1.3353600892311228e-03,
					-3.7550004343177915e-03,
					-6.0723665880914298e-03,
					-7.4165259229421032e-03,
					-7.3164248762943671e-03,
					-5.8603941401391716e-03,
					-3.6401534025372871e-03,
					-1.5090285192966731e-03,
					-2.5223929370514383e-04,
					-2.9599484306628491e-04,
					-1.5625414496258144e-03,
					-3.5194883154958771e-03,
					-5.3972072803381609e-03,
					-6.4863194218901122e-03,
					-6.4008237800855889e-03,
					-5.2097909555231664e-03,
					-3.3935290783997183e-03,
					-1.6475301337705575e-03,
					-6.1355241309235748e-04,
					-6.4136490201577821e-04,
					-1.6691643874906245e-03,
					-3.2628185712932005e-03,
					-4.7930527289633627e-03,
					-5.6788440317752332e-03,
					-5.6032676672302679e-03,
					-4.6219899287065127e-03,
					-3.1279156197627305e-03,
					-1.6908134983387882e-03,
					-8.3687322528904872e-04,
					-8.5315338472186726e-04,
					-1.6892661355065672e-03,
					-2.9893918921230908e-03,
					-4.2375689803695943e-03,
					-4.9573843372279977e-03,
					-4.8890672246237124e-03,
					-4.0784458396370933e-03,
					-2.8478287426786674e-03,
					-1.6643298430027674e-03,
					-9.5902862506832913e-04,
					-9.6672554881740416e-04,
					-1.6456047543273575e-03,
					-2.7038140209237008e-03,
					-3.7187912246025327e-03,
					-4.3009144849360829e-03,
					-4.2383209384534160e-03,
					-3.5692958764463336e-03,
					-2.5579388666770917e-03,
					-1.5860839569270702e-03,
					-1.0053738031440341e-03,
					-1.0065972753527028e-03,
					-1.5546360967761263e-03,
					-2.4107945111442020e-03,
					-3.2306007769072496e-03,
					-3.6973125284921046e-03,
					-3.6395636772003298e-03,
					-3.0896434805397937e-03,
					-2.2629691037629792e-03,
					-1.4697037836401362e-03,
					-9.9450274977261875e-04,
					-9.9084931593346518e-04,
					-1.4290329171544223e-03,
					-2.1150445844176089e-03,
					-2.7703067122125742e-03,
					-3.1397319857095142e-03,
					-3.0863445849885810e-03,
					-2.6375233932370672e-03,
					-1.9675936202030344e-03,
					-1.3260577655623941e-03,
					-9.4077162689894884e-04,
					-9.3350462293829940e-04,
					-1.2790312324263090e-03,
					-1.8211766253946012e-03,
					-2.3372518475216551e-03,
					-2.6245209995463237e-03,
					-2.5752520825855730e-03,
					-2.2127045829862962e-03,
					-1.6763388826177036e-03,
					-1.1641429939370888e-03,
					-8.5571492559512359e-04,
					-8.4586773282764138e-04,
					-1.1131764610959410e-03,
					-1.5336077824486000e-03,
					-1.9319560065597509e-03,
					-2.1499567281675781e-03,
					-2.1047061992379612e-03,
					-1.8159417519245733e-03,
					-1.3934901977829676e-03,



					};
				if(*trig!=0)
					{


					if(PGV_type==1)
						{
						datamid=0.0;
						now_fir=i_fir_list;
						for(int i=0;i<firLength;i++)
							{
							datamid=datamid+now_fir->dataV[4]*Fir[i];
							now_fir=now_fir->last;
							}
						i_fir_list->band_pass_dataV[4]=datamid;



						datamid=0.0;
						now_fir=i_fir_list;
						for(int i=0;i<firLength;i++)
							{
							datamid=datamid+now_fir->dataD[4]*Fir[i];
							now_fir=now_fir->last;
							}
						i_fir_list->band_pass_dataD[4]=datamid;

						}
					else if(PGV_type==2)
						{
						for(int j=0;j<3;j++)
							{


							datamid=0.0;
							now_fir=i_fir_list;
							for(int i=0;i<firLength;i++)
								{
								datamid=datamid+now_fir->dataV[j]*Fir[i];
								now_fir=now_fir->last;
								}
							i_fir_list->band_pass_dataV[j]=datamid;

							}
						i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
						for(int j=0;j<3;j++)
							{


							datamid=0.0;
							now_fir=i_fir_list;
							for(int i=0;i<firLength;i++)
								{
								datamid=datamid+now_fir->dataD[j]*Fir[i];
								now_fir=now_fir->last;
								}
							i_fir_list->band_pass_dataD[j]=datamid;
							}
						i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
						}

					if(*trig==1)
						{
						for(jjj=0;jjj<3;jjj++)
							{
							band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
							band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
							band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
							}
						band_pass_data->final_PGA=i_fir_list->band_pass_data[j];
						band_pass_data->final_PGV=i_fir_list->band_pass_dataV[j];
						band_pass_data->final_PGD=i_fir_list->band_pass_dataD[j];
						*trig=2;
						*count+=1;
						}
					else
						{
						for(jjj=0;jjj<3;jjj++)
							{
							if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
								band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
							if(abs(i_fir_list->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
								band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
							if(abs(i_fir_list->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
								band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
							}

						if(i_fir_list->band_pass_data[4]>band_pass_data->final_PGA)
							{
							band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
							band_pass_data->utc_second_final_PGA=i_fir_list->utc_second; //utc时间秒
							band_pass_data->utc_nanosecond_final_PGA=i_fir_list->utc_nanosecond; //utc时间纳秒

							}
						if(i_fir_list->band_pass_dataV[4]>band_pass_data->final_PGV)
							{
							band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
							band_pass_data->utc_second_final_PGV=i_fir_list->utc_second; //utc时间秒
							band_pass_data->utc_nanosecond_final_PGV=i_fir_list->utc_nanosecond; //utc时间纳秒
							}
						if(i_fir_list->band_pass_dataD[4]>band_pass_data->final_PGD)
							{
							band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
							band_pass_data->utc_second_final_PGD=i_fir_list->utc_second; //utc时间秒
							band_pass_data->utc_nanosecond_final_PGD=i_fir_list->utc_nanosecond; //utc时间纳秒
							}
						if(*count==timespan*100)

							{
							*count=1;
							return 2;
							}
						else
							{


							*count+=1;
							}



						}
					}
				return 1;
		}
	else if(i_fir_list->sample_rata==200&&band_pass_flag==0)
		{
			
			alg_locat();

		firLength=301;
		//if(dataNum<301)
		//	{
		//	return -1;
		//	}
		double Fir[301]={-1.5738968347689628e-04,
			-1.7735491639294824e-04,
			-2.1736124094126334e-04,
			-2.7483905489700012e-04,
			-3.4266813193163193e-04,
			-4.1030106015100642e-04,
			-4.6590026089908369e-04,
			-4.9908565647348161e-04,
			-5.0368485858866155e-04,
			-4.7980096272096865e-04,
			-4.3459912811287315e-04,
			-3.8145932023061683e-04,
			-3.3750551620498548e-04,
			-3.1992389949451273e-04,
			-3.4182841427864982e-04,
			-4.0862956128619334e-04,
			-5.1584657092479044e-04,
			-6.4905509995696496e-04,
			-7.8621869932361810e-04,
			-9.0210075583715586e-04,
			-9.7391805542624665e-04,
			-9.8700968544837217e-04,
			-9.3916478239759282e-04,
			-8.4243680789333406e-04,
			-7.2175694572392348e-04,
			-6.1035700575723644e-04,
			-5.4277523357811595e-04,
			-5.4686940852928067e-04,
			-6.3663386121590247e-04,
			-8.0759555645765300e-04,
			-1.0361182005924534e-03,
			-1.2831404037890676e-03,
			-1.5018735401092786e-03,
			-1.6480075080620943e-03,
			-1.6902522160705587e-03,
			-1.6187724217614032e-03,
			-1.4493561975616916e-03,
			-1.2219729859712122e-03,
			-9.9357826868147307e-04,
			-8.2635727901226479e-04,
			-7.7376662014393995e-04,
			-8.6744203333462462e-04,
			-1.1080893063261379e-03,
			-1.4627990304460733e-03,
			-1.8699254737555102e-03,
			-2.2510004567963386e-03,
			-2.5274762640143944e-03,
			-2.6387982693635644e-03,
			-2.5577291433000224e-03,
			-2.2991713422791313e-03,
			-1.9199554375127431e-03,
			-1.5089616520395268e-03,
			-1.1691295962667500e-03,
			-9.9489997697284663e-04,
			-1.0499463509793807e-03,
			-1.3503416137936456e-03,
			-1.8574229089935940e-03,
			-2.4826907958067261e-03,
			-3.1044754803961948e-03,
			-3.5933784465069858e-03,
			-3.8412720032523487e-03,
			-3.7874595744862814e-03,
			-3.4358093523187173e-03,
			-2.8583194491591827e-03,
			-2.1833724736893233e-03,
			-1.5703255973366405e-03,
			-1.1753198885291142e-03,
			-1.1155270970319925e-03,
			-1.4398884580665875e-03,
			-2.1134488140001156e-03,
			-3.0197519628140561e-03,
			-3.9819340454248483e-03,
			-4.7989298359828224e-03,
			-5.2895315090100694e-03,
			-5.3347847421739408e-03,
			-4.9089772067057768e-03,
			-4.0914494807903403e-03,
			-3.0553263232042977e-03,
			-2.0342643861179957e-03,
			-1.2733736807093051e-03,
			-9.7444743993873348e-04,
			-1.2475579059199422e-03,
			-2.0803813561700931e-03,
			-3.3333020239832397e-03,
			-4.7630034661209093e-03,
			-6.0709747972200970e-03,
			-6.9675036714509026e-03,
			-7.2376487999995407e-03,
			-6.7944115044867989e-03,
			-5.7063144258142880e-03,
			-4.1915922126739454e-03,
			-2.5782559165073099e-03,
			-1.2369414329412996e-03,
			-5.0000439657026010e-04,
			-5.8423897384719532e-04,
			-1.5348385257546453e-03,
			-3.2045099423030948e-03,
			-5.2745989273480509e-03,
			-7.3160653117819293e-03,
			-8.8790713655859960e-03,
			-9.5928420397288355e-03,
			-9.2540312860429144e-03,
			-7.8830675166212654e-03,
			-5.7338544840285889e-03,
			-3.2517317719462481e-03,
			-9.8584385474959567e-04,
			5.2737308823975636e-04,
			8.8539160937573045e-04,
			-8.1278022656460546e-05,
			-2.2555652814956074e-03,
			-5.2408116952406677e-03,
			-8.4306412604161132e-03,
			-1.1130333116173553e-02,
			-1.2706151017152620e-02,
			-1.2731360484584070e-02,
			-1.1096337143008480e-02,
			-8.0559256539294525e-03,
			-4.1992280006084327e-03,
			-3.4304817834827792e-04,
			2.6329471431176831e-03,
			3.9772854451277720e-03,
			3.2439302636812226e-03,
			4.1585700052789186e-04,
			-4.0560792879092526e-03,
			-9.3139281317865166e-03,
			-1.4247613714347402e-02,
			-1.7717974336771903e-02,
			-1.8805230945223246e-02,
			-1.7031601742540699e-02,
			-1.2508339273051561e-02,
			-5.9695509104043653e-03,
			1.3240748146035209e-03,
			7.8028250387371500e-03,
			1.1892350786033203e-02,
			1.2350080720461974e-02,
			8.5682310423650879e-03,
			7.7979549076405419e-04,
			-9.8815104670206631e-03,
			-2.1491211233783846e-02,
			-3.1606466363625955e-02,
			-3.7661758554831441e-02,
			-3.7422874756706775e-02,
			-2.9419394015175061e-02,
			-1.3275490993334308e-02,
			1.0126511572124210e-02,
			3.8687978116648487e-02,
			6.9343825778920370e-02,
			9.8485912360757433e-02,
			1.2249350941875659e-01,
			1.3828375204993210e-01,
			1.4378957268385817e-01,
			1.3828375204993198e-01,
			1.2249350941875640e-01,
			9.8485912360757155e-02,
			6.9343825778920107e-02,
			3.8687978116648321e-02,
			1.0126511572124158e-02,
			-1.3275490993334225e-02,
			-2.9419394015174839e-02,
			-3.7422874756706463e-02,
			-3.7661758554831101e-02,
			-3.1606466363625629e-02,
			-2.1491211233783607e-02,
			-9.8815104670205468e-03,
			7.7979549076404465e-04,
			8.5682310423649734e-03,
			1.2350080720461792e-02,
			1.1892350786033016e-02,
			7.8028250387370190e-03,
			1.3240748146034983e-03,
			-5.9695509104042534e-03,
			-1.2508339273051316e-02,
			-1.7031601742540346e-02,
			-1.8805230945222844e-02,
			-1.7717974336771518e-02,
			-1.4247613714347076e-02,
			-9.3139281317862910e-03,
			-4.0560792879091503e-03,
			4.1585700052788145e-04,
			3.2439302636811385e-03,
			3.9772854451276627e-03,
			2.6329471431176059e-03,
			-3.4304817834826751e-04,
			-4.1992280006083061e-03,
			-8.0559256539291975e-03,
			-1.1096337143008119e-02,
			-1.2731360484583639e-02,
			-1.2706151017152188e-02,
			-1.1130333116173159e-02,
			-8.4306412604158061e-03,
			-5.2408116952404717e-03,
			-2.2555652814955185e-03,
			-8.1278022656457077e-05,
			8.8539160937569489e-04,
			5.2737308823973467e-04,
			-9.8584385474955491e-04,
			-3.2517317719461085e-03,
			-5.7338544840283339e-03,
			-7.8830675166209115e-03,
			-9.2540312860424894e-03,
			-9.5928420397283845e-03,
			-8.8790713655855676e-03,
			-7.3160653117815720e-03,
			-5.2745989273477829e-03,
			-3.2045099423029331e-03,
			-1.5348385257545655e-03,
			-5.8423897384716496e-04,
			-5.0000439657023278e-04,
			-1.2369414329412311e-03,
			-2.5782559165071638e-03,
			-4.1915922126737068e-03,
			-5.7063144258139575e-03,
			-6.7944115044863947e-03,
			-7.2376487999991001e-03,
			-6.9675036714504724e-03,
			-6.0709747972197223e-03,
			-4.7630034661206057e-03,
			-3.3333020239830237e-03,
			-2.0803813561699586e-03,
			-1.2475579059198585e-03,
			-9.7444743993866712e-04,
			-1.2733736807092175e-03,
			-2.0342643861178543e-03,
			-3.0553263232040791e-03,
			-4.0914494807900480e-03,
			-4.9089772067054177e-03,
			-5.3347847421735478e-03,
			-5.2895315090096687e-03,
			-4.7989298359824538e-03,
			-3.9819340454245395e-03,
			-3.0197519628138176e-03,
			-2.1134488139999473e-03,
			-1.4398884580664711e-03,
			-1.1155270970319006e-03,
			-1.1753198885290160e-03,
			-1.5703255973365086e-03,
			-2.1833724736891359e-03,
			-2.8583194491589325e-03,
			-3.4358093523184151e-03,
			-3.7874595744859440e-03,
			-3.8412720032520008e-03,
			-3.5933784465066554e-03,
			-3.1044754803959073e-03,
			-2.4826907958064920e-03,
			-1.8574229089934173e-03,
			-1.3503416137935148e-03,
			-1.0499463509792775e-03,
			-9.9489997697274797e-04,
			-1.1691295962666325e-03,
			-1.5089616520393724e-03,
			-1.9199554375125441e-03,
			-2.2991713422788910e-03,
			-2.5577291432997522e-03,
			-2.6387982693632807e-03,
			-2.5274762640141194e-03,
			-2.2510004567960896e-03,
			-1.8699254737553005e-03,
			-1.4627990304459074e-03,
			-1.1080893063260097e-03,
			-8.6744203333452400e-04,
			-7.7376662014384866e-04,
			-8.2635727901216656e-04,
			-9.9357826868135316e-04,
			-1.2219729859710637e-03,
			-1.4493561975615118e-03,
			-1.6187724217612007e-03,
			-1.6902522160703449e-03,
			-1.6480075080618820e-03,
			-1.5018735401090826e-03,
			-1.2831404037888989e-03,
			-1.0361182005923146e-03,
			-8.0759555645754327e-04,
			-6.3663386121581508e-04,
			-5.4686940852920413e-04,
			-5.4277523357803897e-04,
			-6.1035700575714949e-04,
			-7.2175694572381886e-04,
			-8.4243680789320959e-04,
			-9.3916478239745296e-04,
			-9.8700968544822277e-04,
			-9.7391805542609714e-04,
			-9.0210075583701556e-04,
			-7.8621869932349417e-04,
			-6.4905509995686088e-04,
			-5.1584657092470653e-04,
			-4.0862956128612563e-04,
			-3.4182841427859273e-04,
			-3.1992389949445831e-04,
			-3.3750551620492721e-04,
			-3.8145932023054988e-04,
			-4.3459912811279558e-04,
			-4.7980096272088148e-04,
			-5.0368485858856907e-04,
			-4.9908565647338837e-04,
			-4.6590026089899489e-04,
			-4.1030106015092717e-04,
			-3.4266813193156422e-04,
			-2.7483905489694477e-04,
			-2.1736124094121881e-04,
			-1.7735491639291114e-04,
			-1.5738968347686275e-04,


			};
						alg_locat();

		if(*trig!=0)
			{

			if(PGV_type==1)
				{
					alg_locat();
				datamid=0.0;
				now_fir=i_fir_list;
				for(int i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataV[4]*Fir[i];
					now_fir=now_fir->last;
					}
					alg_locat();
				i_fir_list->band_pass_dataV[4]=datamid;



				datamid=0.0;
				now_fir=i_fir_list;
				for(int i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataD[4]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataD[4]=datamid;
alg_locat();
				}
			else if(PGV_type==2)
				{
					alg_locat();
				for(int j=0;j<3;j++)
					{
alg_locat();

					datamid=0.0;
					now_fir=i_fir_list;
					for(int i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataV[j]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataV[j]=datamid;
alg_locat();
					}
				i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
				for(int j=0;j<3;j++)
					{

alg_locat();
					datamid=0.0;
					now_fir=i_fir_list;
					for(int i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataD[j]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataD[j]=datamid;
					}
				i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
				}
alg_locat();
			if(*trig==1)
				{
					alg_locat();
				for(jjj=0;jjj<3;jjj++)
					{
					band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					alg_locat();
					}
					alg_locat();
				printf("j=%d\n",j);
				band_pass_data->final_PGA=i_fir_list->band_pass_data[j];//TODO j err
				alg_locat();
				band_pass_data->final_PGV=i_fir_list->band_pass_dataV[j];
				alg_locat();
				band_pass_data->final_PGD=i_fir_list->band_pass_dataD[j];
				alg_locat();
				*trig=2;
				alg_locat();
				*count+=1;
				alg_locat();
				alg_locat();
				}
			else
				{

alg_locat();
				for(jjj=0;jjj<3;jjj++)
					{
					if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
						band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					if(abs(i_fir_list->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
						band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					if(abs(i_fir_list->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
						band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}

				if(i_fir_list->band_pass_data[4]>band_pass_data->final_PGA)
					{
					band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
					band_pass_data->utc_second_final_PGA=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGA=i_fir_list->utc_nanosecond; //utc时间纳秒

					}
				if(i_fir_list->band_pass_dataV[4]>band_pass_data->final_PGV)
					{
					band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
					band_pass_data->utc_second_final_PGV=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGV=i_fir_list->utc_nanosecond; //utc时间纳秒
					}
				if(i_fir_list->band_pass_dataD[4]>band_pass_data->final_PGD)
					{
					band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
					band_pass_data->utc_second_final_PGD=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGD=i_fir_list->utc_nanosecond; //utc时间纳秒
					}
				if(*count==timespan*200)

					{
					*count=1;
					alg_locat();
					return 2;
					}
				else
					{
alg_locat();

					*count+=1;
					}



				}
			}
		return 1;
		}
	else if(i_fir_list->sample_rata==200&&band_pass_flag==1)
		{
			alg_locat();
		firLength=541;
		//if(dataNum<301)
		//	{
		//	return -1;
		//	}
		double Fir[541]={-9.2099036038378532e-04,
			-7.8804826816350514e-04,
			-6.6560344061362866e-04,
			-5.6687547227462695e-04,
			-5.0305195443362731e-04,
			-4.8212458142003447e-04,
			-5.0801522925230963e-04,
			-5.8008622249482611e-04,
			-6.9309294300030314e-04,
			-8.3759419607064940e-04,
			-1.0007904473973064e-03,
			-1.1677166438897948e-03,
			-1.3226792145237351e-03,
			-1.4507998700714149e-03,
			-1.5395149164156340e-03,
			-1.5798796606311268e-03,
			-1.5675433814101799e-03,
			-1.5032900196379525e-03,
			-1.3930805785312536e-03,
			-1.2475813887482972e-03,
			-1.0812132551662164e-03,
			-9.1080504603679199e-04,
			-7.5397661608138985e-04,
			-6.2740578524895022e-04,
			-5.4514918710074384e-04,
			-5.1718531515799690e-04,
			-5.4832980445290475e-04,
			-6.3763933271860978e-04,
			-7.7837451944441324e-04,
			-9.5853814908441635e-04,
			-1.1619481531160475e-03,
			-1.3697506595220668e-03,
			-1.5622325114940184e-03,
			-1.7207597251464868e-03,
			-1.8296519661545247e-03,
			-1.8778052751213447e-03,
			-1.8598961554604190e-03,
			-1.7770380880220437e-03,
			-1.6368131495740684e-03,
			-1.4526618487227868e-03,
			-1.2426777301980229e-03,
			-1.0279134888687795e-03,
			-8.3035621871027751e-04,
			-6.7076573516148576e-04,
			-5.6658772472861297e-04,
			-5.3015062268610609e-04,
			-5.6733143777716296e-04,
			-6.7683314040934404e-04,
			-8.5015853938458274e-04,
			-1.0722982056842946e-03,
			-1.3230794514709333e-03,
			-1.5790565837738907e-03,
			-1.8157663436507616e-03,
			-2.0101324311648091e-03,
			-2.1427836247891099e-03,
			-2.2000535925879644e-03,
			-2.1754571889266504e-03,
			-2.0704856679088202e-03,
			-1.8946275302998378e-03,
			-1.6645966177239893e-03,
			-1.4028273596775336e-03,
			-1.1353710613629898e-03,
			-8.8938935754289306e-04,
			-6.9048502597345474e-04,
			-5.6013150133180209e-04,
			-5.1345808254886992e-04,
			-5.5761788704660181e-04,
			-6.9091251719947467e-04,
			-9.0277595818363658e-04,
			-1.1746371336738743e-03,
			-1.4815938115070816e-03,
			-1.7947487057919354e-03,
			-2.0839898846883352e-03,
			-2.3209490512706072e-03,
			-2.4818481466164577e-03,
			-2.5499498422015465e-03,
			-2.5173609120326093e-03,
			-2.3859964670479806e-03,
			-2.1675922672027342e-03,
			-1.8827443572853935e-03,
			-1.5590512379570593e-03,
			-1.2285242513423947e-03,
			-9.2450775236682355e-04,
			-6.7840413588373869e-04,
			-5.1652413990349946e-04,
			-4.5737696479821453e-04,
			-5.0967758766085958e-04,
			-6.7128325883947910e-04,
			-9.2918345122575824e-04,
			-1.2605657298138107e-03,
			-1.6348739179959412e-03,
			-2.0166749784740114e-03,
			-2.3690672229614647e-03,
			-2.6573034400949446e-03,
			-2.8522746288034552e-03,
			-2.9335066344339071e-03,
			-2.8913631482099544e-03,
			-2.7282208685875907e-03,
			-2.4584796038279720e-03,
			-2.1073826169179673e-03,
			-1.7087397545895546e-03,
			-1.3017563556190544e-03,
			-9.2726353456713112e-04,
			-6.2371066482157266e-04,
			-4.2331173523314162e-04,
			-3.4872998370800008e-04,
			-4.1063976990715308e-04,
			-6.0642476251474388e-04,
			-9.2016438994335105e-04,
			-1.3239361803047587e-03,
			-1.7803320420881636e-03,
			-2.2459644154696938e-03,
			-2.6756357782218845e-03,
			-3.0267727437604114e-03,
			-3.2636916931282249e-03,
			-3.3612706949638629e-03,
			-3.3076524683700241e-03,
			-3.1056912475649718e-03,
			-2.7729746824372565e-03,
			-2.3403892837598060e-03,
			-1.8493412139778430e-03,
			-1.3478794014496636e-03,
			-8.8608150223198922e-04,
			-5.1114349515264787e-04,
			-2.6265206842258714e-04,
			-1.6851079481957512e-04,
			-2.4193625100973236e-04,
			-4.7984317191924781e-04,
			-8.6280715728713074e-04,
			-1.3566415625985743e-03,
			-1.9154665600813400e-03,
			-2.4859984617802782e-03,
			-3.0126612251738065e-03,
			-3.4430325498542480e-03,
			-3.7330937104403427e-03,
			-3.8517604832979464e-03,
			-3.7842324736531100e-03,
			-3.5338050023559580e-03,
			-3.1219319124799489e-03,
			-2.5864957712039751e-03,
			-1.9784179024470525e-03,
			-1.3569073131266510e-03,
			-7.8378825350351668e-04,
			-3.1744647022797834e-04,
			-6.9834312824419518e-06,
			1.1284000836526972e-04,
			2.5354317567758977e-05,
			-2.6597224788052265e-04,
			-7.3743067972836655e-04,
			-1.3469646033695993e-03,
			-2.0379172193921657e-03,
			-2.7443031575346403e-03,
			-3.3971190584163721e-03,
			-3.9310935787960494e-03,
			-4.2912209155740550e-03,
			-4.4384286657659696e-03,
			-4.3538016122489434e-03,
			-4.0409122987702514e-03,
			-3.5259856147050032e-03,
			-2.8558317578400881e-03,
			-2.0937002074628681e-03,
			-1.3134155200516908e-03,
			-5.9233317583970750e-04,
			-3.7822358250078755e-06,
			3.9027251319353107e-04,
			5.4562083721612718e-04,
			4.4059792201310989e-04,
			7.8766065900046770e-05,
			-5.1082710083981203e-04,
			-1.2758972595056852e-03,
			-2.1455177714411132e-03,
			-3.0366641508699954e-03,
			-3.8621118097987728e-03,
			-4.5389428080685424e-03,
			-4.9968394044701686e-03,
			-5.1853430528545691e-03,
			-5.0793389195515149e-03,
			-4.6821819764329082e-03,
			-4.0260977778495107e-03,
			-3.1697493995113059e-03,
			-2.1931374329631778e-03,
			-1.1902658708177875e-03,
			-2.6023694791261148e-04,
			5.0239086906258580e-04,
			1.0170537242174349e-03,
			1.2255086096815426e-03,
			1.0981873138275063e-03,
			6.3790127253392042e-04,
			-1.1953798113192900e-04,
			-1.1079276778061561e-03,
			-2.2363446488090528e-03,
			-3.3974065727959773e-03,
			-4.4773856919170718e-03,
			-5.3672354801872664e-03,
			-5.9734753110310982e-03,
			-6.2278624174949846e-03,
			-6.0948685932705384e-03,
			-5.5761654078248781e-03,
			-4.7115908003906980e-03,
			-3.5763979419758700e-03,
			-2.2749440304833169e-03,
			-9.3132842805940036e-04,
			3.2219796078291040e-04,
			1.3579883121752859e-03,
			2.0657109495232774e-03,
			2.3637734346849855e-03,
			2.2083038115951678e-03,
			1.5987342434481875e-03,
			5.7933196288304162e-04,
			-7.6360523631937476e-04,
			-2.3087604573219398e-03,
			-3.9104757284739783e-03,
			-5.4121833258849901e-03,
			-6.6613801997739783e-03,
			-7.5247452268142716e-03,
			-7.9019373222448622e-03,
			-7.7366891333259091e-03,
			-7.0240232005336425e-03,
			-5.8127492393513962e-03,
			-4.2028248373273342e-03,
			-2.3376400760274124e-03,
			-3.9177573876898449e-04,
			1.4447611912945188e-03,
			2.9844462893490794e-03,
			4.0606549183290512e-03,
			4.5448405291744071e-03,
			4.3607762636084981e-03,
			3.4943738979672815e-03,
			1.9979539455294236e-03,
			-1.1679981628951848e-05,
			-2.3614511802506899e-03,
			-4.8360047833993728e-03,
			-7.1964238219141821e-03,
			-9.2021151553450583e-03,
			-1.0633951165805386e-02,
			-1.1316552798255641e-02,
			-1.1137586000254470e-02,
			-1.0062124842053854e-02,
			-8.1405010867291669e-03,
			-5.5085851061377634e-03,
			-2.3800849646007840e-03,
			9.6884449252551230e-04,
			4.2216836898676243e-03,
			7.0486768194433849e-03,
			9.1368371170709086e-03,
			1.0220305897430315e-02,
			1.0108397670110335e-02,
			8.7087474354680741e-03,
			6.0432886744458819e-03,
			2.2553117568610858e-03,
			-2.3934561482566973e-03,
			-7.5360015862024794e-03,
			-1.2722801055507309e-02,
			-1.7452784005121087e-02,
			-2.1210303569516521e-02,
			-2.3505355684549270e-02,
			-2.3913919959109343e-02,
			-2.2115177846259819e-02,
			-1.7922511198655740e-02,
			-1.1305590976966528e-02,
			-2.4015034641907277e-03,
			8.4863183807199517e-03,
			2.0901652188791666e-02,
			3.4260844192471288e-02,
			4.7888335453839595e-02,
			6.1059894106108653e-02,
			7.3050446110118419e-02,
			8.3182990982319571e-02,
			9.0874957753215704e-02,
			9.5678513253330877e-02,
			9.7311769218428879e-02,
			9.5678513253330918e-02,
			9.0874957753215677e-02,
			8.3182990982319585e-02,
			7.3050446110118419e-02,
			6.1059894106108667e-02,
			4.7888335453839609e-02,
			3.4260844192471288e-02,
			2.0901652188791666e-02,
			8.4863183807199569e-03,
			-2.4015034641907285e-03,
			-1.1305590976966534e-02,
			-1.7922511198655757e-02,
			-2.2115177846259833e-02,
			-2.3913919959109346e-02,
			-2.3505355684549270e-02,
			-2.1210303569516531e-02,
			-1.7452784005121090e-02,
			-1.2722801055507311e-02,
			-7.5360015862024829e-03,
			-2.3934561482566981e-03,
			2.2553117568610867e-03,
			6.0432886744458819e-03,
			8.7087474354680741e-03,
			1.0108397670110337e-02,
			1.0220305897430322e-02,
			9.1368371170709086e-03,
			7.0486768194433849e-03,
			4.2216836898676261e-03,
			9.6884449252551273e-04,
			-2.3800849646007844e-03,
			-5.5085851061377642e-03,
			-8.1405010867291686e-03,
			-1.0062124842053856e-02,
			-1.1137586000254470e-02,
			-1.1316552798255644e-02,
			-1.0633951165805386e-02,
			-9.2021151553450635e-03,
			-7.1964238219141838e-03,
			-4.8360047833993763e-03,
			-2.3614511802506908e-03,
			-1.1679981628951848e-05,
			1.9979539455294258e-03,
			3.4943738979672854e-03,
			4.3607762636085007e-03,
			4.5448405291744088e-03,
			4.0606549183290546e-03,
			2.9844462893490803e-03,
			1.4447611912945196e-03,
			-3.9177573876898449e-04,
			-2.3376400760274133e-03,
			-4.2028248373273359e-03,
			-5.8127492393514005e-03,
			-7.0240232005336460e-03,
			-7.7366891333259160e-03,
			-7.9019373222448709e-03,
			-7.5247452268142768e-03,
			-6.6613801997739835e-03,
			-5.4121833258849944e-03,
			-3.9104757284739800e-03,
			-2.3087604573219420e-03,
			-7.6360523631937541e-04,
			5.7933196288304206e-04,
			1.5987342434481888e-03,
			2.2083038115951695e-03,
			2.3637734346849881e-03,
			2.0657109495232787e-03,
			1.3579883121752868e-03,
			3.2219796078291127e-04,
			-9.3132842805940057e-04,
			-2.2749440304833191e-03,
			-3.5763979419758734e-03,
			-4.7115908003907024e-03,
			-5.5761654078248851e-03,
			-6.0948685932705410e-03,
			-6.2278624174949872e-03,
			-5.9734753110311043e-03,
			-5.3672354801872690e-03,
			-4.4773856919170770e-03,
			-3.3974065727959803e-03,
			-2.2363446488090563e-03,
			-1.1079276778061574e-03,
			-1.1953798113192943e-04,
			6.3790127253392085e-04,
			1.0981873138275076e-03,
			1.2255086096815435e-03,
			1.0170537242174358e-03,
			5.0239086906258667e-04,
			-2.6023694791261213e-04,
			-1.1902658708177892e-03,
			-2.1931374329631804e-03,
			-3.1697493995113107e-03,
			-4.0260977778495150e-03,
			-4.6821819764329151e-03,
			-5.0793389195515218e-03,
			-5.1853430528545760e-03,
			-4.9968394044701747e-03,
			-4.5389428080685442e-03,
			-3.8621118097987776e-03,
			-3.0366641508699980e-03,
			-2.1455177714411145e-03,
			-1.2758972595056867e-03,
			-5.1082710083981311e-04,
			7.8766065900046770e-05,
			4.4059792201311075e-04,
			5.4562083721612805e-04,
			3.9027251319353150e-04,
			-3.7822358250078755e-06,
			-5.9233317583970880e-04,
			-1.3134155200516921e-03,
			-2.0937002074628711e-03,
			-2.8558317578400915e-03,
			-3.5259856147050088e-03,
			-4.0409122987702592e-03,
			-4.3538016122489503e-03,
			-4.4384286657659757e-03,
			-4.2912209155740620e-03,
			-3.9310935787960546e-03,
			-3.3971190584163777e-03,
			-2.7443031575346438e-03,
			-2.0379172193921687e-03,
			-1.3469646033696017e-03,
			-7.3743067972836828e-04,
			-2.6597224788052351e-04,
			2.5354317567759410e-05,
			1.1284000836526972e-04,
			-6.9834312824415181e-06,
			-3.1744647022797877e-04,
			-7.8378825350351841e-04,
			-1.3569073131266529e-03,
			-1.9784179024470564e-03,
			-2.5864957712039799e-03,
			-3.1219319124799550e-03,
			-3.5338050023559641e-03,
			-3.7842324736531187e-03,
			-3.8517604832979556e-03,
			-3.7330937104403505e-03,
			-3.4430325498542550e-03,
			-3.0126612251738143e-03,
			-2.4859984617802843e-03,
			-1.9154665600813439e-03,
			-1.3566415625985765e-03,
			-8.6280715728713248e-04,
			-4.7984317191924932e-04,
			-2.4193625100973301e-04,
			-1.6851079481957555e-04,
			-2.6265206842258801e-04,
			-5.1114349515264874e-04,
			-8.8608150223199096e-04,
			-1.3478794014496660e-03,
			-1.8493412139778472e-03,
			-2.3403892837598117e-03,
			-2.7729746824372626e-03,
			-3.1056912475649788e-03,
			-3.3076524683700315e-03,
			-3.3612706949638690e-03,
			-3.2636916931282319e-03,
			-3.0267727437604183e-03,
			-2.6756357782218901e-03,
			-2.2459644154696990e-03,
			-1.7803320420881675e-03,
			-1.3239361803047617e-03,
			-9.2016438994335268e-04,
			-6.0642476251474497e-04,
			-4.1063976990715395e-04,
			-3.4872998370800073e-04,
			-4.2331173523314271e-04,
			-6.2371066482157418e-04,
			-9.2726353456713318e-04,
			-1.3017563556190573e-03,
			-1.7087397545895596e-03,
			-2.1073826169179721e-03,
			-2.4584796038279785e-03,
			-2.7282208685875963e-03,
			-2.8913631482099622e-03,
			-2.9335066344339149e-03,
			-2.8522746288034630e-03,
			-2.6573034400949511e-03,
			-2.3690672229614721e-03,
			-2.0166749784740171e-03,
			-1.6348739179959453e-03,
			-1.2605657298138137e-03,
			-9.2918345122576030e-04,
			-6.7128325883948105e-04,
			-5.0967758766086110e-04,
			-4.5737696479821561e-04,
			-5.1652413990350054e-04,
			-6.7840413588374053e-04,
			-9.2450775236682593e-04,
			-1.2285242513423978e-03,
			-1.5590512379570643e-03,
			-1.8827443572853996e-03,
			-2.1675922672027411e-03,
			-2.3859964670479871e-03,
			-2.5173609120326171e-03,
			-2.5499498422015530e-03,
			-2.4818481466164642e-03,
			-2.3209490512706150e-03,
			-2.0839898846883422e-03,
			-1.7947487057919410e-03,
			-1.4815938115070857e-03,
			-1.1746371336738774e-03,
			-9.0277595818363940e-04,
			-6.9091251719947640e-04,
			-5.5761788704660311e-04,
			-5.1345808254887144e-04,
			-5.6013150133180361e-04,
			-6.9048502597345647e-04,
			-8.8938935754289588e-04,
			-1.1353710613629931e-03,
			-1.4028273596775388e-03,
			-1.6645966177239954e-03,
			-1.8946275302998434e-03,
			-2.0704856679088272e-03,
			-2.1754571889266573e-03,
			-2.2000535925879735e-03,
			-2.1427836247891172e-03,
			-2.0101324311648161e-03,
			-1.8157663436507688e-03,
			-1.5790565837738965e-03,
			-1.3230794514709379e-03,
			-1.0722982056842985e-03,
			-8.5015853938458566e-04,
			-6.7683314040934653e-04,
			-5.6733143777716502e-04,
			-5.3015062268610771e-04,
			-5.6658772472861503e-04,
			-6.7076573516148782e-04,
			-8.3035621871028087e-04,
			-1.0279134888687830e-03,
			-1.2426777301980277e-03,
			-1.4526618487227918e-03,
			-1.6368131495740745e-03,
			-1.7770380880220505e-03,
			-1.8598961554604264e-03,
			-1.8778052751213517e-03,
			-1.8296519661545317e-03,
			-1.7207597251464937e-03,
			-1.5622325114940253e-03,
			-1.3697506595220725e-03,
			-1.1619481531160521e-03,
			-9.5853814908442015e-04,
			-7.7837451944441616e-04,
			-6.3763933271861217e-04,
			-5.4832980445290724e-04,
			-5.1718531515799874e-04,
			-5.4514918710074623e-04,
			-6.2740578524895249e-04,
			-7.5397661608139343e-04,
			-9.1080504603679589e-04,
			-1.0812132551662208e-03,
			-1.2475813887483022e-03,
			-1.3930805785312590e-03,
			-1.5032900196379592e-03,
			-1.5675433814101875e-03,
			-1.5798796606311340e-03,
			-1.5395149164156405e-03,
			-1.4507998700714214e-03,
			-1.3226792145237412e-03,
			-1.1677166438897998e-03,
			-1.0007904473973103e-03,
			-8.3759419607065287e-04,
			-6.9309294300030650e-04,
			-5.8008622249482893e-04,
			-5.0801522925231191e-04,
			-4.8212458142003674e-04,
			-5.0305195443362970e-04,
			-5.6687547227462652e-04,
			-6.6560344061365078e-04,
			-7.8804826816350926e-04,
			-9.2099036038381839e-04,


			};
		if(*trig!=0)
			{
alg_locat();
			if(PGV_type==1)
				{
				datamid=0.0;
				now_fir=i_fir_list;
				for(int i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataV[4]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataV[4]=datamid;

alg_locat();

				datamid=0.0;
				now_fir=i_fir_list;
				for(int i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataD[4]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataD[4]=datamid;

				}
			else if(PGV_type==2)
				{
				for(int j=0;j<3;j++)
					{


					datamid=0.0;
					now_fir=i_fir_list;
					for(int i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataV[j]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataV[j]=datamid;

					}
				i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
				for(int j=0;j<3;j++)
					{


					datamid=0.0;
					now_fir=i_fir_list;
					for(int i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataD[j]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataD[j]=datamid;
					}
				i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
				}

			if(*trig==1)
				{
				for(jjj=0;jjj<3;jjj++)
					{
					band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}
				band_pass_data->final_PGA=i_fir_list->band_pass_data[j];
				band_pass_data->final_PGV=i_fir_list->band_pass_dataV[j];
				band_pass_data->final_PGD=i_fir_list->band_pass_dataD[j];
				*trig=2;
				*count+=1;
				}
			else
				{

alg_locat();
				for(jjj=0;jjj<3;jjj++)
					{
					if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
						band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					if(abs(i_fir_list->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
						band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					if(abs(i_fir_list->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
						band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}

				if(i_fir_list->band_pass_data[4]>band_pass_data->final_PGA)
					{
					band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
					band_pass_data->utc_second_final_PGA=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGA=i_fir_list->utc_nanosecond; //utc时间纳秒

					}
				if(i_fir_list->band_pass_dataV[4]>band_pass_data->final_PGV)
					{
					band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
					band_pass_data->utc_second_final_PGV=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGV=i_fir_list->utc_nanosecond; //utc时间纳秒
					}
				if(i_fir_list->band_pass_dataD[4]>band_pass_data->final_PGD)
					{
					band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
					band_pass_data->utc_second_final_PGD=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGD=i_fir_list->utc_nanosecond; //utc时间纳秒
					}
				if(*count==timespan*200)

					{
					*count=1;
					return 2;
					}
				else
					{


					*count+=1;
					}



				}
			}
		return 1;
		}



	}


int band_passstruct2(FIR_LIST *i_fir_list,int band_pass_flag,int x_y_z)
	{

	//printf(RED"band_pass_flag=%d\n"NONE,band_pass_flag);
	int firLength,j,jjj,i;
	double datamid;
	FIR_LIST *now_fir;
	if (i_fir_list->sample_rata==50&&band_pass_flag==0)
		{

			

			
			firLength=81;
			double Fir[81]={-4.7987787339820936e-04,
				-8.9057350076593368e-04,
				-7.2903341056485352e-04,
				-9.3968046651590189e-04,
				-2.0015152670250906e-03,
				-1.8457782153191327e-03,
				-1.4331943313841396e-03,
				-3.2987790655067970e-03,
				-3.9188767708761094e-03,
				-2.2358326021832526e-03,
				-4.2761095213556272e-03,
				-6.9685597648698229e-03,
				-4.0562398557881119e-03,
				-4.5086713435378723e-03,
				-1.0324010165847381e-02,
				-7.7980789590883538e-03,
				-4.2123548102063557e-03,
				-1.2580685653923828e-02,
				-1.3896183105007932e-02,
				-4.6707793854684938e-03,
				-1.2139776287417038e-02,
				-2.1492365469531257e-02,
				-8.0968892823001046e-03,
				-8.2631555848332473e-03,
				-2.7966602054323594e-02,
				-1.6735759731169867e-02,
				-2.1834926757662077e-03,
				-2.9254096192636532e-02,
				-3.1499163705017090e-02,
				2.3107659525776346e-03,
				-2.0832464828927390e-02,
				-5.0853889965031082e-02,
				-1.1624388651572256e-03,
				1.8841462457617236e-03,
				-7.0730297852423088e-02,
				-2.3669862992490260e-02,
				4.9655253129437991e-02,
				-8.5754335252881606e-02,
				-1.1745446174509039e-01,
				2.7761355362248835e-01,
				5.7538029520670841e-01,
				2.7761355362248769e-01,
				-1.1745446174508975e-01,
				-8.5754335252880912e-02,
				4.9655253129437457e-02,
				-2.3669862992489934e-02,
				-7.0730297852421936e-02,
				1.8841462457616889e-03,
				-1.1624388651572048e-03,
				-5.0853889965029819e-02,
				-2.0832464828926815e-02,
				2.3107659525775617e-03,
				-3.1499163705016028e-02,
				-2.9254096192635470e-02,
				-2.1834926757661245e-03,
				-1.6735759731169159e-02,
				-2.7966602054322321e-02,
				-8.2631555848328413e-03,
				-8.0968892822996814e-03,
				-2.1492365469530057e-02,
				-1.2139776287416327e-02,
				-4.6707793854682024e-03,
				-1.3896183105007011e-02,
				-1.2580685653922945e-02,
				-4.2123548102060435e-03,
				-7.7980789590877501e-03,
				-1.0324010165846531e-02,
				-4.5086713435374846e-03,
				-4.0562398557877433e-03,
				-6.9685597648691568e-03,
				-4.2761095213552005e-03,
				-2.2358326021830158e-03,
				-3.9188767708756775e-03,
				-3.2987790655064630e-03,
				-1.4331943313839600e-03,
				-1.8457782153188935e-03,
				-2.0015152670248100e-03,
				-9.3968046651576485e-04,
				-7.2903341056474108e-04,
				-8.9057350076577387e-04,
				-4.7987787339812745e-04,
				};



		for(j=0;j<3;j++)
			{

			datamid=0.0;
			now_fir=i_fir_list;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->data[j]*Fir[i];
				now_fir=now_fir->last;
				}

			i_fir_list->band_pass_data[j]=datamid;
			}
			if(x_y_z==0)
			{
				i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]),0.5);
			}
			else
			{
				i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]+i_fir_list->band_pass_data[2]*i_fir_list->band_pass_data[2]),0.5);
			}
		for(j=0;j<3;j++)
			{
			datamid=0.0;
			now_fir=i_fir_list;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->dataV[j]*Fir[i];
				now_fir=now_fir->last;
				}
			i_fir_list->band_pass_dataV[j]=datamid;
			}
			if(x_y_z==0)
			{
				i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
			}
			else
			{
				i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]+i_fir_list->band_pass_dataV[2]*i_fir_list->band_pass_dataV[2]),0.5);
			}
		for(j=0;j<3;j++)
			{
			datamid=0.0;
			now_fir=i_fir_list;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->dataD[j]*Fir[i];
				now_fir=now_fir->last;
				}
			i_fir_list->band_pass_dataD[j]=datamid;
			}
			if(x_y_z==0)
			{
				i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
			}
			else
			{
				i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]+i_fir_list->band_pass_dataD[2]*i_fir_list->band_pass_dataD[2]),0.5);
			}
		return 1;
		}
	else if (i_fir_list->sample_rata==50&&band_pass_flag==1)
			{




			firLength=151;
			double Fir[151]={-2.8052426906829513e-03,
				-4.2393366582970269e-03,
				-3.8887138369385330e-03,
				-2.2354116003412555e-03,
				-1.7151340451976370e-03,
				-3.3681835107814504e-03,
				-5.1779067586189562e-03,
				-4.6965135173902524e-03,
				-2.5638580821051682e-03,
				-1.8818136148366425e-03,
				-3.9473893023176630e-03,
				-6.1968403681345145e-03,
				-5.5591924712764754e-03,
				-2.8602285633303683e-03,
				-1.9855715179514558e-03,
				-4.5343773820232715e-03,
				-7.2993746523036347e-03,
				-6.4757972766725895e-03,
				-3.1075377181290190e-03,
				-2.0034515060087738e-03,
				-5.1201983246674521e-03,
				-8.4924282172401180e-03,
				-7.4477448916228876e-03,
				-3.2854307785719003e-03,
				-1.9068638995382889e-03,
				-5.6956197214221181e-03,
				-9.7890130188554095e-03,
				-8.4805326328304762e-03,
				-3.3686880184671422e-03,
				-1.6587501518070553e-03,
				-6.2513201008398845e-03,
				-1.1212180130190147e-02,
				-9.5865220664507079e-03,
				-3.3245287368907092e-03,
				-1.2085331900947341e-03,
				-6.7780883098406538e-03,
				-1.2801858768458711e-02,
				-1.0789770869833983e-02,
				-3.1075700373275851e-03,
				-4.8269424897207818e-04,
				-7.2670234585519751e-03,
				-1.4627552535563389e-02,
				-1.2135072981765502e-02,
				-2.6498708200075548e-03,
				6.3396297658225372e-04,
				-7.7097304696529074e-03,
				-1.6813951744110978e-02,
				-1.3706460562373948e-02,
				-1.8396919533613628e-03,
				2.3388911427624061e-03,
				-8.0985063426770101e-03,
				-1.9598293978969096e-02,
				-1.5669566680424962e-02,
				-4.7103250693004398e-04,
				5.0106092712312988e-03,
				-8.4265124453908481e-03,
				-2.3477962536707364e-02,
				-1.8384256507005932e-02,
				1.8961989182070325e-03,
				9.4930912865623281e-03,
				-8.6879284730553841e-03,
				-2.9673940083844816e-02,
				-2.2776743005803374e-02,
				6.4259738795488016e-03,
				1.8156146307088068e-02,
				-8.8780841635862553e-03,
				-4.2138499851260856e-02,
				-3.2106505797306333e-02,
				1.7595589150292312e-02,
				4.1258267838167328e-02,
				-8.9935654105577235e-03,
				-8.4619383336774115e-02,
				-7.1400968296348372e-02,
				8.4628282316732584e-02,
				2.9419739638965176e-01,
				3.9169381130492797e-01,
				2.9419739638965176e-01,
				8.4628282316732584e-02,
				-7.1400968296348372e-02,
				-8.4619383336774115e-02,
				-8.9935654105577252e-03,
				4.1258267838167349e-02,
				1.7595589150292319e-02,
				-3.2106505797306346e-02,
				-4.2138499851260863e-02,
				-8.8780841635862588e-03,
				1.8156146307088072e-02,
				6.4259738795488016e-03,
				-2.2776743005803384e-02,
				-2.9673940083844830e-02,
				-8.6879284730553893e-03,
				9.4930912865623333e-03,
				1.8961989182070343e-03,
				-1.8384256507005946e-02,
				-2.3477962536707378e-02,
				-8.4265124453908533e-03,
				5.0106092712313005e-03,
				-4.7103250693004398e-04,
				-1.5669566680424969e-02,
				-1.9598293978969110e-02,
				-8.0985063426770188e-03,
				2.3388911427624079e-03,
				-1.8396919533613663e-03,
				-1.3706460562373958e-02,
				-1.6813951744110992e-02,
				-7.7097304696529126e-03,
				6.3396297658225372e-04,
				-2.6498708200075574e-03,
				-1.2135072981765515e-02,
				-1.4627552535563406e-02,
				-7.2670234585519829e-03,
				-4.8269424897207731e-04,
				-3.1075700373275877e-03,
				-1.0789770869833994e-02,
				-1.2801858768458723e-02,
				-6.7780883098406616e-03,
				-1.2085331900947350e-03,
				-3.3245287368907140e-03,
				-9.5865220664507183e-03,
				-1.1212180130190158e-02,
				-6.2513201008398932e-03,
				-1.6587501518070587e-03,
				-3.3686880184671461e-03,
				-8.4805326328304884e-03,
				-9.7890130188554234e-03,
				-5.6956197214221250e-03,
				-1.9068638995382910e-03,
				-3.2854307785719064e-03,
				-7.4477448916228997e-03,
				-8.4924282172401319e-03,
				-5.1201983246674599e-03,
				-2.0034515060087777e-03,
				-3.1075377181290238e-03,
				-6.4757972766725999e-03,
				-7.2993746523036451e-03,
				-4.5343773820232776e-03,
				-1.9855715179514588e-03,
				-2.8602285633303726e-03,
				-5.5591924712764867e-03,
				-6.1968403681345232e-03,
				-3.9473893023176700e-03,
				-1.8818136148366458e-03,
				-2.5638580821051716e-03,
				-4.6965135173902611e-03,
				-5.1779067586189640e-03,
				-3.3681835107814543e-03,
				-1.7151340451976407e-03,
				-2.2354116003412351e-03,
				-3.8887138369385656e-03,
				-4.2393366582969870e-03,
				-2.8052426906829439e-03,

				};



			for(j=0;j<3;j++)
				{

				datamid=0.0;
				now_fir=i_fir_list;
				for(i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->data[j]*Fir[i];
					now_fir=now_fir->last;
					}

				i_fir_list->band_pass_data[j]=datamid;
				}
				if(x_y_z==0)
				{
					i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]),0.5);
				}
				else
				{
					i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]+i_fir_list->band_pass_data[2]*i_fir_list->band_pass_data[2]),0.5);
				}
			for(j=0;j<3;j++)
				{
				datamid=0.0;
				now_fir=i_fir_list;
				for(i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataV[j]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataV[j]=datamid;
				}
				if(x_y_z==0)
				{
					i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
				}
				else
				{
					i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]+i_fir_list->band_pass_dataV[2]*i_fir_list->band_pass_dataV[2]),0.5);
				}
			for(j=0;j<3;j++)
				{
				datamid=0.0;
				now_fir=i_fir_list;
				for(i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataD[j]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataD[j]=datamid;
				}
				if(x_y_z==0)
				{
					i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
				}
				else
				{
					i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]+i_fir_list->band_pass_dataD[2]*i_fir_list->band_pass_dataD[2]),0.5);
				}







			return 1;
			}
	else if(i_fir_list->sample_rata==100&&band_pass_flag==0)
		{

		firLength=191;
		double Fir[191]={-1.0096108503799409e-03,
			-1.3950482601184145e-03,
			-2.2527488512072823e-03,
			-2.9478325266950626e-03,
			-2.9241282941009309e-03,
			-2.1964877583498382e-03,
			-1.3932186866449717e-03,
			-1.2683702309322061e-03,
			-2.0587294816955936e-03,
			-3.2307108495224480e-03,
			-3.8728518839418980e-03,
			-3.4512139742405856e-03,
			-2.3045215990983815e-03,
			-1.4270997345429326e-03,
			-1.6661388536950924e-03,
			-2.9780040916341042e-03,
			-4.3915096269727697e-03,
			-4.7685469089617048e-03,
			-3.7708238360917514e-03,
			-2.2154696854772564e-03,
			-1.4639880273141859e-03,
			-2.2943598211664952e-03,
			-4.1868456476722750e-03,
			-5.6701595913976281e-03,
			-5.5118721440431517e-03,
			-3.7942060764075075e-03,
			-1.9423711063670419e-03,
			-1.6026343679009464e-03,
			-3.2475373165740244e-03,
			-5.6846723133800129e-03,
			-6.9564131921419870e-03,
			-5.9605784961465312e-03,
			-3.4555395583318526e-03,
			-1.5446848893690436e-03,
			-1.9729728155626920e-03,
			-4.6090756549750133e-03,
			-7.4249335517157806e-03,
			-8.0957173947760943e-03,
			-5.9658402480322953e-03,
			-2.7259882160986819e-03,
			-1.1326443571281007e-03,
			-2.7279163951726233e-03,
			-6.4379538633729206e-03,
			-9.3078652451388747e-03,
			-8.8937043531173623e-03,
			-5.3843686320969916e-03,
			-1.6236386602042371e-03,
			-8.6795329695463013e-04,
			-4.0358532878403434e-03,
			-8.7602540790057502e-03,
			-1.1177665546498936e-02,
			-9.1197841612625230e-03,
			-4.0841129832286773e-03,
			-2.1710181588843413e-04,
			-9.6506787169073674e-04,
			-6.0820299780298100e-03,
			-1.1571060989487639e-02,
			-1.2821283663388564e-02,
			-8.4992305065876590e-03,
			-1.9327687604891049e-03,
			1.3784923032710335e-03,
			-1.7050246429269466e-03,
			-9.0969663617697753e-03,
			-1.4856515017832844e-02,
			-1.3958829431456619e-02,
			-6.6666698386317613e-03,
			1.2562792472859616e-03,
			3.0131140370235859e-03,
			-3.4963797956000272e-03,
			-1.3462418900154581e-02,
			-1.8662168940531118e-02,
			-1.4193048970612182e-02,
			-2.9949266075571710e-03,
			5.9029683387124953e-03,
			4.5197236235567867e-03,
			-7.1079148261703534e-03,
			-2.0084767678293092e-02,
			-2.3311188040322776e-02,
			-1.2784038623879721e-02,
			4.0762178712041601e-03,
			1.3346915816899603e-02,
			5.7359043739684543e-03,
			-1.4720837908786619e-02,
			-3.2099574332974203e-02,
			-3.0404413640455791e-02,
			-7.3824560015768315e-03,
			2.0903522723558492e-02,
			3.0096061155356627e-02,
			6.5259347250955285e-03,
			-3.8462292200619481e-02,
			-7.0869487224785352e-02,
			-5.4107874682352952e-02,
			2.5259979404526650e-02,
			1.4370865641013861e-01,
			2.4982563870147181e-01,
			2.9230819959096299e-01,
			2.4982563870147181e-01,
			1.4370865641013864e-01,
			2.5259979404526654e-02,
			-5.4107874682352966e-02,
			-7.0869487224785366e-02,
			-3.8462292200619495e-02,
			6.5259347250955302e-03,
			3.0096061155356641e-02,
			2.0903522723558506e-02,
			-7.3824560015768349e-03,
			-3.0404413640455815e-02,
			-3.2099574332974223e-02,
			-1.4720837908786630e-02,
			5.7359043739684604e-03,
			1.3346915816899613e-02,
			4.0762178712041627e-03,
			-1.2784038623879739e-02,
			-2.3311188040322804e-02,
			-2.0084767678293116e-02,
			-7.1079148261703612e-03,
			4.5197236235567911e-03,
			5.9029683387125048e-03,
			-2.9949266075571736e-03,
			-1.4193048970612207e-02,
			-1.8662168940531153e-02,
			-1.3462418900154604e-02,
			-3.4963797956000320e-03,
			3.0131140370235911e-03,
			1.2562792472859642e-03,
			-6.6666698386317743e-03,
			-1.3958829431456649e-02,
			-1.4856515017832875e-02,
			-9.0969663617697927e-03,
			-1.7050246429269492e-03,
			1.3784923032710370e-03,
			-1.9327687604891093e-03,
			-8.4992305065876780e-03,
			-1.2821283663388595e-02,
			-1.1571060989487670e-02,
			-6.0820299780298256e-03,
			-9.6506787169073935e-04,
			-2.1710181588843587e-04,
			-4.0841129832286877e-03,
			-9.1197841612625508e-03,
			-1.1177665546498967e-02,
			-8.7602540790057779e-03,
			-4.0358532878403556e-03,
			-8.6795329695463187e-04,
			-1.6236386602042424e-03,
			-5.3843686320970089e-03,
			-8.8937043531173883e-03,
			-9.3078652451389042e-03,
			-6.4379538633729406e-03,
			-2.7279163951726333e-03,
			-1.1326443571281050e-03,
			-2.7259882160986914e-03,
			-5.9658402480323187e-03,
			-8.0957173947761238e-03,
			-7.4249335517158083e-03,
			-4.6090756549750297e-03,
			-1.9729728155626998e-03,
			-1.5446848893690497e-03,
			-3.4555395583318661e-03,
			-5.9605784961465555e-03,
			-6.9564131921420139e-03,
			-5.6846723133800337e-03,
			-3.2475373165740378e-03,
			-1.6026343679009538e-03,
			-1.9423711063670500e-03,
			-3.7942060764075232e-03,
			-5.5118721440431751e-03,
			-5.6701595913976532e-03,
			-4.1868456476722923e-03,
			-2.2943598211665065e-03,
			-1.4639880273141920e-03,
			-2.2154696854772668e-03,
			-3.7708238360917696e-03,
			-4.7685469089617273e-03,
			-4.3915096269727888e-03,
			-2.9780040916341185e-03,
			-1.6661388536951005e-03,
			-1.4270997345429397e-03,
			-2.3045215990983915e-03,
			-3.4512139742406017e-03,
			-3.8728518839419141e-03,
			-3.2307108495224631e-03,
			-2.0587294816956044e-03,
			-1.2683702309322122e-03,
			-1.3932186866449782e-03,
			-2.1964877583498486e-03,
			-2.9241282941009409e-03,
			-2.9478325266950032e-03,
			-2.2527488512072988e-03,
			-1.3950482601184288e-03,
			-1.0096108503799466e-03,



			};
		for(j=0;j<3;j++)
			{

			datamid=0.0;
			now_fir=i_fir_list;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->data[j]*Fir[i];
				now_fir=now_fir->last;
				}

			i_fir_list->band_pass_data[j]=datamid;
			}
			if(x_y_z==0)
			{
				i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]),0.5);
			}
			else
			{
				i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]+i_fir_list->band_pass_data[2]*i_fir_list->band_pass_data[2]),0.5);
			}


		for(j=0;j<3;j++)
			{
			datamid=0.0;
			now_fir=i_fir_list;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->dataV[j]*Fir[i];
				now_fir=now_fir->last;
				}
			i_fir_list->band_pass_dataV[j]=datamid;
			}
			if(x_y_z==0)
			{
				i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
			}
			else
			{
				i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]+i_fir_list->band_pass_dataV[2]*i_fir_list->band_pass_dataV[2]),0.5);
			}
		for(j=0;j<3;j++)
			{
			datamid=0.0;
			now_fir=i_fir_list;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->dataD[j]*Fir[i];
				now_fir=now_fir->last;
				}
			i_fir_list->band_pass_dataD[j]=datamid;
			}
			if(x_y_z==0)
			{
				i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
			}
			else
			{
				i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]+i_fir_list->band_pass_dataD[2]*i_fir_list->band_pass_dataD[2]),0.5);
			}













		return 1;
		}
	else if(i_fir_list->sample_rata==100&&band_pass_flag==1)
				{

				firLength=301;
				double Fir[301]={-1.3934901977829615e-03,
					-1.8159417519245753e-03,
					-2.1047061992379365e-03,
					-2.1499567281675455e-03,
					-1.9319560065597574e-03,
					-1.5336077824486048e-03,
					-1.1131764610959451e-03,
					-8.4586773282764453e-04,
					-8.5571492559512663e-04,
					-1.1641429939370940e-03,
					-1.6763388826177095e-03,
					-2.2127045829863049e-03,
					-2.5752520825855834e-03,
					-2.6245209995463341e-03,
					-2.3372518475216625e-03,
					-1.8211766253946077e-03,
					-1.2790312324263129e-03,
					-9.3350462293830287e-04,
					-9.4077162689895221e-04,
					-1.3260577655623985e-03,
					-1.9675936202030414e-03,
					-2.6375233932370771e-03,
					-3.0863445849885914e-03,
					-3.1397319857095246e-03,
					-2.7703067122125825e-03,
					-2.1150445844176149e-03,
					-1.4290329171544275e-03,
					-9.9084931593346887e-04,
					-9.9450274977262157e-04,
					-1.4697037836401406e-03,
					-2.2629691037629874e-03,
					-3.0896434805398041e-03,
					-3.6395636772003424e-03,
					-3.6973125284921167e-03,
					-3.2306007769072587e-03,
					-2.4107945111442089e-03,
					-1.5546360967761310e-03,
					-1.0065972753527060e-03,
					-1.0053738031440373e-03,
					-1.5860839569270741e-03,
					-2.5579388666770995e-03,
					-3.5692958764463449e-03,
					-4.2383209384534298e-03,
					-4.3009144849360951e-03,
					-3.7187912246025431e-03,
					-2.7038140209237104e-03,
					-1.6456047543273620e-03,
					-9.6672554881740698e-04,
					-9.5902862506833195e-04,
					-1.6643298430027724e-03,
					-2.8478287426786748e-03,
					-4.0784458396371038e-03,
					-4.8890672246237271e-03,
					-4.9573843372280107e-03,
					-4.2375689803696064e-03,
					-2.9893918921230977e-03,
					-1.6892661355065719e-03,
					-8.5315338472186943e-04,
					-8.3687322528905046e-04,
					-1.6908134983387932e-03,
					-3.1279156197627396e-03,
					-4.6219899287065240e-03,
					-5.6032676672302818e-03,
					-5.6788440317752488e-03,
					-4.7930527289633748e-03,
					-3.2628185712932083e-03,
					-1.6691643874906282e-03,
					-6.4136490201577951e-04,
					-6.1355241309235965e-04,
					-1.6475301337705620e-03,
					-3.3935290783997270e-03,
					-5.2097909555231794e-03,
					-6.4008237800856037e-03,
					-6.4863194218901269e-03,
					-5.3972072803381739e-03,
					-3.5194883154958849e-03,
					-1.5625414496258179e-03,
					-2.9599484306628491e-04,
					-2.5223929370514470e-04,
					-1.5090285192966766e-03,
					-3.6401534025372944e-03,
					-5.8603941401391838e-03,
					-7.3164248762943827e-03,
					-7.4165259229421188e-03,
					-6.0723665880914419e-03,
					-3.7550004343177984e-03,
					-1.3353600892311249e-03,
					2.3788693116028032e-04,
					3.0473249946160190e-04,
					-1.2362210827844447e-03,
					-3.8635274170506517e-03,
					-6.6084146410208293e-03,
					-8.4123588516069620e-03,
					-8.5356836076430822e-03,
					-6.8604886253879381e-03,
					-3.9652570935789742e-03,
					-9.3168387924516256e-04,
					1.0534705820681239e-03,
					1.1561602642038765e-03,
					-7.6279308836732713e-04,
					-4.0597396392069423e-03,
					-7.5208401297042239e-03,
					-9.8072001726968727e-03,
					-9.9708294562862142e-03,
					-7.8443429100596568e-03,
					-4.1465552109397862e-03,
					-2.4844224798785294e-04,
					2.3271192130121512e-03,
					2.4913851040193188e-03,
					3.8417223566559994e-05,
					-4.2253163338121661e-03,
					-8.7382536865734783e-03,
					-1.1749625514224836e-02,
					-1.1991733098263043e-02,
					-9.2038390171244738e-03,
					-4.2956701090024274e-03,
					9.3449579474537436e-04,
					4.4450971219227456e-03,
					4.7325123287797061e-03,
					1.4542781444556027e-03,
					-4.3573002295476306e-03,
					-1.0601141815511635e-02,
					-1.4850187602870650e-02,
					-1.5274622891964655e-02,
					-1.1402122422123587e-02,
					-4.4099287906940446e-03,
					3.1992627279992338e-03,
					8.4610861449535505e-03,
					9.0647035001510286e-03,
					4.3128967563563032e-03,
					-4.4533178832161045e-03,
					-1.4174787943096560e-02,
					-2.1085357894361143e-02,
					-2.2096384652325083e-02,
					-1.6069207429197555e-02,
					-4.4872709594348387e-03,
					8.7849658638558172e-03,
					1.8665591162767350e-02,
					2.0618219193568481e-02,
					1.2446574643172092e-02,
					-4.5116339631119861e-03,
					-2.5272940970094884e-02,
					-4.2331277335992394e-02,
					-4.7764061273754821e-02,
					-3.5721208137345535e-02,
					-4.5262962159261927e-03,
					4.2308025951629580e-02,
					9.6544322689801162e-02,
					1.4711299332650787e-01,
					1.8293486636295642e-01,
					1.9587085363289147e-01,
					1.8293486636295639e-01,
					1.4711299332650785e-01,
					9.6544322689801135e-02,
					4.2308025951629566e-02,
					-4.5262962159261918e-03,
					-3.5721208137345535e-02,
					-4.7764061273754814e-02,
					-4.2331277335992387e-02,
					-2.5272940970094880e-02,
					-4.5116339631119853e-03,
					1.2446574643172089e-02,
					2.0618219193568474e-02,
					1.8665591162767347e-02,
					8.7849658638558138e-03,
					-4.4872709594348361e-03,
					-1.6069207429197544e-02,
					-2.2096384652325073e-02,
					-2.1085357894361126e-02,
					-1.4174787943096552e-02,
					-4.4533178832161010e-03,
					4.3128967563563006e-03,
					9.0647035001510234e-03,
					8.4610861449535436e-03,
					3.1992627279992312e-03,
					-4.4099287906940411e-03,
					-1.1402122422123580e-02,
					-1.5274622891964643e-02,
					-1.4850187602870640e-02,
					-1.0601141815511625e-02,
					-4.3573002295476280e-03,
					1.4542781444556018e-03,
					4.7325123287797017e-03,
					4.4450971219227413e-03,
					9.3449579474537349e-04,
					-4.2956701090024231e-03,
					-9.2038390171244669e-03,
					-1.1991733098263025e-02,
					-1.1749625514224822e-02,
					-8.7382536865734661e-03,
					-4.2253163338121600e-03,
					3.8417223566559994e-05,
					2.4913851040193153e-03,
					2.3271192130121469e-03,
					-2.4844224798785381e-04,
					-4.1465552109397810e-03,
					-7.8443429100596446e-03,
					-9.9708294562862020e-03,
					-9.8072001726968588e-03,
					-7.5208401297042135e-03,
					-4.0597396392069380e-03,
					-7.6279308836732583e-04,
					1.1561602642038756e-03,
					1.0534705820681221e-03,
					-9.3168387924516213e-04,
					-3.9652570935789682e-03,
					-6.8604886253879251e-03,
					-8.5356836076430683e-03,
					-8.4123588516069481e-03,
					-6.6084146410208154e-03,
					-3.8635274170506460e-03,
					-1.2362210827844425e-03,
					3.0473249946160017e-04,
					2.3788693116027988e-04,
					-1.3353600892311228e-03,
					-3.7550004343177915e-03,
					-6.0723665880914298e-03,
					-7.4165259229421032e-03,
					-7.3164248762943671e-03,
					-5.8603941401391716e-03,
					-3.6401534025372871e-03,
					-1.5090285192966731e-03,
					-2.5223929370514383e-04,
					-2.9599484306628491e-04,
					-1.5625414496258144e-03,
					-3.5194883154958771e-03,
					-5.3972072803381609e-03,
					-6.4863194218901122e-03,
					-6.4008237800855889e-03,
					-5.2097909555231664e-03,
					-3.3935290783997183e-03,
					-1.6475301337705575e-03,
					-6.1355241309235748e-04,
					-6.4136490201577821e-04,
					-1.6691643874906245e-03,
					-3.2628185712932005e-03,
					-4.7930527289633627e-03,
					-5.6788440317752332e-03,
					-5.6032676672302679e-03,
					-4.6219899287065127e-03,
					-3.1279156197627305e-03,
					-1.6908134983387882e-03,
					-8.3687322528904872e-04,
					-8.5315338472186726e-04,
					-1.6892661355065672e-03,
					-2.9893918921230908e-03,
					-4.2375689803695943e-03,
					-4.9573843372279977e-03,
					-4.8890672246237124e-03,
					-4.0784458396370933e-03,
					-2.8478287426786674e-03,
					-1.6643298430027674e-03,
					-9.5902862506832913e-04,
					-9.6672554881740416e-04,
					-1.6456047543273575e-03,
					-2.7038140209237008e-03,
					-3.7187912246025327e-03,
					-4.3009144849360829e-03,
					-4.2383209384534160e-03,
					-3.5692958764463336e-03,
					-2.5579388666770917e-03,
					-1.5860839569270702e-03,
					-1.0053738031440341e-03,
					-1.0065972753527028e-03,
					-1.5546360967761263e-03,
					-2.4107945111442020e-03,
					-3.2306007769072496e-03,
					-3.6973125284921046e-03,
					-3.6395636772003298e-03,
					-3.0896434805397937e-03,
					-2.2629691037629792e-03,
					-1.4697037836401362e-03,
					-9.9450274977261875e-04,
					-9.9084931593346518e-04,
					-1.4290329171544223e-03,
					-2.1150445844176089e-03,
					-2.7703067122125742e-03,
					-3.1397319857095142e-03,
					-3.0863445849885810e-03,
					-2.6375233932370672e-03,
					-1.9675936202030344e-03,
					-1.3260577655623941e-03,
					-9.4077162689894884e-04,
					-9.3350462293829940e-04,
					-1.2790312324263090e-03,
					-1.8211766253946012e-03,
					-2.3372518475216551e-03,
					-2.6245209995463237e-03,
					-2.5752520825855730e-03,
					-2.2127045829862962e-03,
					-1.6763388826177036e-03,
					-1.1641429939370888e-03,
					-8.5571492559512359e-04,
					-8.4586773282764138e-04,
					-1.1131764610959410e-03,
					-1.5336077824486000e-03,
					-1.9319560065597509e-03,
					-2.1499567281675781e-03,
					-2.1047061992379612e-03,
					-1.8159417519245733e-03,
					-1.3934901977829676e-03,



					};
				for(j=0;j<3;j++)
					{

					datamid=0.0;
					now_fir=i_fir_list;
					for(i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->data[j]*Fir[i];
						now_fir=now_fir->last;
						}

					i_fir_list->band_pass_data[j]=datamid;
					}
					if(x_y_z==0)
					{
						i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]),0.5);
					}
					else
					{
						i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]+i_fir_list->band_pass_data[2]*i_fir_list->band_pass_data[2]),0.5);
					}


				for(j=0;j<3;j++)
					{
					datamid=0.0;
					now_fir=i_fir_list;
					for(i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataV[j]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataV[j]=datamid;
					}
					if(x_y_z==0)
					{
						i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
					}
					else
					{
						i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]+i_fir_list->band_pass_dataV[2]*i_fir_list->band_pass_dataV[2]),0.5);
					}
				for(j=0;j<3;j++)
					{
					datamid=0.0;
					now_fir=i_fir_list;
					for(i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataD[j]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataD[j]=datamid;
					}
					if(x_y_z==0)
					{
						i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
					}
					else
					{
						i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]+i_fir_list->band_pass_dataD[2]*i_fir_list->band_pass_dataD[2]),0.5);
					}













				return 1;
		}
	else if(i_fir_list->sample_rata==200&&band_pass_flag==0)
		{
		firLength=301;

		double Fir[301]={-1.5738968347689628e-04,
			-1.7735491639294824e-04,
			-2.1736124094126334e-04,
			-2.7483905489700012e-04,
			-3.4266813193163193e-04,
			-4.1030106015100642e-04,
			-4.6590026089908369e-04,
			-4.9908565647348161e-04,
			-5.0368485858866155e-04,
			-4.7980096272096865e-04,
			-4.3459912811287315e-04,
			-3.8145932023061683e-04,
			-3.3750551620498548e-04,
			-3.1992389949451273e-04,
			-3.4182841427864982e-04,
			-4.0862956128619334e-04,
			-5.1584657092479044e-04,
			-6.4905509995696496e-04,
			-7.8621869932361810e-04,
			-9.0210075583715586e-04,
			-9.7391805542624665e-04,
			-9.8700968544837217e-04,
			-9.3916478239759282e-04,
			-8.4243680789333406e-04,
			-7.2175694572392348e-04,
			-6.1035700575723644e-04,
			-5.4277523357811595e-04,
			-5.4686940852928067e-04,
			-6.3663386121590247e-04,
			-8.0759555645765300e-04,
			-1.0361182005924534e-03,
			-1.2831404037890676e-03,
			-1.5018735401092786e-03,
			-1.6480075080620943e-03,
			-1.6902522160705587e-03,
			-1.6187724217614032e-03,
			-1.4493561975616916e-03,
			-1.2219729859712122e-03,
			-9.9357826868147307e-04,
			-8.2635727901226479e-04,
			-7.7376662014393995e-04,
			-8.6744203333462462e-04,
			-1.1080893063261379e-03,
			-1.4627990304460733e-03,
			-1.8699254737555102e-03,
			-2.2510004567963386e-03,
			-2.5274762640143944e-03,
			-2.6387982693635644e-03,
			-2.5577291433000224e-03,
			-2.2991713422791313e-03,
			-1.9199554375127431e-03,
			-1.5089616520395268e-03,
			-1.1691295962667500e-03,
			-9.9489997697284663e-04,
			-1.0499463509793807e-03,
			-1.3503416137936456e-03,
			-1.8574229089935940e-03,
			-2.4826907958067261e-03,
			-3.1044754803961948e-03,
			-3.5933784465069858e-03,
			-3.8412720032523487e-03,
			-3.7874595744862814e-03,
			-3.4358093523187173e-03,
			-2.8583194491591827e-03,
			-2.1833724736893233e-03,
			-1.5703255973366405e-03,
			-1.1753198885291142e-03,
			-1.1155270970319925e-03,
			-1.4398884580665875e-03,
			-2.1134488140001156e-03,
			-3.0197519628140561e-03,
			-3.9819340454248483e-03,
			-4.7989298359828224e-03,
			-5.2895315090100694e-03,
			-5.3347847421739408e-03,
			-4.9089772067057768e-03,
			-4.0914494807903403e-03,
			-3.0553263232042977e-03,
			-2.0342643861179957e-03,
			-1.2733736807093051e-03,
			-9.7444743993873348e-04,
			-1.2475579059199422e-03,
			-2.0803813561700931e-03,
			-3.3333020239832397e-03,
			-4.7630034661209093e-03,
			-6.0709747972200970e-03,
			-6.9675036714509026e-03,
			-7.2376487999995407e-03,
			-6.7944115044867989e-03,
			-5.7063144258142880e-03,
			-4.1915922126739454e-03,
			-2.5782559165073099e-03,
			-1.2369414329412996e-03,
			-5.0000439657026010e-04,
			-5.8423897384719532e-04,
			-1.5348385257546453e-03,
			-3.2045099423030948e-03,
			-5.2745989273480509e-03,
			-7.3160653117819293e-03,
			-8.8790713655859960e-03,
			-9.5928420397288355e-03,
			-9.2540312860429144e-03,
			-7.8830675166212654e-03,
			-5.7338544840285889e-03,
			-3.2517317719462481e-03,
			-9.8584385474959567e-04,
			5.2737308823975636e-04,
			8.8539160937573045e-04,
			-8.1278022656460546e-05,
			-2.2555652814956074e-03,
			-5.2408116952406677e-03,
			-8.4306412604161132e-03,
			-1.1130333116173553e-02,
			-1.2706151017152620e-02,
			-1.2731360484584070e-02,
			-1.1096337143008480e-02,
			-8.0559256539294525e-03,
			-4.1992280006084327e-03,
			-3.4304817834827792e-04,
			2.6329471431176831e-03,
			3.9772854451277720e-03,
			3.2439302636812226e-03,
			4.1585700052789186e-04,
			-4.0560792879092526e-03,
			-9.3139281317865166e-03,
			-1.4247613714347402e-02,
			-1.7717974336771903e-02,
			-1.8805230945223246e-02,
			-1.7031601742540699e-02,
			-1.2508339273051561e-02,
			-5.9695509104043653e-03,
			1.3240748146035209e-03,
			7.8028250387371500e-03,
			1.1892350786033203e-02,
			1.2350080720461974e-02,
			8.5682310423650879e-03,
			7.7979549076405419e-04,
			-9.8815104670206631e-03,
			-2.1491211233783846e-02,
			-3.1606466363625955e-02,
			-3.7661758554831441e-02,
			-3.7422874756706775e-02,
			-2.9419394015175061e-02,
			-1.3275490993334308e-02,
			1.0126511572124210e-02,
			3.8687978116648487e-02,
			6.9343825778920370e-02,
			9.8485912360757433e-02,
			1.2249350941875659e-01,
			1.3828375204993210e-01,
			1.4378957268385817e-01,
			1.3828375204993198e-01,
			1.2249350941875640e-01,
			9.8485912360757155e-02,
			6.9343825778920107e-02,
			3.8687978116648321e-02,
			1.0126511572124158e-02,
			-1.3275490993334225e-02,
			-2.9419394015174839e-02,
			-3.7422874756706463e-02,
			-3.7661758554831101e-02,
			-3.1606466363625629e-02,
			-2.1491211233783607e-02,
			-9.8815104670205468e-03,
			7.7979549076404465e-04,
			8.5682310423649734e-03,
			1.2350080720461792e-02,
			1.1892350786033016e-02,
			7.8028250387370190e-03,
			1.3240748146034983e-03,
			-5.9695509104042534e-03,
			-1.2508339273051316e-02,
			-1.7031601742540346e-02,
			-1.8805230945222844e-02,
			-1.7717974336771518e-02,
			-1.4247613714347076e-02,
			-9.3139281317862910e-03,
			-4.0560792879091503e-03,
			4.1585700052788145e-04,
			3.2439302636811385e-03,
			3.9772854451276627e-03,
			2.6329471431176059e-03,
			-3.4304817834826751e-04,
			-4.1992280006083061e-03,
			-8.0559256539291975e-03,
			-1.1096337143008119e-02,
			-1.2731360484583639e-02,
			-1.2706151017152188e-02,
			-1.1130333116173159e-02,
			-8.4306412604158061e-03,
			-5.2408116952404717e-03,
			-2.2555652814955185e-03,
			-8.1278022656457077e-05,
			8.8539160937569489e-04,
			5.2737308823973467e-04,
			-9.8584385474955491e-04,
			-3.2517317719461085e-03,
			-5.7338544840283339e-03,
			-7.8830675166209115e-03,
			-9.2540312860424894e-03,
			-9.5928420397283845e-03,
			-8.8790713655855676e-03,
			-7.3160653117815720e-03,
			-5.2745989273477829e-03,
			-3.2045099423029331e-03,
			-1.5348385257545655e-03,
			-5.8423897384716496e-04,
			-5.0000439657023278e-04,
			-1.2369414329412311e-03,
			-2.5782559165071638e-03,
			-4.1915922126737068e-03,
			-5.7063144258139575e-03,
			-6.7944115044863947e-03,
			-7.2376487999991001e-03,
			-6.9675036714504724e-03,
			-6.0709747972197223e-03,
			-4.7630034661206057e-03,
			-3.3333020239830237e-03,
			-2.0803813561699586e-03,
			-1.2475579059198585e-03,
			-9.7444743993866712e-04,
			-1.2733736807092175e-03,
			-2.0342643861178543e-03,
			-3.0553263232040791e-03,
			-4.0914494807900480e-03,
			-4.9089772067054177e-03,
			-5.3347847421735478e-03,
			-5.2895315090096687e-03,
			-4.7989298359824538e-03,
			-3.9819340454245395e-03,
			-3.0197519628138176e-03,
			-2.1134488139999473e-03,
			-1.4398884580664711e-03,
			-1.1155270970319006e-03,
			-1.1753198885290160e-03,
			-1.5703255973365086e-03,
			-2.1833724736891359e-03,
			-2.8583194491589325e-03,
			-3.4358093523184151e-03,
			-3.7874595744859440e-03,
			-3.8412720032520008e-03,
			-3.5933784465066554e-03,
			-3.1044754803959073e-03,
			-2.4826907958064920e-03,
			-1.8574229089934173e-03,
			-1.3503416137935148e-03,
			-1.0499463509792775e-03,
			-9.9489997697274797e-04,
			-1.1691295962666325e-03,
			-1.5089616520393724e-03,
			-1.9199554375125441e-03,
			-2.2991713422788910e-03,
			-2.5577291432997522e-03,
			-2.6387982693632807e-03,
			-2.5274762640141194e-03,
			-2.2510004567960896e-03,
			-1.8699254737553005e-03,
			-1.4627990304459074e-03,
			-1.1080893063260097e-03,
			-8.6744203333452400e-04,
			-7.7376662014384866e-04,
			-8.2635727901216656e-04,
			-9.9357826868135316e-04,
			-1.2219729859710637e-03,
			-1.4493561975615118e-03,
			-1.6187724217612007e-03,
			-1.6902522160703449e-03,
			-1.6480075080618820e-03,
			-1.5018735401090826e-03,
			-1.2831404037888989e-03,
			-1.0361182005923146e-03,
			-8.0759555645754327e-04,
			-6.3663386121581508e-04,
			-5.4686940852920413e-04,
			-5.4277523357803897e-04,
			-6.1035700575714949e-04,
			-7.2175694572381886e-04,
			-8.4243680789320959e-04,
			-9.3916478239745296e-04,
			-9.8700968544822277e-04,
			-9.7391805542609714e-04,
			-9.0210075583701556e-04,
			-7.8621869932349417e-04,
			-6.4905509995686088e-04,
			-5.1584657092470653e-04,
			-4.0862956128612563e-04,
			-3.4182841427859273e-04,
			-3.1992389949445831e-04,
			-3.3750551620492721e-04,
			-3.8145932023054988e-04,
			-4.3459912811279558e-04,
			-4.7980096272088148e-04,
			-5.0368485858856907e-04,
			-4.9908565647338837e-04,
			-4.6590026089899489e-04,
			-4.1030106015092717e-04,
			-3.4266813193156422e-04,
			-2.7483905489694477e-04,
			-2.1736124094121881e-04,
			-1.7735491639291114e-04,
			-1.5738968347686275e-04,


			};
		for(j=0;j<3;j++)
			{

			datamid=0.0;
			now_fir=i_fir_list;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->data[j]*Fir[i];
				now_fir=now_fir->last;
				}

			i_fir_list->band_pass_data[j]=datamid;
			}
			if(x_y_z==0)
			{
				i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]),0.5);
			}
			else
			{
				i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]+i_fir_list->band_pass_data[2]*i_fir_list->band_pass_data[2]),0.5);
			}


		for(j=0;j<3;j++)
			{
			datamid=0.0;
			now_fir=i_fir_list;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->dataV[j]*Fir[i];
				now_fir=now_fir->last;
				}
			i_fir_list->band_pass_dataV[j]=datamid;
			}
			if(x_y_z==0)
			{
				i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
			}
			else
			{
				i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]+i_fir_list->band_pass_dataV[2]*i_fir_list->band_pass_dataV[2]),0.5);
			}
		for(j=0;j<3;j++)
			{
			datamid=0.0;
			now_fir=i_fir_list;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->dataD[j]*Fir[i];
				now_fir=now_fir->last;
				}
			i_fir_list->band_pass_dataD[j]=datamid;
			}
			if(x_y_z==0)
			{
				i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
			}
			else
			{
				i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]+i_fir_list->band_pass_dataD[2]*i_fir_list->band_pass_dataD[2]),0.5);
			}


















		return 1;
		}
	else if(i_fir_list->sample_rata==200&&band_pass_flag==1)
		{
		firLength=541;

		double Fir[541]={-9.2099036038378532e-04,
			-7.8804826816350514e-04,
			-6.6560344061362866e-04,
			-5.6687547227462695e-04,
			-5.0305195443362731e-04,
			-4.8212458142003447e-04,
			-5.0801522925230963e-04,
			-5.8008622249482611e-04,
			-6.9309294300030314e-04,
			-8.3759419607064940e-04,
			-1.0007904473973064e-03,
			-1.1677166438897948e-03,
			-1.3226792145237351e-03,
			-1.4507998700714149e-03,
			-1.5395149164156340e-03,
			-1.5798796606311268e-03,
			-1.5675433814101799e-03,
			-1.5032900196379525e-03,
			-1.3930805785312536e-03,
			-1.2475813887482972e-03,
			-1.0812132551662164e-03,
			-9.1080504603679199e-04,
			-7.5397661608138985e-04,
			-6.2740578524895022e-04,
			-5.4514918710074384e-04,
			-5.1718531515799690e-04,
			-5.4832980445290475e-04,
			-6.3763933271860978e-04,
			-7.7837451944441324e-04,
			-9.5853814908441635e-04,
			-1.1619481531160475e-03,
			-1.3697506595220668e-03,
			-1.5622325114940184e-03,
			-1.7207597251464868e-03,
			-1.8296519661545247e-03,
			-1.8778052751213447e-03,
			-1.8598961554604190e-03,
			-1.7770380880220437e-03,
			-1.6368131495740684e-03,
			-1.4526618487227868e-03,
			-1.2426777301980229e-03,
			-1.0279134888687795e-03,
			-8.3035621871027751e-04,
			-6.7076573516148576e-04,
			-5.6658772472861297e-04,
			-5.3015062268610609e-04,
			-5.6733143777716296e-04,
			-6.7683314040934404e-04,
			-8.5015853938458274e-04,
			-1.0722982056842946e-03,
			-1.3230794514709333e-03,
			-1.5790565837738907e-03,
			-1.8157663436507616e-03,
			-2.0101324311648091e-03,
			-2.1427836247891099e-03,
			-2.2000535925879644e-03,
			-2.1754571889266504e-03,
			-2.0704856679088202e-03,
			-1.8946275302998378e-03,
			-1.6645966177239893e-03,
			-1.4028273596775336e-03,
			-1.1353710613629898e-03,
			-8.8938935754289306e-04,
			-6.9048502597345474e-04,
			-5.6013150133180209e-04,
			-5.1345808254886992e-04,
			-5.5761788704660181e-04,
			-6.9091251719947467e-04,
			-9.0277595818363658e-04,
			-1.1746371336738743e-03,
			-1.4815938115070816e-03,
			-1.7947487057919354e-03,
			-2.0839898846883352e-03,
			-2.3209490512706072e-03,
			-2.4818481466164577e-03,
			-2.5499498422015465e-03,
			-2.5173609120326093e-03,
			-2.3859964670479806e-03,
			-2.1675922672027342e-03,
			-1.8827443572853935e-03,
			-1.5590512379570593e-03,
			-1.2285242513423947e-03,
			-9.2450775236682355e-04,
			-6.7840413588373869e-04,
			-5.1652413990349946e-04,
			-4.5737696479821453e-04,
			-5.0967758766085958e-04,
			-6.7128325883947910e-04,
			-9.2918345122575824e-04,
			-1.2605657298138107e-03,
			-1.6348739179959412e-03,
			-2.0166749784740114e-03,
			-2.3690672229614647e-03,
			-2.6573034400949446e-03,
			-2.8522746288034552e-03,
			-2.9335066344339071e-03,
			-2.8913631482099544e-03,
			-2.7282208685875907e-03,
			-2.4584796038279720e-03,
			-2.1073826169179673e-03,
			-1.7087397545895546e-03,
			-1.3017563556190544e-03,
			-9.2726353456713112e-04,
			-6.2371066482157266e-04,
			-4.2331173523314162e-04,
			-3.4872998370800008e-04,
			-4.1063976990715308e-04,
			-6.0642476251474388e-04,
			-9.2016438994335105e-04,
			-1.3239361803047587e-03,
			-1.7803320420881636e-03,
			-2.2459644154696938e-03,
			-2.6756357782218845e-03,
			-3.0267727437604114e-03,
			-3.2636916931282249e-03,
			-3.3612706949638629e-03,
			-3.3076524683700241e-03,
			-3.1056912475649718e-03,
			-2.7729746824372565e-03,
			-2.3403892837598060e-03,
			-1.8493412139778430e-03,
			-1.3478794014496636e-03,
			-8.8608150223198922e-04,
			-5.1114349515264787e-04,
			-2.6265206842258714e-04,
			-1.6851079481957512e-04,
			-2.4193625100973236e-04,
			-4.7984317191924781e-04,
			-8.6280715728713074e-04,
			-1.3566415625985743e-03,
			-1.9154665600813400e-03,
			-2.4859984617802782e-03,
			-3.0126612251738065e-03,
			-3.4430325498542480e-03,
			-3.7330937104403427e-03,
			-3.8517604832979464e-03,
			-3.7842324736531100e-03,
			-3.5338050023559580e-03,
			-3.1219319124799489e-03,
			-2.5864957712039751e-03,
			-1.9784179024470525e-03,
			-1.3569073131266510e-03,
			-7.8378825350351668e-04,
			-3.1744647022797834e-04,
			-6.9834312824419518e-06,
			1.1284000836526972e-04,
			2.5354317567758977e-05,
			-2.6597224788052265e-04,
			-7.3743067972836655e-04,
			-1.3469646033695993e-03,
			-2.0379172193921657e-03,
			-2.7443031575346403e-03,
			-3.3971190584163721e-03,
			-3.9310935787960494e-03,
			-4.2912209155740550e-03,
			-4.4384286657659696e-03,
			-4.3538016122489434e-03,
			-4.0409122987702514e-03,
			-3.5259856147050032e-03,
			-2.8558317578400881e-03,
			-2.0937002074628681e-03,
			-1.3134155200516908e-03,
			-5.9233317583970750e-04,
			-3.7822358250078755e-06,
			3.9027251319353107e-04,
			5.4562083721612718e-04,
			4.4059792201310989e-04,
			7.8766065900046770e-05,
			-5.1082710083981203e-04,
			-1.2758972595056852e-03,
			-2.1455177714411132e-03,
			-3.0366641508699954e-03,
			-3.8621118097987728e-03,
			-4.5389428080685424e-03,
			-4.9968394044701686e-03,
			-5.1853430528545691e-03,
			-5.0793389195515149e-03,
			-4.6821819764329082e-03,
			-4.0260977778495107e-03,
			-3.1697493995113059e-03,
			-2.1931374329631778e-03,
			-1.1902658708177875e-03,
			-2.6023694791261148e-04,
			5.0239086906258580e-04,
			1.0170537242174349e-03,
			1.2255086096815426e-03,
			1.0981873138275063e-03,
			6.3790127253392042e-04,
			-1.1953798113192900e-04,
			-1.1079276778061561e-03,
			-2.2363446488090528e-03,
			-3.3974065727959773e-03,
			-4.4773856919170718e-03,
			-5.3672354801872664e-03,
			-5.9734753110310982e-03,
			-6.2278624174949846e-03,
			-6.0948685932705384e-03,
			-5.5761654078248781e-03,
			-4.7115908003906980e-03,
			-3.5763979419758700e-03,
			-2.2749440304833169e-03,
			-9.3132842805940036e-04,
			3.2219796078291040e-04,
			1.3579883121752859e-03,
			2.0657109495232774e-03,
			2.3637734346849855e-03,
			2.2083038115951678e-03,
			1.5987342434481875e-03,
			5.7933196288304162e-04,
			-7.6360523631937476e-04,
			-2.3087604573219398e-03,
			-3.9104757284739783e-03,
			-5.4121833258849901e-03,
			-6.6613801997739783e-03,
			-7.5247452268142716e-03,
			-7.9019373222448622e-03,
			-7.7366891333259091e-03,
			-7.0240232005336425e-03,
			-5.8127492393513962e-03,
			-4.2028248373273342e-03,
			-2.3376400760274124e-03,
			-3.9177573876898449e-04,
			1.4447611912945188e-03,
			2.9844462893490794e-03,
			4.0606549183290512e-03,
			4.5448405291744071e-03,
			4.3607762636084981e-03,
			3.4943738979672815e-03,
			1.9979539455294236e-03,
			-1.1679981628951848e-05,
			-2.3614511802506899e-03,
			-4.8360047833993728e-03,
			-7.1964238219141821e-03,
			-9.2021151553450583e-03,
			-1.0633951165805386e-02,
			-1.1316552798255641e-02,
			-1.1137586000254470e-02,
			-1.0062124842053854e-02,
			-8.1405010867291669e-03,
			-5.5085851061377634e-03,
			-2.3800849646007840e-03,
			9.6884449252551230e-04,
			4.2216836898676243e-03,
			7.0486768194433849e-03,
			9.1368371170709086e-03,
			1.0220305897430315e-02,
			1.0108397670110335e-02,
			8.7087474354680741e-03,
			6.0432886744458819e-03,
			2.2553117568610858e-03,
			-2.3934561482566973e-03,
			-7.5360015862024794e-03,
			-1.2722801055507309e-02,
			-1.7452784005121087e-02,
			-2.1210303569516521e-02,
			-2.3505355684549270e-02,
			-2.3913919959109343e-02,
			-2.2115177846259819e-02,
			-1.7922511198655740e-02,
			-1.1305590976966528e-02,
			-2.4015034641907277e-03,
			8.4863183807199517e-03,
			2.0901652188791666e-02,
			3.4260844192471288e-02,
			4.7888335453839595e-02,
			6.1059894106108653e-02,
			7.3050446110118419e-02,
			8.3182990982319571e-02,
			9.0874957753215704e-02,
			9.5678513253330877e-02,
			9.7311769218428879e-02,
			9.5678513253330918e-02,
			9.0874957753215677e-02,
			8.3182990982319585e-02,
			7.3050446110118419e-02,
			6.1059894106108667e-02,
			4.7888335453839609e-02,
			3.4260844192471288e-02,
			2.0901652188791666e-02,
			8.4863183807199569e-03,
			-2.4015034641907285e-03,
			-1.1305590976966534e-02,
			-1.7922511198655757e-02,
			-2.2115177846259833e-02,
			-2.3913919959109346e-02,
			-2.3505355684549270e-02,
			-2.1210303569516531e-02,
			-1.7452784005121090e-02,
			-1.2722801055507311e-02,
			-7.5360015862024829e-03,
			-2.3934561482566981e-03,
			2.2553117568610867e-03,
			6.0432886744458819e-03,
			8.7087474354680741e-03,
			1.0108397670110337e-02,
			1.0220305897430322e-02,
			9.1368371170709086e-03,
			7.0486768194433849e-03,
			4.2216836898676261e-03,
			9.6884449252551273e-04,
			-2.3800849646007844e-03,
			-5.5085851061377642e-03,
			-8.1405010867291686e-03,
			-1.0062124842053856e-02,
			-1.1137586000254470e-02,
			-1.1316552798255644e-02,
			-1.0633951165805386e-02,
			-9.2021151553450635e-03,
			-7.1964238219141838e-03,
			-4.8360047833993763e-03,
			-2.3614511802506908e-03,
			-1.1679981628951848e-05,
			1.9979539455294258e-03,
			3.4943738979672854e-03,
			4.3607762636085007e-03,
			4.5448405291744088e-03,
			4.0606549183290546e-03,
			2.9844462893490803e-03,
			1.4447611912945196e-03,
			-3.9177573876898449e-04,
			-2.3376400760274133e-03,
			-4.2028248373273359e-03,
			-5.8127492393514005e-03,
			-7.0240232005336460e-03,
			-7.7366891333259160e-03,
			-7.9019373222448709e-03,
			-7.5247452268142768e-03,
			-6.6613801997739835e-03,
			-5.4121833258849944e-03,
			-3.9104757284739800e-03,
			-2.3087604573219420e-03,
			-7.6360523631937541e-04,
			5.7933196288304206e-04,
			1.5987342434481888e-03,
			2.2083038115951695e-03,
			2.3637734346849881e-03,
			2.0657109495232787e-03,
			1.3579883121752868e-03,
			3.2219796078291127e-04,
			-9.3132842805940057e-04,
			-2.2749440304833191e-03,
			-3.5763979419758734e-03,
			-4.7115908003907024e-03,
			-5.5761654078248851e-03,
			-6.0948685932705410e-03,
			-6.2278624174949872e-03,
			-5.9734753110311043e-03,
			-5.3672354801872690e-03,
			-4.4773856919170770e-03,
			-3.3974065727959803e-03,
			-2.2363446488090563e-03,
			-1.1079276778061574e-03,
			-1.1953798113192943e-04,
			6.3790127253392085e-04,
			1.0981873138275076e-03,
			1.2255086096815435e-03,
			1.0170537242174358e-03,
			5.0239086906258667e-04,
			-2.6023694791261213e-04,
			-1.1902658708177892e-03,
			-2.1931374329631804e-03,
			-3.1697493995113107e-03,
			-4.0260977778495150e-03,
			-4.6821819764329151e-03,
			-5.0793389195515218e-03,
			-5.1853430528545760e-03,
			-4.9968394044701747e-03,
			-4.5389428080685442e-03,
			-3.8621118097987776e-03,
			-3.0366641508699980e-03,
			-2.1455177714411145e-03,
			-1.2758972595056867e-03,
			-5.1082710083981311e-04,
			7.8766065900046770e-05,
			4.4059792201311075e-04,
			5.4562083721612805e-04,
			3.9027251319353150e-04,
			-3.7822358250078755e-06,
			-5.9233317583970880e-04,
			-1.3134155200516921e-03,
			-2.0937002074628711e-03,
			-2.8558317578400915e-03,
			-3.5259856147050088e-03,
			-4.0409122987702592e-03,
			-4.3538016122489503e-03,
			-4.4384286657659757e-03,
			-4.2912209155740620e-03,
			-3.9310935787960546e-03,
			-3.3971190584163777e-03,
			-2.7443031575346438e-03,
			-2.0379172193921687e-03,
			-1.3469646033696017e-03,
			-7.3743067972836828e-04,
			-2.6597224788052351e-04,
			2.5354317567759410e-05,
			1.1284000836526972e-04,
			-6.9834312824415181e-06,
			-3.1744647022797877e-04,
			-7.8378825350351841e-04,
			-1.3569073131266529e-03,
			-1.9784179024470564e-03,
			-2.5864957712039799e-03,
			-3.1219319124799550e-03,
			-3.5338050023559641e-03,
			-3.7842324736531187e-03,
			-3.8517604832979556e-03,
			-3.7330937104403505e-03,
			-3.4430325498542550e-03,
			-3.0126612251738143e-03,
			-2.4859984617802843e-03,
			-1.9154665600813439e-03,
			-1.3566415625985765e-03,
			-8.6280715728713248e-04,
			-4.7984317191924932e-04,
			-2.4193625100973301e-04,
			-1.6851079481957555e-04,
			-2.6265206842258801e-04,
			-5.1114349515264874e-04,
			-8.8608150223199096e-04,
			-1.3478794014496660e-03,
			-1.8493412139778472e-03,
			-2.3403892837598117e-03,
			-2.7729746824372626e-03,
			-3.1056912475649788e-03,
			-3.3076524683700315e-03,
			-3.3612706949638690e-03,
			-3.2636916931282319e-03,
			-3.0267727437604183e-03,
			-2.6756357782218901e-03,
			-2.2459644154696990e-03,
			-1.7803320420881675e-03,
			-1.3239361803047617e-03,
			-9.2016438994335268e-04,
			-6.0642476251474497e-04,
			-4.1063976990715395e-04,
			-3.4872998370800073e-04,
			-4.2331173523314271e-04,
			-6.2371066482157418e-04,
			-9.2726353456713318e-04,
			-1.3017563556190573e-03,
			-1.7087397545895596e-03,
			-2.1073826169179721e-03,
			-2.4584796038279785e-03,
			-2.7282208685875963e-03,
			-2.8913631482099622e-03,
			-2.9335066344339149e-03,
			-2.8522746288034630e-03,
			-2.6573034400949511e-03,
			-2.3690672229614721e-03,
			-2.0166749784740171e-03,
			-1.6348739179959453e-03,
			-1.2605657298138137e-03,
			-9.2918345122576030e-04,
			-6.7128325883948105e-04,
			-5.0967758766086110e-04,
			-4.5737696479821561e-04,
			-5.1652413990350054e-04,
			-6.7840413588374053e-04,
			-9.2450775236682593e-04,
			-1.2285242513423978e-03,
			-1.5590512379570643e-03,
			-1.8827443572853996e-03,
			-2.1675922672027411e-03,
			-2.3859964670479871e-03,
			-2.5173609120326171e-03,
			-2.5499498422015530e-03,
			-2.4818481466164642e-03,
			-2.3209490512706150e-03,
			-2.0839898846883422e-03,
			-1.7947487057919410e-03,
			-1.4815938115070857e-03,
			-1.1746371336738774e-03,
			-9.0277595818363940e-04,
			-6.9091251719947640e-04,
			-5.5761788704660311e-04,
			-5.1345808254887144e-04,
			-5.6013150133180361e-04,
			-6.9048502597345647e-04,
			-8.8938935754289588e-04,
			-1.1353710613629931e-03,
			-1.4028273596775388e-03,
			-1.6645966177239954e-03,
			-1.8946275302998434e-03,
			-2.0704856679088272e-03,
			-2.1754571889266573e-03,
			-2.2000535925879735e-03,
			-2.1427836247891172e-03,
			-2.0101324311648161e-03,
			-1.8157663436507688e-03,
			-1.5790565837738965e-03,
			-1.3230794514709379e-03,
			-1.0722982056842985e-03,
			-8.5015853938458566e-04,
			-6.7683314040934653e-04,
			-5.6733143777716502e-04,
			-5.3015062268610771e-04,
			-5.6658772472861503e-04,
			-6.7076573516148782e-04,
			-8.3035621871028087e-04,
			-1.0279134888687830e-03,
			-1.2426777301980277e-03,
			-1.4526618487227918e-03,
			-1.6368131495740745e-03,
			-1.7770380880220505e-03,
			-1.8598961554604264e-03,
			-1.8778052751213517e-03,
			-1.8296519661545317e-03,
			-1.7207597251464937e-03,
			-1.5622325114940253e-03,
			-1.3697506595220725e-03,
			-1.1619481531160521e-03,
			-9.5853814908442015e-04,
			-7.7837451944441616e-04,
			-6.3763933271861217e-04,
			-5.4832980445290724e-04,
			-5.1718531515799874e-04,
			-5.4514918710074623e-04,
			-6.2740578524895249e-04,
			-7.5397661608139343e-04,
			-9.1080504603679589e-04,
			-1.0812132551662208e-03,
			-1.2475813887483022e-03,
			-1.3930805785312590e-03,
			-1.5032900196379592e-03,
			-1.5675433814101875e-03,
			-1.5798796606311340e-03,
			-1.5395149164156405e-03,
			-1.4507998700714214e-03,
			-1.3226792145237412e-03,
			-1.1677166438897998e-03,
			-1.0007904473973103e-03,
			-8.3759419607065287e-04,
			-6.9309294300030650e-04,
			-5.8008622249482893e-04,
			-5.0801522925231191e-04,
			-4.8212458142003674e-04,
			-5.0305195443362970e-04,
			-5.6687547227462652e-04,
			-6.6560344061365078e-04,
			-7.8804826816350926e-04,
			-9.2099036038381839e-04,



			};
		for(j=0;j<3;j++)
			{

			datamid=0.0;
			now_fir=i_fir_list;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->data[j]*Fir[i];
				now_fir=now_fir->last;
				}

			i_fir_list->band_pass_data[j]=datamid;
			}
			if(x_y_z==0)
			{
				i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]),0.5);
			}
			else
			{
				i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]+i_fir_list->band_pass_data[2]*i_fir_list->band_pass_data[2]),0.5);
			}


		for(j=0;j<3;j++)
			{
			datamid=0.0;
			now_fir=i_fir_list;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->dataV[j]*Fir[i];
				now_fir=now_fir->last;
				}
			i_fir_list->band_pass_dataV[j]=datamid;
			}
			if(x_y_z==0)
			{
				i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
			}
			else
			{
				i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]+i_fir_list->band_pass_dataV[2]*i_fir_list->band_pass_dataV[2]),0.5);
			}
		for(j=0;j<3;j++)
			{
			datamid=0.0;
			now_fir=i_fir_list;
			for(i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->dataD[j]*Fir[i];
				now_fir=now_fir->last;
				}
			i_fir_list->band_pass_dataD[j]=datamid;
			}
			if(x_y_z==0)
			{
				i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
			}
			else
			{
				i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]+i_fir_list->band_pass_dataD[2]*i_fir_list->band_pass_dataD[2]),0.5);
			}

		return 1;
		}

	return 0;

	};















int band_passstruct2_20180815(FIR_LIST *i_fir_list,int band_pass_flag)
	{
	int firLength,j,jjj;
	double datamid;
	FIR_LIST *now_fir;
	if (i_fir_list->sample_rata==50&&band_pass_flag==0)
		{

			

			
			firLength=81;
			double Fir[81]={-4.7987787339820936e-04,
				-8.9057350076593368e-04,
				-7.2903341056485352e-04,
				-9.3968046651590189e-04,
				-2.0015152670250906e-03,
				-1.8457782153191327e-03,
				-1.4331943313841396e-03,
				-3.2987790655067970e-03,
				-3.9188767708761094e-03,
				-2.2358326021832526e-03,
				-4.2761095213556272e-03,
				-6.9685597648698229e-03,
				-4.0562398557881119e-03,
				-4.5086713435378723e-03,
				-1.0324010165847381e-02,
				-7.7980789590883538e-03,
				-4.2123548102063557e-03,
				-1.2580685653923828e-02,
				-1.3896183105007932e-02,
				-4.6707793854684938e-03,
				-1.2139776287417038e-02,
				-2.1492365469531257e-02,
				-8.0968892823001046e-03,
				-8.2631555848332473e-03,
				-2.7966602054323594e-02,
				-1.6735759731169867e-02,
				-2.1834926757662077e-03,
				-2.9254096192636532e-02,
				-3.1499163705017090e-02,
				2.3107659525776346e-03,
				-2.0832464828927390e-02,
				-5.0853889965031082e-02,
				-1.1624388651572256e-03,
				1.8841462457617236e-03,
				-7.0730297852423088e-02,
				-2.3669862992490260e-02,
				4.9655253129437991e-02,
				-8.5754335252881606e-02,
				-1.1745446174509039e-01,
				2.7761355362248835e-01,
				5.7538029520670841e-01,
				2.7761355362248769e-01,
				-1.1745446174508975e-01,
				-8.5754335252880912e-02,
				4.9655253129437457e-02,
				-2.3669862992489934e-02,
				-7.0730297852421936e-02,
				1.8841462457616889e-03,
				-1.1624388651572048e-03,
				-5.0853889965029819e-02,
				-2.0832464828926815e-02,
				2.3107659525775617e-03,
				-3.1499163705016028e-02,
				-2.9254096192635470e-02,
				-2.1834926757661245e-03,
				-1.6735759731169159e-02,
				-2.7966602054322321e-02,
				-8.2631555848328413e-03,
				-8.0968892822996814e-03,
				-2.1492365469530057e-02,
				-1.2139776287416327e-02,
				-4.6707793854682024e-03,
				-1.3896183105007011e-02,
				-1.2580685653922945e-02,
				-4.2123548102060435e-03,
				-7.7980789590877501e-03,
				-1.0324010165846531e-02,
				-4.5086713435374846e-03,
				-4.0562398557877433e-03,
				-6.9685597648691568e-03,
				-4.2761095213552005e-03,
				-2.2358326021830158e-03,
				-3.9188767708756775e-03,
				-3.2987790655064630e-03,
				-1.4331943313839600e-03,
				-1.8457782153188935e-03,
				-2.0015152670248100e-03,
				-9.3968046651576485e-04,
				-7.2903341056474108e-04,
				-8.9057350076577387e-04,
				-4.7987787339812745e-04,
				};



		for(j=0;j<3;j++)
			{

			datamid=0.0;
			now_fir=i_fir_list;
			for(int i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->data[j]*Fir[i];
				now_fir=now_fir->last;
				}

			i_fir_list->band_pass_data[j]=datamid;
			}
		i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]),0.5);



		return 1;
		}
		else if (i_fir_list->sample_rata==50&&band_pass_flag==1)
			{




			firLength=151;
			double Fir[151]={-2.8052426906829513e-03,
				-4.2393366582970269e-03,
				-3.8887138369385330e-03,
				-2.2354116003412555e-03,
				-1.7151340451976370e-03,
				-3.3681835107814504e-03,
				-5.1779067586189562e-03,
				-4.6965135173902524e-03,
				-2.5638580821051682e-03,
				-1.8818136148366425e-03,
				-3.9473893023176630e-03,
				-6.1968403681345145e-03,
				-5.5591924712764754e-03,
				-2.8602285633303683e-03,
				-1.9855715179514558e-03,
				-4.5343773820232715e-03,
				-7.2993746523036347e-03,
				-6.4757972766725895e-03,
				-3.1075377181290190e-03,
				-2.0034515060087738e-03,
				-5.1201983246674521e-03,
				-8.4924282172401180e-03,
				-7.4477448916228876e-03,
				-3.2854307785719003e-03,
				-1.9068638995382889e-03,
				-5.6956197214221181e-03,
				-9.7890130188554095e-03,
				-8.4805326328304762e-03,
				-3.3686880184671422e-03,
				-1.6587501518070553e-03,
				-6.2513201008398845e-03,
				-1.1212180130190147e-02,
				-9.5865220664507079e-03,
				-3.3245287368907092e-03,
				-1.2085331900947341e-03,
				-6.7780883098406538e-03,
				-1.2801858768458711e-02,
				-1.0789770869833983e-02,
				-3.1075700373275851e-03,
				-4.8269424897207818e-04,
				-7.2670234585519751e-03,
				-1.4627552535563389e-02,
				-1.2135072981765502e-02,
				-2.6498708200075548e-03,
				6.3396297658225372e-04,
				-7.7097304696529074e-03,
				-1.6813951744110978e-02,
				-1.3706460562373948e-02,
				-1.8396919533613628e-03,
				2.3388911427624061e-03,
				-8.0985063426770101e-03,
				-1.9598293978969096e-02,
				-1.5669566680424962e-02,
				-4.7103250693004398e-04,
				5.0106092712312988e-03,
				-8.4265124453908481e-03,
				-2.3477962536707364e-02,
				-1.8384256507005932e-02,
				1.8961989182070325e-03,
				9.4930912865623281e-03,
				-8.6879284730553841e-03,
				-2.9673940083844816e-02,
				-2.2776743005803374e-02,
				6.4259738795488016e-03,
				1.8156146307088068e-02,
				-8.8780841635862553e-03,
				-4.2138499851260856e-02,
				-3.2106505797306333e-02,
				1.7595589150292312e-02,
				4.1258267838167328e-02,
				-8.9935654105577235e-03,
				-8.4619383336774115e-02,
				-7.1400968296348372e-02,
				8.4628282316732584e-02,
				2.9419739638965176e-01,
				3.9169381130492797e-01,
				2.9419739638965176e-01,
				8.4628282316732584e-02,
				-7.1400968296348372e-02,
				-8.4619383336774115e-02,
				-8.9935654105577252e-03,
				4.1258267838167349e-02,
				1.7595589150292319e-02,
				-3.2106505797306346e-02,
				-4.2138499851260863e-02,
				-8.8780841635862588e-03,
				1.8156146307088072e-02,
				6.4259738795488016e-03,
				-2.2776743005803384e-02,
				-2.9673940083844830e-02,
				-8.6879284730553893e-03,
				9.4930912865623333e-03,
				1.8961989182070343e-03,
				-1.8384256507005946e-02,
				-2.3477962536707378e-02,
				-8.4265124453908533e-03,
				5.0106092712313005e-03,
				-4.7103250693004398e-04,
				-1.5669566680424969e-02,
				-1.9598293978969110e-02,
				-8.0985063426770188e-03,
				2.3388911427624079e-03,
				-1.8396919533613663e-03,
				-1.3706460562373958e-02,
				-1.6813951744110992e-02,
				-7.7097304696529126e-03,
				6.3396297658225372e-04,
				-2.6498708200075574e-03,
				-1.2135072981765515e-02,
				-1.4627552535563406e-02,
				-7.2670234585519829e-03,
				-4.8269424897207731e-04,
				-3.1075700373275877e-03,
				-1.0789770869833994e-02,
				-1.2801858768458723e-02,
				-6.7780883098406616e-03,
				-1.2085331900947350e-03,
				-3.3245287368907140e-03,
				-9.5865220664507183e-03,
				-1.1212180130190158e-02,
				-6.2513201008398932e-03,
				-1.6587501518070587e-03,
				-3.3686880184671461e-03,
				-8.4805326328304884e-03,
				-9.7890130188554234e-03,
				-5.6956197214221250e-03,
				-1.9068638995382910e-03,
				-3.2854307785719064e-03,
				-7.4477448916228997e-03,
				-8.4924282172401319e-03,
				-5.1201983246674599e-03,
				-2.0034515060087777e-03,
				-3.1075377181290238e-03,
				-6.4757972766725999e-03,
				-7.2993746523036451e-03,
				-4.5343773820232776e-03,
				-1.9855715179514588e-03,
				-2.8602285633303726e-03,
				-5.5591924712764867e-03,
				-6.1968403681345232e-03,
				-3.9473893023176700e-03,
				-1.8818136148366458e-03,
				-2.5638580821051716e-03,
				-4.6965135173902611e-03,
				-5.1779067586189640e-03,
				-3.3681835107814543e-03,
				-1.7151340451976407e-03,
				-2.2354116003412351e-03,
				-3.8887138369385656e-03,
				-4.2393366582969870e-03,
				-2.8052426906829439e-03,

				};



			for(j=0;j<3;j++)
				{

				datamid=0.0;
				now_fir=i_fir_list;
				for(int i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->data[j]*Fir[i];
					now_fir=now_fir->last;
					}

				i_fir_list->band_pass_data[j]=datamid;
				}
			i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]),0.5);



			return 1;
			}
	else if(i_fir_list->sample_rata==100&&band_pass_flag==0)
		{

		firLength=191;
		double Fir[191]={-1.0096108503799409e-03,
			-1.3950482601184145e-03,
			-2.2527488512072823e-03,
			-2.9478325266950626e-03,
			-2.9241282941009309e-03,
			-2.1964877583498382e-03,
			-1.3932186866449717e-03,
			-1.2683702309322061e-03,
			-2.0587294816955936e-03,
			-3.2307108495224480e-03,
			-3.8728518839418980e-03,
			-3.4512139742405856e-03,
			-2.3045215990983815e-03,
			-1.4270997345429326e-03,
			-1.6661388536950924e-03,
			-2.9780040916341042e-03,
			-4.3915096269727697e-03,
			-4.7685469089617048e-03,
			-3.7708238360917514e-03,
			-2.2154696854772564e-03,
			-1.4639880273141859e-03,
			-2.2943598211664952e-03,
			-4.1868456476722750e-03,
			-5.6701595913976281e-03,
			-5.5118721440431517e-03,
			-3.7942060764075075e-03,
			-1.9423711063670419e-03,
			-1.6026343679009464e-03,
			-3.2475373165740244e-03,
			-5.6846723133800129e-03,
			-6.9564131921419870e-03,
			-5.9605784961465312e-03,
			-3.4555395583318526e-03,
			-1.5446848893690436e-03,
			-1.9729728155626920e-03,
			-4.6090756549750133e-03,
			-7.4249335517157806e-03,
			-8.0957173947760943e-03,
			-5.9658402480322953e-03,
			-2.7259882160986819e-03,
			-1.1326443571281007e-03,
			-2.7279163951726233e-03,
			-6.4379538633729206e-03,
			-9.3078652451388747e-03,
			-8.8937043531173623e-03,
			-5.3843686320969916e-03,
			-1.6236386602042371e-03,
			-8.6795329695463013e-04,
			-4.0358532878403434e-03,
			-8.7602540790057502e-03,
			-1.1177665546498936e-02,
			-9.1197841612625230e-03,
			-4.0841129832286773e-03,
			-2.1710181588843413e-04,
			-9.6506787169073674e-04,
			-6.0820299780298100e-03,
			-1.1571060989487639e-02,
			-1.2821283663388564e-02,
			-8.4992305065876590e-03,
			-1.9327687604891049e-03,
			1.3784923032710335e-03,
			-1.7050246429269466e-03,
			-9.0969663617697753e-03,
			-1.4856515017832844e-02,
			-1.3958829431456619e-02,
			-6.6666698386317613e-03,
			1.2562792472859616e-03,
			3.0131140370235859e-03,
			-3.4963797956000272e-03,
			-1.3462418900154581e-02,
			-1.8662168940531118e-02,
			-1.4193048970612182e-02,
			-2.9949266075571710e-03,
			5.9029683387124953e-03,
			4.5197236235567867e-03,
			-7.1079148261703534e-03,
			-2.0084767678293092e-02,
			-2.3311188040322776e-02,
			-1.2784038623879721e-02,
			4.0762178712041601e-03,
			1.3346915816899603e-02,
			5.7359043739684543e-03,
			-1.4720837908786619e-02,
			-3.2099574332974203e-02,
			-3.0404413640455791e-02,
			-7.3824560015768315e-03,
			2.0903522723558492e-02,
			3.0096061155356627e-02,
			6.5259347250955285e-03,
			-3.8462292200619481e-02,
			-7.0869487224785352e-02,
			-5.4107874682352952e-02,
			2.5259979404526650e-02,
			1.4370865641013861e-01,
			2.4982563870147181e-01,
			2.9230819959096299e-01,
			2.4982563870147181e-01,
			1.4370865641013864e-01,
			2.5259979404526654e-02,
			-5.4107874682352966e-02,
			-7.0869487224785366e-02,
			-3.8462292200619495e-02,
			6.5259347250955302e-03,
			3.0096061155356641e-02,
			2.0903522723558506e-02,
			-7.3824560015768349e-03,
			-3.0404413640455815e-02,
			-3.2099574332974223e-02,
			-1.4720837908786630e-02,
			5.7359043739684604e-03,
			1.3346915816899613e-02,
			4.0762178712041627e-03,
			-1.2784038623879739e-02,
			-2.3311188040322804e-02,
			-2.0084767678293116e-02,
			-7.1079148261703612e-03,
			4.5197236235567911e-03,
			5.9029683387125048e-03,
			-2.9949266075571736e-03,
			-1.4193048970612207e-02,
			-1.8662168940531153e-02,
			-1.3462418900154604e-02,
			-3.4963797956000320e-03,
			3.0131140370235911e-03,
			1.2562792472859642e-03,
			-6.6666698386317743e-03,
			-1.3958829431456649e-02,
			-1.4856515017832875e-02,
			-9.0969663617697927e-03,
			-1.7050246429269492e-03,
			1.3784923032710370e-03,
			-1.9327687604891093e-03,
			-8.4992305065876780e-03,
			-1.2821283663388595e-02,
			-1.1571060989487670e-02,
			-6.0820299780298256e-03,
			-9.6506787169073935e-04,
			-2.1710181588843587e-04,
			-4.0841129832286877e-03,
			-9.1197841612625508e-03,
			-1.1177665546498967e-02,
			-8.7602540790057779e-03,
			-4.0358532878403556e-03,
			-8.6795329695463187e-04,
			-1.6236386602042424e-03,
			-5.3843686320970089e-03,
			-8.8937043531173883e-03,
			-9.3078652451389042e-03,
			-6.4379538633729406e-03,
			-2.7279163951726333e-03,
			-1.1326443571281050e-03,
			-2.7259882160986914e-03,
			-5.9658402480323187e-03,
			-8.0957173947761238e-03,
			-7.4249335517158083e-03,
			-4.6090756549750297e-03,
			-1.9729728155626998e-03,
			-1.5446848893690497e-03,
			-3.4555395583318661e-03,
			-5.9605784961465555e-03,
			-6.9564131921420139e-03,
			-5.6846723133800337e-03,
			-3.2475373165740378e-03,
			-1.6026343679009538e-03,
			-1.9423711063670500e-03,
			-3.7942060764075232e-03,
			-5.5118721440431751e-03,
			-5.6701595913976532e-03,
			-4.1868456476722923e-03,
			-2.2943598211665065e-03,
			-1.4639880273141920e-03,
			-2.2154696854772668e-03,
			-3.7708238360917696e-03,
			-4.7685469089617273e-03,
			-4.3915096269727888e-03,
			-2.9780040916341185e-03,
			-1.6661388536951005e-03,
			-1.4270997345429397e-03,
			-2.3045215990983915e-03,
			-3.4512139742406017e-03,
			-3.8728518839419141e-03,
			-3.2307108495224631e-03,
			-2.0587294816956044e-03,
			-1.2683702309322122e-03,
			-1.3932186866449782e-03,
			-2.1964877583498486e-03,
			-2.9241282941009409e-03,
			-2.9478325266950032e-03,
			-2.2527488512072988e-03,
			-1.3950482601184288e-03,
			-1.0096108503799466e-03,



			};
		for(j=0;j<3;j++)
			{

			datamid=0.0;
			now_fir=i_fir_list;
			for(int i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->data[j]*Fir[i];
				now_fir=now_fir->last;
				}

			i_fir_list->band_pass_data[j]=datamid;
			}
		i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]),0.5);



		return 1;
		}
		else if(i_fir_list->sample_rata==100&&band_pass_flag==1)
				{

				firLength=301;
				double Fir[301]={-1.3934901977829615e-03,
					-1.8159417519245753e-03,
					-2.1047061992379365e-03,
					-2.1499567281675455e-03,
					-1.9319560065597574e-03,
					-1.5336077824486048e-03,
					-1.1131764610959451e-03,
					-8.4586773282764453e-04,
					-8.5571492559512663e-04,
					-1.1641429939370940e-03,
					-1.6763388826177095e-03,
					-2.2127045829863049e-03,
					-2.5752520825855834e-03,
					-2.6245209995463341e-03,
					-2.3372518475216625e-03,
					-1.8211766253946077e-03,
					-1.2790312324263129e-03,
					-9.3350462293830287e-04,
					-9.4077162689895221e-04,
					-1.3260577655623985e-03,
					-1.9675936202030414e-03,
					-2.6375233932370771e-03,
					-3.0863445849885914e-03,
					-3.1397319857095246e-03,
					-2.7703067122125825e-03,
					-2.1150445844176149e-03,
					-1.4290329171544275e-03,
					-9.9084931593346887e-04,
					-9.9450274977262157e-04,
					-1.4697037836401406e-03,
					-2.2629691037629874e-03,
					-3.0896434805398041e-03,
					-3.6395636772003424e-03,
					-3.6973125284921167e-03,
					-3.2306007769072587e-03,
					-2.4107945111442089e-03,
					-1.5546360967761310e-03,
					-1.0065972753527060e-03,
					-1.0053738031440373e-03,
					-1.5860839569270741e-03,
					-2.5579388666770995e-03,
					-3.5692958764463449e-03,
					-4.2383209384534298e-03,
					-4.3009144849360951e-03,
					-3.7187912246025431e-03,
					-2.7038140209237104e-03,
					-1.6456047543273620e-03,
					-9.6672554881740698e-04,
					-9.5902862506833195e-04,
					-1.6643298430027724e-03,
					-2.8478287426786748e-03,
					-4.0784458396371038e-03,
					-4.8890672246237271e-03,
					-4.9573843372280107e-03,
					-4.2375689803696064e-03,
					-2.9893918921230977e-03,
					-1.6892661355065719e-03,
					-8.5315338472186943e-04,
					-8.3687322528905046e-04,
					-1.6908134983387932e-03,
					-3.1279156197627396e-03,
					-4.6219899287065240e-03,
					-5.6032676672302818e-03,
					-5.6788440317752488e-03,
					-4.7930527289633748e-03,
					-3.2628185712932083e-03,
					-1.6691643874906282e-03,
					-6.4136490201577951e-04,
					-6.1355241309235965e-04,
					-1.6475301337705620e-03,
					-3.3935290783997270e-03,
					-5.2097909555231794e-03,
					-6.4008237800856037e-03,
					-6.4863194218901269e-03,
					-5.3972072803381739e-03,
					-3.5194883154958849e-03,
					-1.5625414496258179e-03,
					-2.9599484306628491e-04,
					-2.5223929370514470e-04,
					-1.5090285192966766e-03,
					-3.6401534025372944e-03,
					-5.8603941401391838e-03,
					-7.3164248762943827e-03,
					-7.4165259229421188e-03,
					-6.0723665880914419e-03,
					-3.7550004343177984e-03,
					-1.3353600892311249e-03,
					2.3788693116028032e-04,
					3.0473249946160190e-04,
					-1.2362210827844447e-03,
					-3.8635274170506517e-03,
					-6.6084146410208293e-03,
					-8.4123588516069620e-03,
					-8.5356836076430822e-03,
					-6.8604886253879381e-03,
					-3.9652570935789742e-03,
					-9.3168387924516256e-04,
					1.0534705820681239e-03,
					1.1561602642038765e-03,
					-7.6279308836732713e-04,
					-4.0597396392069423e-03,
					-7.5208401297042239e-03,
					-9.8072001726968727e-03,
					-9.9708294562862142e-03,
					-7.8443429100596568e-03,
					-4.1465552109397862e-03,
					-2.4844224798785294e-04,
					2.3271192130121512e-03,
					2.4913851040193188e-03,
					3.8417223566559994e-05,
					-4.2253163338121661e-03,
					-8.7382536865734783e-03,
					-1.1749625514224836e-02,
					-1.1991733098263043e-02,
					-9.2038390171244738e-03,
					-4.2956701090024274e-03,
					9.3449579474537436e-04,
					4.4450971219227456e-03,
					4.7325123287797061e-03,
					1.4542781444556027e-03,
					-4.3573002295476306e-03,
					-1.0601141815511635e-02,
					-1.4850187602870650e-02,
					-1.5274622891964655e-02,
					-1.1402122422123587e-02,
					-4.4099287906940446e-03,
					3.1992627279992338e-03,
					8.4610861449535505e-03,
					9.0647035001510286e-03,
					4.3128967563563032e-03,
					-4.4533178832161045e-03,
					-1.4174787943096560e-02,
					-2.1085357894361143e-02,
					-2.2096384652325083e-02,
					-1.6069207429197555e-02,
					-4.4872709594348387e-03,
					8.7849658638558172e-03,
					1.8665591162767350e-02,
					2.0618219193568481e-02,
					1.2446574643172092e-02,
					-4.5116339631119861e-03,
					-2.5272940970094884e-02,
					-4.2331277335992394e-02,
					-4.7764061273754821e-02,
					-3.5721208137345535e-02,
					-4.5262962159261927e-03,
					4.2308025951629580e-02,
					9.6544322689801162e-02,
					1.4711299332650787e-01,
					1.8293486636295642e-01,
					1.9587085363289147e-01,
					1.8293486636295639e-01,
					1.4711299332650785e-01,
					9.6544322689801135e-02,
					4.2308025951629566e-02,
					-4.5262962159261918e-03,
					-3.5721208137345535e-02,
					-4.7764061273754814e-02,
					-4.2331277335992387e-02,
					-2.5272940970094880e-02,
					-4.5116339631119853e-03,
					1.2446574643172089e-02,
					2.0618219193568474e-02,
					1.8665591162767347e-02,
					8.7849658638558138e-03,
					-4.4872709594348361e-03,
					-1.6069207429197544e-02,
					-2.2096384652325073e-02,
					-2.1085357894361126e-02,
					-1.4174787943096552e-02,
					-4.4533178832161010e-03,
					4.3128967563563006e-03,
					9.0647035001510234e-03,
					8.4610861449535436e-03,
					3.1992627279992312e-03,
					-4.4099287906940411e-03,
					-1.1402122422123580e-02,
					-1.5274622891964643e-02,
					-1.4850187602870640e-02,
					-1.0601141815511625e-02,
					-4.3573002295476280e-03,
					1.4542781444556018e-03,
					4.7325123287797017e-03,
					4.4450971219227413e-03,
					9.3449579474537349e-04,
					-4.2956701090024231e-03,
					-9.2038390171244669e-03,
					-1.1991733098263025e-02,
					-1.1749625514224822e-02,
					-8.7382536865734661e-03,
					-4.2253163338121600e-03,
					3.8417223566559994e-05,
					2.4913851040193153e-03,
					2.3271192130121469e-03,
					-2.4844224798785381e-04,
					-4.1465552109397810e-03,
					-7.8443429100596446e-03,
					-9.9708294562862020e-03,
					-9.8072001726968588e-03,
					-7.5208401297042135e-03,
					-4.0597396392069380e-03,
					-7.6279308836732583e-04,
					1.1561602642038756e-03,
					1.0534705820681221e-03,
					-9.3168387924516213e-04,
					-3.9652570935789682e-03,
					-6.8604886253879251e-03,
					-8.5356836076430683e-03,
					-8.4123588516069481e-03,
					-6.6084146410208154e-03,
					-3.8635274170506460e-03,
					-1.2362210827844425e-03,
					3.0473249946160017e-04,
					2.3788693116027988e-04,
					-1.3353600892311228e-03,
					-3.7550004343177915e-03,
					-6.0723665880914298e-03,
					-7.4165259229421032e-03,
					-7.3164248762943671e-03,
					-5.8603941401391716e-03,
					-3.6401534025372871e-03,
					-1.5090285192966731e-03,
					-2.5223929370514383e-04,
					-2.9599484306628491e-04,
					-1.5625414496258144e-03,
					-3.5194883154958771e-03,
					-5.3972072803381609e-03,
					-6.4863194218901122e-03,
					-6.4008237800855889e-03,
					-5.2097909555231664e-03,
					-3.3935290783997183e-03,
					-1.6475301337705575e-03,
					-6.1355241309235748e-04,
					-6.4136490201577821e-04,
					-1.6691643874906245e-03,
					-3.2628185712932005e-03,
					-4.7930527289633627e-03,
					-5.6788440317752332e-03,
					-5.6032676672302679e-03,
					-4.6219899287065127e-03,
					-3.1279156197627305e-03,
					-1.6908134983387882e-03,
					-8.3687322528904872e-04,
					-8.5315338472186726e-04,
					-1.6892661355065672e-03,
					-2.9893918921230908e-03,
					-4.2375689803695943e-03,
					-4.9573843372279977e-03,
					-4.8890672246237124e-03,
					-4.0784458396370933e-03,
					-2.8478287426786674e-03,
					-1.6643298430027674e-03,
					-9.5902862506832913e-04,
					-9.6672554881740416e-04,
					-1.6456047543273575e-03,
					-2.7038140209237008e-03,
					-3.7187912246025327e-03,
					-4.3009144849360829e-03,
					-4.2383209384534160e-03,
					-3.5692958764463336e-03,
					-2.5579388666770917e-03,
					-1.5860839569270702e-03,
					-1.0053738031440341e-03,
					-1.0065972753527028e-03,
					-1.5546360967761263e-03,
					-2.4107945111442020e-03,
					-3.2306007769072496e-03,
					-3.6973125284921046e-03,
					-3.6395636772003298e-03,
					-3.0896434805397937e-03,
					-2.2629691037629792e-03,
					-1.4697037836401362e-03,
					-9.9450274977261875e-04,
					-9.9084931593346518e-04,
					-1.4290329171544223e-03,
					-2.1150445844176089e-03,
					-2.7703067122125742e-03,
					-3.1397319857095142e-03,
					-3.0863445849885810e-03,
					-2.6375233932370672e-03,
					-1.9675936202030344e-03,
					-1.3260577655623941e-03,
					-9.4077162689894884e-04,
					-9.3350462293829940e-04,
					-1.2790312324263090e-03,
					-1.8211766253946012e-03,
					-2.3372518475216551e-03,
					-2.6245209995463237e-03,
					-2.5752520825855730e-03,
					-2.2127045829862962e-03,
					-1.6763388826177036e-03,
					-1.1641429939370888e-03,
					-8.5571492559512359e-04,
					-8.4586773282764138e-04,
					-1.1131764610959410e-03,
					-1.5336077824486000e-03,
					-1.9319560065597509e-03,
					-2.1499567281675781e-03,
					-2.1047061992379612e-03,
					-1.8159417519245733e-03,
					-1.3934901977829676e-03,



					};
				for(j=0;j<3;j++)
					{

					datamid=0.0;
					now_fir=i_fir_list;
					for(int i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->data[j]*Fir[i];
						now_fir=now_fir->last;
						}

					i_fir_list->band_pass_data[j]=datamid;
					}
				i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]),0.5);



				return 1;
		}
	else if(i_fir_list->sample_rata==200&&band_pass_flag==0)
		{
		firLength=301;

		double Fir[301]={-1.5738968347689628e-04,
			-1.7735491639294824e-04,
			-2.1736124094126334e-04,
			-2.7483905489700012e-04,
			-3.4266813193163193e-04,
			-4.1030106015100642e-04,
			-4.6590026089908369e-04,
			-4.9908565647348161e-04,
			-5.0368485858866155e-04,
			-4.7980096272096865e-04,
			-4.3459912811287315e-04,
			-3.8145932023061683e-04,
			-3.3750551620498548e-04,
			-3.1992389949451273e-04,
			-3.4182841427864982e-04,
			-4.0862956128619334e-04,
			-5.1584657092479044e-04,
			-6.4905509995696496e-04,
			-7.8621869932361810e-04,
			-9.0210075583715586e-04,
			-9.7391805542624665e-04,
			-9.8700968544837217e-04,
			-9.3916478239759282e-04,
			-8.4243680789333406e-04,
			-7.2175694572392348e-04,
			-6.1035700575723644e-04,
			-5.4277523357811595e-04,
			-5.4686940852928067e-04,
			-6.3663386121590247e-04,
			-8.0759555645765300e-04,
			-1.0361182005924534e-03,
			-1.2831404037890676e-03,
			-1.5018735401092786e-03,
			-1.6480075080620943e-03,
			-1.6902522160705587e-03,
			-1.6187724217614032e-03,
			-1.4493561975616916e-03,
			-1.2219729859712122e-03,
			-9.9357826868147307e-04,
			-8.2635727901226479e-04,
			-7.7376662014393995e-04,
			-8.6744203333462462e-04,
			-1.1080893063261379e-03,
			-1.4627990304460733e-03,
			-1.8699254737555102e-03,
			-2.2510004567963386e-03,
			-2.5274762640143944e-03,
			-2.6387982693635644e-03,
			-2.5577291433000224e-03,
			-2.2991713422791313e-03,
			-1.9199554375127431e-03,
			-1.5089616520395268e-03,
			-1.1691295962667500e-03,
			-9.9489997697284663e-04,
			-1.0499463509793807e-03,
			-1.3503416137936456e-03,
			-1.8574229089935940e-03,
			-2.4826907958067261e-03,
			-3.1044754803961948e-03,
			-3.5933784465069858e-03,
			-3.8412720032523487e-03,
			-3.7874595744862814e-03,
			-3.4358093523187173e-03,
			-2.8583194491591827e-03,
			-2.1833724736893233e-03,
			-1.5703255973366405e-03,
			-1.1753198885291142e-03,
			-1.1155270970319925e-03,
			-1.4398884580665875e-03,
			-2.1134488140001156e-03,
			-3.0197519628140561e-03,
			-3.9819340454248483e-03,
			-4.7989298359828224e-03,
			-5.2895315090100694e-03,
			-5.3347847421739408e-03,
			-4.9089772067057768e-03,
			-4.0914494807903403e-03,
			-3.0553263232042977e-03,
			-2.0342643861179957e-03,
			-1.2733736807093051e-03,
			-9.7444743993873348e-04,
			-1.2475579059199422e-03,
			-2.0803813561700931e-03,
			-3.3333020239832397e-03,
			-4.7630034661209093e-03,
			-6.0709747972200970e-03,
			-6.9675036714509026e-03,
			-7.2376487999995407e-03,
			-6.7944115044867989e-03,
			-5.7063144258142880e-03,
			-4.1915922126739454e-03,
			-2.5782559165073099e-03,
			-1.2369414329412996e-03,
			-5.0000439657026010e-04,
			-5.8423897384719532e-04,
			-1.5348385257546453e-03,
			-3.2045099423030948e-03,
			-5.2745989273480509e-03,
			-7.3160653117819293e-03,
			-8.8790713655859960e-03,
			-9.5928420397288355e-03,
			-9.2540312860429144e-03,
			-7.8830675166212654e-03,
			-5.7338544840285889e-03,
			-3.2517317719462481e-03,
			-9.8584385474959567e-04,
			5.2737308823975636e-04,
			8.8539160937573045e-04,
			-8.1278022656460546e-05,
			-2.2555652814956074e-03,
			-5.2408116952406677e-03,
			-8.4306412604161132e-03,
			-1.1130333116173553e-02,
			-1.2706151017152620e-02,
			-1.2731360484584070e-02,
			-1.1096337143008480e-02,
			-8.0559256539294525e-03,
			-4.1992280006084327e-03,
			-3.4304817834827792e-04,
			2.6329471431176831e-03,
			3.9772854451277720e-03,
			3.2439302636812226e-03,
			4.1585700052789186e-04,
			-4.0560792879092526e-03,
			-9.3139281317865166e-03,
			-1.4247613714347402e-02,
			-1.7717974336771903e-02,
			-1.8805230945223246e-02,
			-1.7031601742540699e-02,
			-1.2508339273051561e-02,
			-5.9695509104043653e-03,
			1.3240748146035209e-03,
			7.8028250387371500e-03,
			1.1892350786033203e-02,
			1.2350080720461974e-02,
			8.5682310423650879e-03,
			7.7979549076405419e-04,
			-9.8815104670206631e-03,
			-2.1491211233783846e-02,
			-3.1606466363625955e-02,
			-3.7661758554831441e-02,
			-3.7422874756706775e-02,
			-2.9419394015175061e-02,
			-1.3275490993334308e-02,
			1.0126511572124210e-02,
			3.8687978116648487e-02,
			6.9343825778920370e-02,
			9.8485912360757433e-02,
			1.2249350941875659e-01,
			1.3828375204993210e-01,
			1.4378957268385817e-01,
			1.3828375204993198e-01,
			1.2249350941875640e-01,
			9.8485912360757155e-02,
			6.9343825778920107e-02,
			3.8687978116648321e-02,
			1.0126511572124158e-02,
			-1.3275490993334225e-02,
			-2.9419394015174839e-02,
			-3.7422874756706463e-02,
			-3.7661758554831101e-02,
			-3.1606466363625629e-02,
			-2.1491211233783607e-02,
			-9.8815104670205468e-03,
			7.7979549076404465e-04,
			8.5682310423649734e-03,
			1.2350080720461792e-02,
			1.1892350786033016e-02,
			7.8028250387370190e-03,
			1.3240748146034983e-03,
			-5.9695509104042534e-03,
			-1.2508339273051316e-02,
			-1.7031601742540346e-02,
			-1.8805230945222844e-02,
			-1.7717974336771518e-02,
			-1.4247613714347076e-02,
			-9.3139281317862910e-03,
			-4.0560792879091503e-03,
			4.1585700052788145e-04,
			3.2439302636811385e-03,
			3.9772854451276627e-03,
			2.6329471431176059e-03,
			-3.4304817834826751e-04,
			-4.1992280006083061e-03,
			-8.0559256539291975e-03,
			-1.1096337143008119e-02,
			-1.2731360484583639e-02,
			-1.2706151017152188e-02,
			-1.1130333116173159e-02,
			-8.4306412604158061e-03,
			-5.2408116952404717e-03,
			-2.2555652814955185e-03,
			-8.1278022656457077e-05,
			8.8539160937569489e-04,
			5.2737308823973467e-04,
			-9.8584385474955491e-04,
			-3.2517317719461085e-03,
			-5.7338544840283339e-03,
			-7.8830675166209115e-03,
			-9.2540312860424894e-03,
			-9.5928420397283845e-03,
			-8.8790713655855676e-03,
			-7.3160653117815720e-03,
			-5.2745989273477829e-03,
			-3.2045099423029331e-03,
			-1.5348385257545655e-03,
			-5.8423897384716496e-04,
			-5.0000439657023278e-04,
			-1.2369414329412311e-03,
			-2.5782559165071638e-03,
			-4.1915922126737068e-03,
			-5.7063144258139575e-03,
			-6.7944115044863947e-03,
			-7.2376487999991001e-03,
			-6.9675036714504724e-03,
			-6.0709747972197223e-03,
			-4.7630034661206057e-03,
			-3.3333020239830237e-03,
			-2.0803813561699586e-03,
			-1.2475579059198585e-03,
			-9.7444743993866712e-04,
			-1.2733736807092175e-03,
			-2.0342643861178543e-03,
			-3.0553263232040791e-03,
			-4.0914494807900480e-03,
			-4.9089772067054177e-03,
			-5.3347847421735478e-03,
			-5.2895315090096687e-03,
			-4.7989298359824538e-03,
			-3.9819340454245395e-03,
			-3.0197519628138176e-03,
			-2.1134488139999473e-03,
			-1.4398884580664711e-03,
			-1.1155270970319006e-03,
			-1.1753198885290160e-03,
			-1.5703255973365086e-03,
			-2.1833724736891359e-03,
			-2.8583194491589325e-03,
			-3.4358093523184151e-03,
			-3.7874595744859440e-03,
			-3.8412720032520008e-03,
			-3.5933784465066554e-03,
			-3.1044754803959073e-03,
			-2.4826907958064920e-03,
			-1.8574229089934173e-03,
			-1.3503416137935148e-03,
			-1.0499463509792775e-03,
			-9.9489997697274797e-04,
			-1.1691295962666325e-03,
			-1.5089616520393724e-03,
			-1.9199554375125441e-03,
			-2.2991713422788910e-03,
			-2.5577291432997522e-03,
			-2.6387982693632807e-03,
			-2.5274762640141194e-03,
			-2.2510004567960896e-03,
			-1.8699254737553005e-03,
			-1.4627990304459074e-03,
			-1.1080893063260097e-03,
			-8.6744203333452400e-04,
			-7.7376662014384866e-04,
			-8.2635727901216656e-04,
			-9.9357826868135316e-04,
			-1.2219729859710637e-03,
			-1.4493561975615118e-03,
			-1.6187724217612007e-03,
			-1.6902522160703449e-03,
			-1.6480075080618820e-03,
			-1.5018735401090826e-03,
			-1.2831404037888989e-03,
			-1.0361182005923146e-03,
			-8.0759555645754327e-04,
			-6.3663386121581508e-04,
			-5.4686940852920413e-04,
			-5.4277523357803897e-04,
			-6.1035700575714949e-04,
			-7.2175694572381886e-04,
			-8.4243680789320959e-04,
			-9.3916478239745296e-04,
			-9.8700968544822277e-04,
			-9.7391805542609714e-04,
			-9.0210075583701556e-04,
			-7.8621869932349417e-04,
			-6.4905509995686088e-04,
			-5.1584657092470653e-04,
			-4.0862956128612563e-04,
			-3.4182841427859273e-04,
			-3.1992389949445831e-04,
			-3.3750551620492721e-04,
			-3.8145932023054988e-04,
			-4.3459912811279558e-04,
			-4.7980096272088148e-04,
			-5.0368485858856907e-04,
			-4.9908565647338837e-04,
			-4.6590026089899489e-04,
			-4.1030106015092717e-04,
			-3.4266813193156422e-04,
			-2.7483905489694477e-04,
			-2.1736124094121881e-04,
			-1.7735491639291114e-04,
			-1.5738968347686275e-04,


			};
		for(j=0;j<3;j++)
			{

			datamid=0.0;
			now_fir=i_fir_list;
			for(int i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->data[j]*Fir[i];
				now_fir=now_fir->last;
				}

			i_fir_list->band_pass_data[j]=datamid;
			}
		i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]),0.5);




		return 1;
		}
	else if(i_fir_list->sample_rata==200&&band_pass_flag==1)
		{
		firLength=541;

		double Fir[541]={-9.2099036038378532e-04,
			-7.8804826816350514e-04,
			-6.6560344061362866e-04,
			-5.6687547227462695e-04,
			-5.0305195443362731e-04,
			-4.8212458142003447e-04,
			-5.0801522925230963e-04,
			-5.8008622249482611e-04,
			-6.9309294300030314e-04,
			-8.3759419607064940e-04,
			-1.0007904473973064e-03,
			-1.1677166438897948e-03,
			-1.3226792145237351e-03,
			-1.4507998700714149e-03,
			-1.5395149164156340e-03,
			-1.5798796606311268e-03,
			-1.5675433814101799e-03,
			-1.5032900196379525e-03,
			-1.3930805785312536e-03,
			-1.2475813887482972e-03,
			-1.0812132551662164e-03,
			-9.1080504603679199e-04,
			-7.5397661608138985e-04,
			-6.2740578524895022e-04,
			-5.4514918710074384e-04,
			-5.1718531515799690e-04,
			-5.4832980445290475e-04,
			-6.3763933271860978e-04,
			-7.7837451944441324e-04,
			-9.5853814908441635e-04,
			-1.1619481531160475e-03,
			-1.3697506595220668e-03,
			-1.5622325114940184e-03,
			-1.7207597251464868e-03,
			-1.8296519661545247e-03,
			-1.8778052751213447e-03,
			-1.8598961554604190e-03,
			-1.7770380880220437e-03,
			-1.6368131495740684e-03,
			-1.4526618487227868e-03,
			-1.2426777301980229e-03,
			-1.0279134888687795e-03,
			-8.3035621871027751e-04,
			-6.7076573516148576e-04,
			-5.6658772472861297e-04,
			-5.3015062268610609e-04,
			-5.6733143777716296e-04,
			-6.7683314040934404e-04,
			-8.5015853938458274e-04,
			-1.0722982056842946e-03,
			-1.3230794514709333e-03,
			-1.5790565837738907e-03,
			-1.8157663436507616e-03,
			-2.0101324311648091e-03,
			-2.1427836247891099e-03,
			-2.2000535925879644e-03,
			-2.1754571889266504e-03,
			-2.0704856679088202e-03,
			-1.8946275302998378e-03,
			-1.6645966177239893e-03,
			-1.4028273596775336e-03,
			-1.1353710613629898e-03,
			-8.8938935754289306e-04,
			-6.9048502597345474e-04,
			-5.6013150133180209e-04,
			-5.1345808254886992e-04,
			-5.5761788704660181e-04,
			-6.9091251719947467e-04,
			-9.0277595818363658e-04,
			-1.1746371336738743e-03,
			-1.4815938115070816e-03,
			-1.7947487057919354e-03,
			-2.0839898846883352e-03,
			-2.3209490512706072e-03,
			-2.4818481466164577e-03,
			-2.5499498422015465e-03,
			-2.5173609120326093e-03,
			-2.3859964670479806e-03,
			-2.1675922672027342e-03,
			-1.8827443572853935e-03,
			-1.5590512379570593e-03,
			-1.2285242513423947e-03,
			-9.2450775236682355e-04,
			-6.7840413588373869e-04,
			-5.1652413990349946e-04,
			-4.5737696479821453e-04,
			-5.0967758766085958e-04,
			-6.7128325883947910e-04,
			-9.2918345122575824e-04,
			-1.2605657298138107e-03,
			-1.6348739179959412e-03,
			-2.0166749784740114e-03,
			-2.3690672229614647e-03,
			-2.6573034400949446e-03,
			-2.8522746288034552e-03,
			-2.9335066344339071e-03,
			-2.8913631482099544e-03,
			-2.7282208685875907e-03,
			-2.4584796038279720e-03,
			-2.1073826169179673e-03,
			-1.7087397545895546e-03,
			-1.3017563556190544e-03,
			-9.2726353456713112e-04,
			-6.2371066482157266e-04,
			-4.2331173523314162e-04,
			-3.4872998370800008e-04,
			-4.1063976990715308e-04,
			-6.0642476251474388e-04,
			-9.2016438994335105e-04,
			-1.3239361803047587e-03,
			-1.7803320420881636e-03,
			-2.2459644154696938e-03,
			-2.6756357782218845e-03,
			-3.0267727437604114e-03,
			-3.2636916931282249e-03,
			-3.3612706949638629e-03,
			-3.3076524683700241e-03,
			-3.1056912475649718e-03,
			-2.7729746824372565e-03,
			-2.3403892837598060e-03,
			-1.8493412139778430e-03,
			-1.3478794014496636e-03,
			-8.8608150223198922e-04,
			-5.1114349515264787e-04,
			-2.6265206842258714e-04,
			-1.6851079481957512e-04,
			-2.4193625100973236e-04,
			-4.7984317191924781e-04,
			-8.6280715728713074e-04,
			-1.3566415625985743e-03,
			-1.9154665600813400e-03,
			-2.4859984617802782e-03,
			-3.0126612251738065e-03,
			-3.4430325498542480e-03,
			-3.7330937104403427e-03,
			-3.8517604832979464e-03,
			-3.7842324736531100e-03,
			-3.5338050023559580e-03,
			-3.1219319124799489e-03,
			-2.5864957712039751e-03,
			-1.9784179024470525e-03,
			-1.3569073131266510e-03,
			-7.8378825350351668e-04,
			-3.1744647022797834e-04,
			-6.9834312824419518e-06,
			1.1284000836526972e-04,
			2.5354317567758977e-05,
			-2.6597224788052265e-04,
			-7.3743067972836655e-04,
			-1.3469646033695993e-03,
			-2.0379172193921657e-03,
			-2.7443031575346403e-03,
			-3.3971190584163721e-03,
			-3.9310935787960494e-03,
			-4.2912209155740550e-03,
			-4.4384286657659696e-03,
			-4.3538016122489434e-03,
			-4.0409122987702514e-03,
			-3.5259856147050032e-03,
			-2.8558317578400881e-03,
			-2.0937002074628681e-03,
			-1.3134155200516908e-03,
			-5.9233317583970750e-04,
			-3.7822358250078755e-06,
			3.9027251319353107e-04,
			5.4562083721612718e-04,
			4.4059792201310989e-04,
			7.8766065900046770e-05,
			-5.1082710083981203e-04,
			-1.2758972595056852e-03,
			-2.1455177714411132e-03,
			-3.0366641508699954e-03,
			-3.8621118097987728e-03,
			-4.5389428080685424e-03,
			-4.9968394044701686e-03,
			-5.1853430528545691e-03,
			-5.0793389195515149e-03,
			-4.6821819764329082e-03,
			-4.0260977778495107e-03,
			-3.1697493995113059e-03,
			-2.1931374329631778e-03,
			-1.1902658708177875e-03,
			-2.6023694791261148e-04,
			5.0239086906258580e-04,
			1.0170537242174349e-03,
			1.2255086096815426e-03,
			1.0981873138275063e-03,
			6.3790127253392042e-04,
			-1.1953798113192900e-04,
			-1.1079276778061561e-03,
			-2.2363446488090528e-03,
			-3.3974065727959773e-03,
			-4.4773856919170718e-03,
			-5.3672354801872664e-03,
			-5.9734753110310982e-03,
			-6.2278624174949846e-03,
			-6.0948685932705384e-03,
			-5.5761654078248781e-03,
			-4.7115908003906980e-03,
			-3.5763979419758700e-03,
			-2.2749440304833169e-03,
			-9.3132842805940036e-04,
			3.2219796078291040e-04,
			1.3579883121752859e-03,
			2.0657109495232774e-03,
			2.3637734346849855e-03,
			2.2083038115951678e-03,
			1.5987342434481875e-03,
			5.7933196288304162e-04,
			-7.6360523631937476e-04,
			-2.3087604573219398e-03,
			-3.9104757284739783e-03,
			-5.4121833258849901e-03,
			-6.6613801997739783e-03,
			-7.5247452268142716e-03,
			-7.9019373222448622e-03,
			-7.7366891333259091e-03,
			-7.0240232005336425e-03,
			-5.8127492393513962e-03,
			-4.2028248373273342e-03,
			-2.3376400760274124e-03,
			-3.9177573876898449e-04,
			1.4447611912945188e-03,
			2.9844462893490794e-03,
			4.0606549183290512e-03,
			4.5448405291744071e-03,
			4.3607762636084981e-03,
			3.4943738979672815e-03,
			1.9979539455294236e-03,
			-1.1679981628951848e-05,
			-2.3614511802506899e-03,
			-4.8360047833993728e-03,
			-7.1964238219141821e-03,
			-9.2021151553450583e-03,
			-1.0633951165805386e-02,
			-1.1316552798255641e-02,
			-1.1137586000254470e-02,
			-1.0062124842053854e-02,
			-8.1405010867291669e-03,
			-5.5085851061377634e-03,
			-2.3800849646007840e-03,
			9.6884449252551230e-04,
			4.2216836898676243e-03,
			7.0486768194433849e-03,
			9.1368371170709086e-03,
			1.0220305897430315e-02,
			1.0108397670110335e-02,
			8.7087474354680741e-03,
			6.0432886744458819e-03,
			2.2553117568610858e-03,
			-2.3934561482566973e-03,
			-7.5360015862024794e-03,
			-1.2722801055507309e-02,
			-1.7452784005121087e-02,
			-2.1210303569516521e-02,
			-2.3505355684549270e-02,
			-2.3913919959109343e-02,
			-2.2115177846259819e-02,
			-1.7922511198655740e-02,
			-1.1305590976966528e-02,
			-2.4015034641907277e-03,
			8.4863183807199517e-03,
			2.0901652188791666e-02,
			3.4260844192471288e-02,
			4.7888335453839595e-02,
			6.1059894106108653e-02,
			7.3050446110118419e-02,
			8.3182990982319571e-02,
			9.0874957753215704e-02,
			9.5678513253330877e-02,
			9.7311769218428879e-02,
			9.5678513253330918e-02,
			9.0874957753215677e-02,
			8.3182990982319585e-02,
			7.3050446110118419e-02,
			6.1059894106108667e-02,
			4.7888335453839609e-02,
			3.4260844192471288e-02,
			2.0901652188791666e-02,
			8.4863183807199569e-03,
			-2.4015034641907285e-03,
			-1.1305590976966534e-02,
			-1.7922511198655757e-02,
			-2.2115177846259833e-02,
			-2.3913919959109346e-02,
			-2.3505355684549270e-02,
			-2.1210303569516531e-02,
			-1.7452784005121090e-02,
			-1.2722801055507311e-02,
			-7.5360015862024829e-03,
			-2.3934561482566981e-03,
			2.2553117568610867e-03,
			6.0432886744458819e-03,
			8.7087474354680741e-03,
			1.0108397670110337e-02,
			1.0220305897430322e-02,
			9.1368371170709086e-03,
			7.0486768194433849e-03,
			4.2216836898676261e-03,
			9.6884449252551273e-04,
			-2.3800849646007844e-03,
			-5.5085851061377642e-03,
			-8.1405010867291686e-03,
			-1.0062124842053856e-02,
			-1.1137586000254470e-02,
			-1.1316552798255644e-02,
			-1.0633951165805386e-02,
			-9.2021151553450635e-03,
			-7.1964238219141838e-03,
			-4.8360047833993763e-03,
			-2.3614511802506908e-03,
			-1.1679981628951848e-05,
			1.9979539455294258e-03,
			3.4943738979672854e-03,
			4.3607762636085007e-03,
			4.5448405291744088e-03,
			4.0606549183290546e-03,
			2.9844462893490803e-03,
			1.4447611912945196e-03,
			-3.9177573876898449e-04,
			-2.3376400760274133e-03,
			-4.2028248373273359e-03,
			-5.8127492393514005e-03,
			-7.0240232005336460e-03,
			-7.7366891333259160e-03,
			-7.9019373222448709e-03,
			-7.5247452268142768e-03,
			-6.6613801997739835e-03,
			-5.4121833258849944e-03,
			-3.9104757284739800e-03,
			-2.3087604573219420e-03,
			-7.6360523631937541e-04,
			5.7933196288304206e-04,
			1.5987342434481888e-03,
			2.2083038115951695e-03,
			2.3637734346849881e-03,
			2.0657109495232787e-03,
			1.3579883121752868e-03,
			3.2219796078291127e-04,
			-9.3132842805940057e-04,
			-2.2749440304833191e-03,
			-3.5763979419758734e-03,
			-4.7115908003907024e-03,
			-5.5761654078248851e-03,
			-6.0948685932705410e-03,
			-6.2278624174949872e-03,
			-5.9734753110311043e-03,
			-5.3672354801872690e-03,
			-4.4773856919170770e-03,
			-3.3974065727959803e-03,
			-2.2363446488090563e-03,
			-1.1079276778061574e-03,
			-1.1953798113192943e-04,
			6.3790127253392085e-04,
			1.0981873138275076e-03,
			1.2255086096815435e-03,
			1.0170537242174358e-03,
			5.0239086906258667e-04,
			-2.6023694791261213e-04,
			-1.1902658708177892e-03,
			-2.1931374329631804e-03,
			-3.1697493995113107e-03,
			-4.0260977778495150e-03,
			-4.6821819764329151e-03,
			-5.0793389195515218e-03,
			-5.1853430528545760e-03,
			-4.9968394044701747e-03,
			-4.5389428080685442e-03,
			-3.8621118097987776e-03,
			-3.0366641508699980e-03,
			-2.1455177714411145e-03,
			-1.2758972595056867e-03,
			-5.1082710083981311e-04,
			7.8766065900046770e-05,
			4.4059792201311075e-04,
			5.4562083721612805e-04,
			3.9027251319353150e-04,
			-3.7822358250078755e-06,
			-5.9233317583970880e-04,
			-1.3134155200516921e-03,
			-2.0937002074628711e-03,
			-2.8558317578400915e-03,
			-3.5259856147050088e-03,
			-4.0409122987702592e-03,
			-4.3538016122489503e-03,
			-4.4384286657659757e-03,
			-4.2912209155740620e-03,
			-3.9310935787960546e-03,
			-3.3971190584163777e-03,
			-2.7443031575346438e-03,
			-2.0379172193921687e-03,
			-1.3469646033696017e-03,
			-7.3743067972836828e-04,
			-2.6597224788052351e-04,
			2.5354317567759410e-05,
			1.1284000836526972e-04,
			-6.9834312824415181e-06,
			-3.1744647022797877e-04,
			-7.8378825350351841e-04,
			-1.3569073131266529e-03,
			-1.9784179024470564e-03,
			-2.5864957712039799e-03,
			-3.1219319124799550e-03,
			-3.5338050023559641e-03,
			-3.7842324736531187e-03,
			-3.8517604832979556e-03,
			-3.7330937104403505e-03,
			-3.4430325498542550e-03,
			-3.0126612251738143e-03,
			-2.4859984617802843e-03,
			-1.9154665600813439e-03,
			-1.3566415625985765e-03,
			-8.6280715728713248e-04,
			-4.7984317191924932e-04,
			-2.4193625100973301e-04,
			-1.6851079481957555e-04,
			-2.6265206842258801e-04,
			-5.1114349515264874e-04,
			-8.8608150223199096e-04,
			-1.3478794014496660e-03,
			-1.8493412139778472e-03,
			-2.3403892837598117e-03,
			-2.7729746824372626e-03,
			-3.1056912475649788e-03,
			-3.3076524683700315e-03,
			-3.3612706949638690e-03,
			-3.2636916931282319e-03,
			-3.0267727437604183e-03,
			-2.6756357782218901e-03,
			-2.2459644154696990e-03,
			-1.7803320420881675e-03,
			-1.3239361803047617e-03,
			-9.2016438994335268e-04,
			-6.0642476251474497e-04,
			-4.1063976990715395e-04,
			-3.4872998370800073e-04,
			-4.2331173523314271e-04,
			-6.2371066482157418e-04,
			-9.2726353456713318e-04,
			-1.3017563556190573e-03,
			-1.7087397545895596e-03,
			-2.1073826169179721e-03,
			-2.4584796038279785e-03,
			-2.7282208685875963e-03,
			-2.8913631482099622e-03,
			-2.9335066344339149e-03,
			-2.8522746288034630e-03,
			-2.6573034400949511e-03,
			-2.3690672229614721e-03,
			-2.0166749784740171e-03,
			-1.6348739179959453e-03,
			-1.2605657298138137e-03,
			-9.2918345122576030e-04,
			-6.7128325883948105e-04,
			-5.0967758766086110e-04,
			-4.5737696479821561e-04,
			-5.1652413990350054e-04,
			-6.7840413588374053e-04,
			-9.2450775236682593e-04,
			-1.2285242513423978e-03,
			-1.5590512379570643e-03,
			-1.8827443572853996e-03,
			-2.1675922672027411e-03,
			-2.3859964670479871e-03,
			-2.5173609120326171e-03,
			-2.5499498422015530e-03,
			-2.4818481466164642e-03,
			-2.3209490512706150e-03,
			-2.0839898846883422e-03,
			-1.7947487057919410e-03,
			-1.4815938115070857e-03,
			-1.1746371336738774e-03,
			-9.0277595818363940e-04,
			-6.9091251719947640e-04,
			-5.5761788704660311e-04,
			-5.1345808254887144e-04,
			-5.6013150133180361e-04,
			-6.9048502597345647e-04,
			-8.8938935754289588e-04,
			-1.1353710613629931e-03,
			-1.4028273596775388e-03,
			-1.6645966177239954e-03,
			-1.8946275302998434e-03,
			-2.0704856679088272e-03,
			-2.1754571889266573e-03,
			-2.2000535925879735e-03,
			-2.1427836247891172e-03,
			-2.0101324311648161e-03,
			-1.8157663436507688e-03,
			-1.5790565837738965e-03,
			-1.3230794514709379e-03,
			-1.0722982056842985e-03,
			-8.5015853938458566e-04,
			-6.7683314040934653e-04,
			-5.6733143777716502e-04,
			-5.3015062268610771e-04,
			-5.6658772472861503e-04,
			-6.7076573516148782e-04,
			-8.3035621871028087e-04,
			-1.0279134888687830e-03,
			-1.2426777301980277e-03,
			-1.4526618487227918e-03,
			-1.6368131495740745e-03,
			-1.7770380880220505e-03,
			-1.8598961554604264e-03,
			-1.8778052751213517e-03,
			-1.8296519661545317e-03,
			-1.7207597251464937e-03,
			-1.5622325114940253e-03,
			-1.3697506595220725e-03,
			-1.1619481531160521e-03,
			-9.5853814908442015e-04,
			-7.7837451944441616e-04,
			-6.3763933271861217e-04,
			-5.4832980445290724e-04,
			-5.1718531515799874e-04,
			-5.4514918710074623e-04,
			-6.2740578524895249e-04,
			-7.5397661608139343e-04,
			-9.1080504603679589e-04,
			-1.0812132551662208e-03,
			-1.2475813887483022e-03,
			-1.3930805785312590e-03,
			-1.5032900196379592e-03,
			-1.5675433814101875e-03,
			-1.5798796606311340e-03,
			-1.5395149164156405e-03,
			-1.4507998700714214e-03,
			-1.3226792145237412e-03,
			-1.1677166438897998e-03,
			-1.0007904473973103e-03,
			-8.3759419607065287e-04,
			-6.9309294300030650e-04,
			-5.8008622249482893e-04,
			-5.0801522925231191e-04,
			-4.8212458142003674e-04,
			-5.0305195443362970e-04,
			-5.6687547227462652e-04,
			-6.6560344061365078e-04,
			-7.8804826816350926e-04,
			-9.2099036038381839e-04,



			};
		for(j=0;j<3;j++)
			{

			datamid=0.0;
			now_fir=i_fir_list;
			for(int i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->data[j]*Fir[i];
				now_fir=now_fir->last;
				}

			i_fir_list->band_pass_data[j]=datamid;
			}
		i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]),0.5);



		return 1;
		}


	return 0;

	};





int band_passstruct_new(FIR_LIST *i_fir_list)
	{
	int firLength,j,jjj;
	double datamid;
	FIR_LIST *now_fir;
	if (i_fir_list->sample_rata==50)
		{
		firLength=81;
		double Fir[81]={-4.7987787339820936e-04,
			-8.9057350076593368e-04,
			-7.2903341056485352e-04,
			-9.3968046651590189e-04,
			-2.0015152670250906e-03,
			-1.8457782153191327e-03,
			-1.4331943313841396e-03,
			-3.2987790655067970e-03,
			-3.9188767708761094e-03,
			-2.2358326021832526e-03,
			-4.2761095213556272e-03,
			-6.9685597648698229e-03,
			-4.0562398557881119e-03,
			-4.5086713435378723e-03,
			-1.0324010165847381e-02,
			-7.7980789590883538e-03,
			-4.2123548102063557e-03,
			-1.2580685653923828e-02,
			-1.3896183105007932e-02,
			-4.6707793854684938e-03,
			-1.2139776287417038e-02,
			-2.1492365469531257e-02,
			-8.0968892823001046e-03,
			-8.2631555848332473e-03,
			-2.7966602054323594e-02,
			-1.6735759731169867e-02,
			-2.1834926757662077e-03,
			-2.9254096192636532e-02,
			-3.1499163705017090e-02,
			2.3107659525776346e-03,
			-2.0832464828927390e-02,
			-5.0853889965031082e-02,
			-1.1624388651572256e-03,
			1.8841462457617236e-03,
			-7.0730297852423088e-02,
			-2.3669862992490260e-02,
			4.9655253129437991e-02,
			-8.5754335252881606e-02,
			-1.1745446174509039e-01,
			2.7761355362248835e-01,
			5.7538029520670841e-01,
			2.7761355362248769e-01,
			-1.1745446174508975e-01,
			-8.5754335252880912e-02,
			4.9655253129437457e-02,
			-2.3669862992489934e-02,
			-7.0730297852421936e-02,
			1.8841462457616889e-03,
			-1.1624388651572048e-03,
			-5.0853889965029819e-02,
			-2.0832464828926815e-02,
			2.3107659525775617e-03,
			-3.1499163705016028e-02,
			-2.9254096192635470e-02,
			-2.1834926757661245e-03,
			-1.6735759731169159e-02,
			-2.7966602054322321e-02,
			-8.2631555848328413e-03,
			-8.0968892822996814e-03,
			-2.1492365469530057e-02,
			-1.2139776287416327e-02,
			-4.6707793854682024e-03,
			-1.3896183105007011e-02,
			-1.2580685653922945e-02,
			-4.2123548102060435e-03,
			-7.7980789590877501e-03,
			-1.0324010165846531e-02,
			-4.5086713435374846e-03,
			-4.0562398557877433e-03,
			-6.9685597648691568e-03,
			-4.2761095213552005e-03,
			-2.2358326021830158e-03,
			-3.9188767708756775e-03,
			-3.2987790655064630e-03,
			-1.4331943313839600e-03,
			-1.8457782153188935e-03,
			-2.0015152670248100e-03,
			-9.3968046651576485e-04,
			-7.2903341056474108e-04,
			-8.9057350076577387e-04,
			-4.7987787339812745e-04,
			};
		//if(dataNum<81)
		//	{
		//	return -1;
		//	}
		for(j=0;j<3;j++)
			{

			datamid=0.0;
			now_fir=i_fir_list;
			for(int i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->data[j]*Fir[i];
				now_fir=now_fir->last;
				}

			i_fir_list->band_pass_data[j]=datamid;
			}
		i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]),0.5);

		//if(*trig!=0)
		//	{
		//	if(PGV_type==1)
		//		{
		//		datamid=0.0;
		//		now_fir=i_fir_list;
		//		for(int i=0;i<firLength;i++)
		//			{
		//			datamid=datamid+now_fir->dataV[4]*Fir[i];
		//			now_fir=now_fir->last;
		//			}
		//		i_fir_list->band_pass_dataV[4]=datamid;



		//		datamid=0.0;
		//		now_fir=i_fir_list;
		//		for(int i=0;i<firLength;i++)
		//			{
		//			datamid=datamid+now_fir->dataD[4]*Fir[i];
		//			now_fir=now_fir->last;
		//			}
		//		i_fir_list->band_pass_dataD[4]=datamid;

		//		}
		//	else if(PGV_type==2)
		//		{
		//		for(int j=0;j<3;j++)
		//			{


		//			datamid=0.0;
		//			now_fir=i_fir_list;
		//			for(int i=0;i<firLength;i++)
		//				{
		//				datamid=datamid+now_fir->dataV[j]*Fir[i];
		//				now_fir=now_fir->last;
		//				}
		//			i_fir_list->band_pass_dataV[j]=datamid;

		//			}
		//		i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
		//		for(int j=0;j<3;j++)
		//			{


		//			datamid=0.0;
		//			now_fir=i_fir_list;
		//			for(int i=0;i<firLength;i++)
		//				{
		//				datamid=datamid+now_fir->dataD[j]*Fir[i];
		//				now_fir=now_fir->last;
		//				}
		//			i_fir_list->band_pass_dataD[j]=datamid;
		//			}
		//		i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
		//		}




		//	if(*trig==2)
		//		{
		//		for(jjj=0;jjj<3;jjj++)
		//			{
		//			band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
		//			band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
		//			band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
		//			}
		//		band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
		//		band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
		//		band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
		//		*count+=1;
		//		*trig=3;
		//		}
		//	else
		//		{
		//		for(jjj=0;jjj<3;jjj++)
		//			{
		//			if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
		//				band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
		//			if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGV_component[jjj])
		//				band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
		//			if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGD_component[jjj])
		//				band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
		//			}




		//		if(i_fir_list->band_pass_data[4]>band_pass_data->final_PGA)
		//			{
		//			band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
		//			band_pass_data->utc_second_final_PGA=i_fir_list->utc_second; //utc时间秒
		//			band_pass_data->utc_nanosecond_final_PGA=i_fir_list->utc_nanosecond; //utc时间纳秒

		//			}
		//		//else
		//		//	{
		//		//	band_pass_data->final_PGA=i_fir_list->last->final_PGA;
		//		//	band_pass_data->utc_second_final_PGA=i_fir_list->last->utc_second; //utc时间秒
		//		//	band_pass_data->utc_nanosecond_final_PGA=i_fir_list->last->utc_nanosecond; //utc时间纳秒
		//		//	}
		//		if(i_fir_list->band_pass_dataV[4]>band_pass_data->final_PGV)
		//			{
		//			band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
		//			band_pass_data->utc_second_final_PGV=i_fir_list->utc_second; //utc时间秒
		//			band_pass_data->utc_nanosecond_final_PGV=i_fir_list->utc_nanosecond; //utc时间纳秒
		//			}
		//		//else
		//		//	{
		//		//	band_pass_data->final_PGV=i_fir_list->last->final_PGV;
		//		//	band_pass_data->utc_second_final_PGV=i_fir_list->last->utc_second; //utc时间秒
		//		//	band_pass_data->utc_nanosecond_final_PGV=i_fir_list->last->utc_nanosecond; //utc时间纳秒
		//		//	}
		//		if(i_fir_list->band_pass_dataD[4]>band_pass_data->final_PGD)
		//			{
		//			band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
		//			band_pass_data->utc_second_final_PGD=i_fir_list->utc_second; //utc时间秒
		//			band_pass_data->utc_nanosecond_final_PGD=i_fir_list->utc_nanosecond; //utc时间纳秒
		//			}
		//		//else
		//		//	{
		//		//	band_pass_data->final_PGD=i_fir_list->last->final_PGD;
		//		//	band_pass_data->utc_second_final_PGD=i_fir_list->last->utc_second; //utc时间秒
		//		//	band_pass_data->utc_nanosecond_final_PGD=i_fir_list->last->utc_nanosecond; //utc时间纳秒
		//		//	}
		//		if(*count==timespan*50)

		//			{
		//			*count=1;
		//			return 2;
		//			}
		//		else
		//			{


		//			*count+=1;
		//			}



		//		}
		//	}

		return 1;
		}
	else if(i_fir_list->sample_rata==100)
		{
		//if(dataNum<191)
		//	{
		//	return -1;
		//	}
		firLength=191;
		double Fir[191]={-1.0096108503799409e-03,
			-1.3950482601184145e-03,
			-2.2527488512072823e-03,
			-2.9478325266950626e-03,
			-2.9241282941009309e-03,
			-2.1964877583498382e-03,
			-1.3932186866449717e-03,
			-1.2683702309322061e-03,
			-2.0587294816955936e-03,
			-3.2307108495224480e-03,
			-3.8728518839418980e-03,
			-3.4512139742405856e-03,
			-2.3045215990983815e-03,
			-1.4270997345429326e-03,
			-1.6661388536950924e-03,
			-2.9780040916341042e-03,
			-4.3915096269727697e-03,
			-4.7685469089617048e-03,
			-3.7708238360917514e-03,
			-2.2154696854772564e-03,
			-1.4639880273141859e-03,
			-2.2943598211664952e-03,
			-4.1868456476722750e-03,
			-5.6701595913976281e-03,
			-5.5118721440431517e-03,
			-3.7942060764075075e-03,
			-1.9423711063670419e-03,
			-1.6026343679009464e-03,
			-3.2475373165740244e-03,
			-5.6846723133800129e-03,
			-6.9564131921419870e-03,
			-5.9605784961465312e-03,
			-3.4555395583318526e-03,
			-1.5446848893690436e-03,
			-1.9729728155626920e-03,
			-4.6090756549750133e-03,
			-7.4249335517157806e-03,
			-8.0957173947760943e-03,
			-5.9658402480322953e-03,
			-2.7259882160986819e-03,
			-1.1326443571281007e-03,
			-2.7279163951726233e-03,
			-6.4379538633729206e-03,
			-9.3078652451388747e-03,
			-8.8937043531173623e-03,
			-5.3843686320969916e-03,
			-1.6236386602042371e-03,
			-8.6795329695463013e-04,
			-4.0358532878403434e-03,
			-8.7602540790057502e-03,
			-1.1177665546498936e-02,
			-9.1197841612625230e-03,
			-4.0841129832286773e-03,
			-2.1710181588843413e-04,
			-9.6506787169073674e-04,
			-6.0820299780298100e-03,
			-1.1571060989487639e-02,
			-1.2821283663388564e-02,
			-8.4992305065876590e-03,
			-1.9327687604891049e-03,
			1.3784923032710335e-03,
			-1.7050246429269466e-03,
			-9.0969663617697753e-03,
			-1.4856515017832844e-02,
			-1.3958829431456619e-02,
			-6.6666698386317613e-03,
			1.2562792472859616e-03,
			3.0131140370235859e-03,
			-3.4963797956000272e-03,
			-1.3462418900154581e-02,
			-1.8662168940531118e-02,
			-1.4193048970612182e-02,
			-2.9949266075571710e-03,
			5.9029683387124953e-03,
			4.5197236235567867e-03,
			-7.1079148261703534e-03,
			-2.0084767678293092e-02,
			-2.3311188040322776e-02,
			-1.2784038623879721e-02,
			4.0762178712041601e-03,
			1.3346915816899603e-02,
			5.7359043739684543e-03,
			-1.4720837908786619e-02,
			-3.2099574332974203e-02,
			-3.0404413640455791e-02,
			-7.3824560015768315e-03,
			2.0903522723558492e-02,
			3.0096061155356627e-02,
			6.5259347250955285e-03,
			-3.8462292200619481e-02,
			-7.0869487224785352e-02,
			-5.4107874682352952e-02,
			2.5259979404526650e-02,
			1.4370865641013861e-01,
			2.4982563870147181e-01,
			2.9230819959096299e-01,
			2.4982563870147181e-01,
			1.4370865641013864e-01,
			2.5259979404526654e-02,
			-5.4107874682352966e-02,
			-7.0869487224785366e-02,
			-3.8462292200619495e-02,
			6.5259347250955302e-03,
			3.0096061155356641e-02,
			2.0903522723558506e-02,
			-7.3824560015768349e-03,
			-3.0404413640455815e-02,
			-3.2099574332974223e-02,
			-1.4720837908786630e-02,
			5.7359043739684604e-03,
			1.3346915816899613e-02,
			4.0762178712041627e-03,
			-1.2784038623879739e-02,
			-2.3311188040322804e-02,
			-2.0084767678293116e-02,
			-7.1079148261703612e-03,
			4.5197236235567911e-03,
			5.9029683387125048e-03,
			-2.9949266075571736e-03,
			-1.4193048970612207e-02,
			-1.8662168940531153e-02,
			-1.3462418900154604e-02,
			-3.4963797956000320e-03,
			3.0131140370235911e-03,
			1.2562792472859642e-03,
			-6.6666698386317743e-03,
			-1.3958829431456649e-02,
			-1.4856515017832875e-02,
			-9.0969663617697927e-03,
			-1.7050246429269492e-03,
			1.3784923032710370e-03,
			-1.9327687604891093e-03,
			-8.4992305065876780e-03,
			-1.2821283663388595e-02,
			-1.1571060989487670e-02,
			-6.0820299780298256e-03,
			-9.6506787169073935e-04,
			-2.1710181588843587e-04,
			-4.0841129832286877e-03,
			-9.1197841612625508e-03,
			-1.1177665546498967e-02,
			-8.7602540790057779e-03,
			-4.0358532878403556e-03,
			-8.6795329695463187e-04,
			-1.6236386602042424e-03,
			-5.3843686320970089e-03,
			-8.8937043531173883e-03,
			-9.3078652451389042e-03,
			-6.4379538633729406e-03,
			-2.7279163951726333e-03,
			-1.1326443571281050e-03,
			-2.7259882160986914e-03,
			-5.9658402480323187e-03,
			-8.0957173947761238e-03,
			-7.4249335517158083e-03,
			-4.6090756549750297e-03,
			-1.9729728155626998e-03,
			-1.5446848893690497e-03,
			-3.4555395583318661e-03,
			-5.9605784961465555e-03,
			-6.9564131921420139e-03,
			-5.6846723133800337e-03,
			-3.2475373165740378e-03,
			-1.6026343679009538e-03,
			-1.9423711063670500e-03,
			-3.7942060764075232e-03,
			-5.5118721440431751e-03,
			-5.6701595913976532e-03,
			-4.1868456476722923e-03,
			-2.2943598211665065e-03,
			-1.4639880273141920e-03,
			-2.2154696854772668e-03,
			-3.7708238360917696e-03,
			-4.7685469089617273e-03,
			-4.3915096269727888e-03,
			-2.9780040916341185e-03,
			-1.6661388536951005e-03,
			-1.4270997345429397e-03,
			-2.3045215990983915e-03,
			-3.4512139742406017e-03,
			-3.8728518839419141e-03,
			-3.2307108495224631e-03,
			-2.0587294816956044e-03,
			-1.2683702309322122e-03,
			-1.3932186866449782e-03,
			-2.1964877583498486e-03,
			-2.9241282941009409e-03,
			-2.9478325266950032e-03,
			-2.2527488512072988e-03,
			-1.3950482601184288e-03,
			-1.0096108503799466e-03,



			};
		for(j=0;j<3;j++)
			{

			datamid=0.0;
			now_fir=i_fir_list;
			for(int i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->data[j]*Fir[i];
				now_fir=now_fir->last;
				}

			i_fir_list->band_pass_data[j]=datamid;
			}
		i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]),0.5);

		//if(*trig!=0)
		//	{


		//	if(PGV_type==1)
		//		{
		//		datamid=0.0;
		//		now_fir=i_fir_list;
		//		for(int i=0;i<firLength;i++)
		//			{
		//			datamid=datamid+now_fir->dataV[4]*Fir[i];
		//			now_fir=now_fir->last;
		//			}
		//		i_fir_list->band_pass_dataV[4]=datamid;



		//		datamid=0.0;
		//		now_fir=i_fir_list;
		//		for(int i=0;i<firLength;i++)
		//			{
		//			datamid=datamid+now_fir->dataD[4]*Fir[i];
		//			now_fir=now_fir->last;
		//			}
		//		i_fir_list->band_pass_dataD[4]=datamid;

		//		}
		//	else if(PGV_type==2)
		//		{
		//		for(int j=0;j<3;j++)
		//			{


		//			datamid=0.0;
		//			now_fir=i_fir_list;
		//			for(int i=0;i<firLength;i++)
		//				{
		//				datamid=datamid+now_fir->dataV[j]*Fir[i];
		//				now_fir=now_fir->last;
		//				}
		//			i_fir_list->band_pass_dataV[j]=datamid;

		//			}
		//		i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
		//		for(int j=0;j<3;j++)
		//			{


		//			datamid=0.0;
		//			now_fir=i_fir_list;
		//			for(int i=0;i<firLength;i++)
		//				{
		//				datamid=datamid+now_fir->dataD[j]*Fir[i];
		//				now_fir=now_fir->last;
		//				}
		//			i_fir_list->band_pass_dataD[j]=datamid;
		//			}
		//		i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
		//		}

		//	if(*trig==2)
		//		{
		//		for(jjj=0;jjj<3;jjj++)
		//			{
		//			band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
		//			band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
		//			band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
		//			}
		//		band_pass_data->final_PGA=i_fir_list->band_pass_data[j];
		//		band_pass_data->final_PGV=i_fir_list->band_pass_dataV[j];
		//		band_pass_data->final_PGD=i_fir_list->band_pass_dataD[j];
		//		*trig=3;
		//		*count+=1;
		//		}
		//	else
		//		{
		//		for(jjj=0;jjj<3;jjj++)
		//			{
		//			if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
		//				band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
		//			if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGV_component[jjj])
		//				band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
		//			if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGD_component[jjj])
		//				band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
		//			}

		//		if(i_fir_list->band_pass_data[4]>band_pass_data->final_PGA)
		//			{
		//			band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
		//			band_pass_data->utc_second_final_PGA=i_fir_list->utc_second; //utc时间秒
		//			band_pass_data->utc_nanosecond_final_PGA=i_fir_list->utc_nanosecond; //utc时间纳秒

		//			}
		//		if(i_fir_list->band_pass_dataV[4]>band_pass_data->final_PGV)
		//			{
		//			band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
		//			band_pass_data->utc_second_final_PGV=i_fir_list->utc_second; //utc时间秒
		//			band_pass_data->utc_nanosecond_final_PGV=i_fir_list->utc_nanosecond; //utc时间纳秒
		//			}
		//		if(i_fir_list->band_pass_dataD[4]>band_pass_data->final_PGD)
		//			{
		//			band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
		//			band_pass_data->utc_second_final_PGD=i_fir_list->utc_second; //utc时间秒
		//			band_pass_data->utc_nanosecond_final_PGD=i_fir_list->utc_nanosecond; //utc时间纳秒
		//			}
		//		if(*count==timespan*100)

		//			{
		//			*count=1;
		//			return 2;
		//			}
		//		else
		//			{


		//			*count+=1;
		//			}



		//		}
		//	}


		return 1;
		}
	else if(i_fir_list->sample_rata==200)
		{
		firLength=301;
		//if(dataNum<301)
		//	{
		//	return -1;
		//	}
		double Fir[301]={-1.5738968347689628e-04,
			-1.7735491639294824e-04,
			-2.1736124094126334e-04,
			-2.7483905489700012e-04,
			-3.4266813193163193e-04,
			-4.1030106015100642e-04,
			-4.6590026089908369e-04,
			-4.9908565647348161e-04,
			-5.0368485858866155e-04,
			-4.7980096272096865e-04,
			-4.3459912811287315e-04,
			-3.8145932023061683e-04,
			-3.3750551620498548e-04,
			-3.1992389949451273e-04,
			-3.4182841427864982e-04,
			-4.0862956128619334e-04,
			-5.1584657092479044e-04,
			-6.4905509995696496e-04,
			-7.8621869932361810e-04,
			-9.0210075583715586e-04,
			-9.7391805542624665e-04,
			-9.8700968544837217e-04,
			-9.3916478239759282e-04,
			-8.4243680789333406e-04,
			-7.2175694572392348e-04,
			-6.1035700575723644e-04,
			-5.4277523357811595e-04,
			-5.4686940852928067e-04,
			-6.3663386121590247e-04,
			-8.0759555645765300e-04,
			-1.0361182005924534e-03,
			-1.2831404037890676e-03,
			-1.5018735401092786e-03,
			-1.6480075080620943e-03,
			-1.6902522160705587e-03,
			-1.6187724217614032e-03,
			-1.4493561975616916e-03,
			-1.2219729859712122e-03,
			-9.9357826868147307e-04,
			-8.2635727901226479e-04,
			-7.7376662014393995e-04,
			-8.6744203333462462e-04,
			-1.1080893063261379e-03,
			-1.4627990304460733e-03,
			-1.8699254737555102e-03,
			-2.2510004567963386e-03,
			-2.5274762640143944e-03,
			-2.6387982693635644e-03,
			-2.5577291433000224e-03,
			-2.2991713422791313e-03,
			-1.9199554375127431e-03,
			-1.5089616520395268e-03,
			-1.1691295962667500e-03,
			-9.9489997697284663e-04,
			-1.0499463509793807e-03,
			-1.3503416137936456e-03,
			-1.8574229089935940e-03,
			-2.4826907958067261e-03,
			-3.1044754803961948e-03,
			-3.5933784465069858e-03,
			-3.8412720032523487e-03,
			-3.7874595744862814e-03,
			-3.4358093523187173e-03,
			-2.8583194491591827e-03,
			-2.1833724736893233e-03,
			-1.5703255973366405e-03,
			-1.1753198885291142e-03,
			-1.1155270970319925e-03,
			-1.4398884580665875e-03,
			-2.1134488140001156e-03,
			-3.0197519628140561e-03,
			-3.9819340454248483e-03,
			-4.7989298359828224e-03,
			-5.2895315090100694e-03,
			-5.3347847421739408e-03,
			-4.9089772067057768e-03,
			-4.0914494807903403e-03,
			-3.0553263232042977e-03,
			-2.0342643861179957e-03,
			-1.2733736807093051e-03,
			-9.7444743993873348e-04,
			-1.2475579059199422e-03,
			-2.0803813561700931e-03,
			-3.3333020239832397e-03,
			-4.7630034661209093e-03,
			-6.0709747972200970e-03,
			-6.9675036714509026e-03,
			-7.2376487999995407e-03,
			-6.7944115044867989e-03,
			-5.7063144258142880e-03,
			-4.1915922126739454e-03,
			-2.5782559165073099e-03,
			-1.2369414329412996e-03,
			-5.0000439657026010e-04,
			-5.8423897384719532e-04,
			-1.5348385257546453e-03,
			-3.2045099423030948e-03,
			-5.2745989273480509e-03,
			-7.3160653117819293e-03,
			-8.8790713655859960e-03,
			-9.5928420397288355e-03,
			-9.2540312860429144e-03,
			-7.8830675166212654e-03,
			-5.7338544840285889e-03,
			-3.2517317719462481e-03,
			-9.8584385474959567e-04,
			5.2737308823975636e-04,
			8.8539160937573045e-04,
			-8.1278022656460546e-05,
			-2.2555652814956074e-03,
			-5.2408116952406677e-03,
			-8.4306412604161132e-03,
			-1.1130333116173553e-02,
			-1.2706151017152620e-02,
			-1.2731360484584070e-02,
			-1.1096337143008480e-02,
			-8.0559256539294525e-03,
			-4.1992280006084327e-03,
			-3.4304817834827792e-04,
			2.6329471431176831e-03,
			3.9772854451277720e-03,
			3.2439302636812226e-03,
			4.1585700052789186e-04,
			-4.0560792879092526e-03,
			-9.3139281317865166e-03,
			-1.4247613714347402e-02,
			-1.7717974336771903e-02,
			-1.8805230945223246e-02,
			-1.7031601742540699e-02,
			-1.2508339273051561e-02,
			-5.9695509104043653e-03,
			1.3240748146035209e-03,
			7.8028250387371500e-03,
			1.1892350786033203e-02,
			1.2350080720461974e-02,
			8.5682310423650879e-03,
			7.7979549076405419e-04,
			-9.8815104670206631e-03,
			-2.1491211233783846e-02,
			-3.1606466363625955e-02,
			-3.7661758554831441e-02,
			-3.7422874756706775e-02,
			-2.9419394015175061e-02,
			-1.3275490993334308e-02,
			1.0126511572124210e-02,
			3.8687978116648487e-02,
			6.9343825778920370e-02,
			9.8485912360757433e-02,
			1.2249350941875659e-01,
			1.3828375204993210e-01,
			1.4378957268385817e-01,
			1.3828375204993198e-01,
			1.2249350941875640e-01,
			9.8485912360757155e-02,
			6.9343825778920107e-02,
			3.8687978116648321e-02,
			1.0126511572124158e-02,
			-1.3275490993334225e-02,
			-2.9419394015174839e-02,
			-3.7422874756706463e-02,
			-3.7661758554831101e-02,
			-3.1606466363625629e-02,
			-2.1491211233783607e-02,
			-9.8815104670205468e-03,
			7.7979549076404465e-04,
			8.5682310423649734e-03,
			1.2350080720461792e-02,
			1.1892350786033016e-02,
			7.8028250387370190e-03,
			1.3240748146034983e-03,
			-5.9695509104042534e-03,
			-1.2508339273051316e-02,
			-1.7031601742540346e-02,
			-1.8805230945222844e-02,
			-1.7717974336771518e-02,
			-1.4247613714347076e-02,
			-9.3139281317862910e-03,
			-4.0560792879091503e-03,
			4.1585700052788145e-04,
			3.2439302636811385e-03,
			3.9772854451276627e-03,
			2.6329471431176059e-03,
			-3.4304817834826751e-04,
			-4.1992280006083061e-03,
			-8.0559256539291975e-03,
			-1.1096337143008119e-02,
			-1.2731360484583639e-02,
			-1.2706151017152188e-02,
			-1.1130333116173159e-02,
			-8.4306412604158061e-03,
			-5.2408116952404717e-03,
			-2.2555652814955185e-03,
			-8.1278022656457077e-05,
			8.8539160937569489e-04,
			5.2737308823973467e-04,
			-9.8584385474955491e-04,
			-3.2517317719461085e-03,
			-5.7338544840283339e-03,
			-7.8830675166209115e-03,
			-9.2540312860424894e-03,
			-9.5928420397283845e-03,
			-8.8790713655855676e-03,
			-7.3160653117815720e-03,
			-5.2745989273477829e-03,
			-3.2045099423029331e-03,
			-1.5348385257545655e-03,
			-5.8423897384716496e-04,
			-5.0000439657023278e-04,
			-1.2369414329412311e-03,
			-2.5782559165071638e-03,
			-4.1915922126737068e-03,
			-5.7063144258139575e-03,
			-6.7944115044863947e-03,
			-7.2376487999991001e-03,
			-6.9675036714504724e-03,
			-6.0709747972197223e-03,
			-4.7630034661206057e-03,
			-3.3333020239830237e-03,
			-2.0803813561699586e-03,
			-1.2475579059198585e-03,
			-9.7444743993866712e-04,
			-1.2733736807092175e-03,
			-2.0342643861178543e-03,
			-3.0553263232040791e-03,
			-4.0914494807900480e-03,
			-4.9089772067054177e-03,
			-5.3347847421735478e-03,
			-5.2895315090096687e-03,
			-4.7989298359824538e-03,
			-3.9819340454245395e-03,
			-3.0197519628138176e-03,
			-2.1134488139999473e-03,
			-1.4398884580664711e-03,
			-1.1155270970319006e-03,
			-1.1753198885290160e-03,
			-1.5703255973365086e-03,
			-2.1833724736891359e-03,
			-2.8583194491589325e-03,
			-3.4358093523184151e-03,
			-3.7874595744859440e-03,
			-3.8412720032520008e-03,
			-3.5933784465066554e-03,
			-3.1044754803959073e-03,
			-2.4826907958064920e-03,
			-1.8574229089934173e-03,
			-1.3503416137935148e-03,
			-1.0499463509792775e-03,
			-9.9489997697274797e-04,
			-1.1691295962666325e-03,
			-1.5089616520393724e-03,
			-1.9199554375125441e-03,
			-2.2991713422788910e-03,
			-2.5577291432997522e-03,
			-2.6387982693632807e-03,
			-2.5274762640141194e-03,
			-2.2510004567960896e-03,
			-1.8699254737553005e-03,
			-1.4627990304459074e-03,
			-1.1080893063260097e-03,
			-8.6744203333452400e-04,
			-7.7376662014384866e-04,
			-8.2635727901216656e-04,
			-9.9357826868135316e-04,
			-1.2219729859710637e-03,
			-1.4493561975615118e-03,
			-1.6187724217612007e-03,
			-1.6902522160703449e-03,
			-1.6480075080618820e-03,
			-1.5018735401090826e-03,
			-1.2831404037888989e-03,
			-1.0361182005923146e-03,
			-8.0759555645754327e-04,
			-6.3663386121581508e-04,
			-5.4686940852920413e-04,
			-5.4277523357803897e-04,
			-6.1035700575714949e-04,
			-7.2175694572381886e-04,
			-8.4243680789320959e-04,
			-9.3916478239745296e-04,
			-9.8700968544822277e-04,
			-9.7391805542609714e-04,
			-9.0210075583701556e-04,
			-7.8621869932349417e-04,
			-6.4905509995686088e-04,
			-5.1584657092470653e-04,
			-4.0862956128612563e-04,
			-3.4182841427859273e-04,
			-3.1992389949445831e-04,
			-3.3750551620492721e-04,
			-3.8145932023054988e-04,
			-4.3459912811279558e-04,
			-4.7980096272088148e-04,
			-5.0368485858856907e-04,
			-4.9908565647338837e-04,
			-4.6590026089899489e-04,
			-4.1030106015092717e-04,
			-3.4266813193156422e-04,
			-2.7483905489694477e-04,
			-2.1736124094121881e-04,
			-1.7735491639291114e-04,
			-1.5738968347686275e-04,


			};
		for(j=0;j<3;j++)
			{

			datamid=0.0;
			now_fir=i_fir_list;
			for(int i=0;i<firLength;i++)
				{
				datamid=datamid+now_fir->data[j]*Fir[i];
				now_fir=now_fir->last;
				}

			i_fir_list->band_pass_data[j]=datamid;
			}
		i_fir_list->band_pass_data[4]=pow((double)(i_fir_list->band_pass_data[0]*i_fir_list->band_pass_data[0]+i_fir_list->band_pass_data[1]*i_fir_list->band_pass_data[1]),0.5);

		//if(*trig!=0)
		//	{

		//	if(PGV_type==1)
		//		{
		//		datamid=0.0;
		//		now_fir=i_fir_list;
		//		for(int i=0;i<firLength;i++)
		//			{
		//			datamid=datamid+now_fir->dataV[4]*Fir[i];
		//			now_fir=now_fir->last;
		//			}
		//		i_fir_list->band_pass_dataV[4]=datamid;



		//		datamid=0.0;
		//		now_fir=i_fir_list;
		//		for(int i=0;i<firLength;i++)
		//			{
		//			datamid=datamid+now_fir->dataD[4]*Fir[i];
		//			now_fir=now_fir->last;
		//			}
		//		i_fir_list->band_pass_dataD[4]=datamid;

		//		}
		//	else if(PGV_type==2)
		//		{
		//		for(int j=0;j<3;j++)
		//			{


		//			datamid=0.0;
		//			now_fir=i_fir_list;
		//			for(int i=0;i<firLength;i++)
		//				{
		//				datamid=datamid+now_fir->dataV[j]*Fir[i];
		//				now_fir=now_fir->last;
		//				}
		//			i_fir_list->band_pass_dataV[j]=datamid;

		//			}
		//		i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
		//		for(int j=0;j<3;j++)
		//			{


		//			datamid=0.0;
		//			now_fir=i_fir_list;
		//			for(int i=0;i<firLength;i++)
		//				{
		//				datamid=datamid+now_fir->dataD[j]*Fir[i];
		//				now_fir=now_fir->last;
		//				}
		//			i_fir_list->band_pass_dataD[j]=datamid;
		//			}
		//		i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
		//		}

		//	if(*trig==2)
		//		{
		//		for(jjj=0;jjj<3;jjj++)
		//			{
		//			band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
		//			band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
		//			band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
		//			}
		//		band_pass_data->final_PGA=i_fir_list->band_pass_data[j];
		//		band_pass_data->final_PGV=i_fir_list->band_pass_dataV[j];
		//		band_pass_data->final_PGD=i_fir_list->band_pass_dataD[j];
		//		*trig=3;
		//		*count+=1;
		//		}
		//	else
		//		{


		//		for(jjj=0;jjj<3;jjj++)
		//			{
		//			if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
		//				band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
		//			if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGV_component[jjj])
		//				band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
		//			if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGD_component[jjj])
		//				band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
		//			}

		//		if(i_fir_list->band_pass_data[4]>band_pass_data->final_PGA)
		//			{
		//			band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
		//			band_pass_data->utc_second_final_PGA=i_fir_list->utc_second; //utc时间秒
		//			band_pass_data->utc_nanosecond_final_PGA=i_fir_list->utc_nanosecond; //utc时间纳秒

		//			}
		//		if(i_fir_list->band_pass_dataV[4]>band_pass_data->final_PGV)
		//			{
		//			band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
		//			band_pass_data->utc_second_final_PGV=i_fir_list->utc_second; //utc时间秒
		//			band_pass_data->utc_nanosecond_final_PGV=i_fir_list->utc_nanosecond; //utc时间纳秒
		//			}
		//		if(i_fir_list->band_pass_dataD[4]>band_pass_data->final_PGD)
		//			{
		//			band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
		//			band_pass_data->utc_second_final_PGD=i_fir_list->utc_second; //utc时间秒
		//			band_pass_data->utc_nanosecond_final_PGD=i_fir_list->utc_nanosecond; //utc时间纳秒
		//			}
		//		if(*count==timespan*200)

		//			{
		//			*count=1;
		//			return 2;
		//			}
		//		else
		//			{


		//			*count+=1;
		//			}



		//		}
		//	}


		return 1;
		}

	//double *Fir=new double[firLength];

	return 0;

	};











int PGA_V_G(FIR_LIST *i_fir_list,BAND_PASS_RESULT *band_pass_data,int *count,int timespan,int *trig,int PGV_type)
	{
		//alg_locat();
		//printf("PGV_type=%d\n",PGV_type);
	int firLength,j,jjj;
	double datamid;
	FIR_LIST *now_fir;
	if (i_fir_list->sample_rata==50)
		{
		firLength=81;
		double Fir[81]={-4.7987787339820936e-04,
			-8.9057350076593368e-04,
			-7.2903341056485352e-04,
			-9.3968046651590189e-04,
			-2.0015152670250906e-03,
			-1.8457782153191327e-03,
			-1.4331943313841396e-03,
			-3.2987790655067970e-03,
			-3.9188767708761094e-03,
			-2.2358326021832526e-03,
			-4.2761095213556272e-03,
			-6.9685597648698229e-03,
			-4.0562398557881119e-03,
			-4.5086713435378723e-03,
			-1.0324010165847381e-02,
			-7.7980789590883538e-03,
			-4.2123548102063557e-03,
			-1.2580685653923828e-02,
			-1.3896183105007932e-02,
			-4.6707793854684938e-03,
			-1.2139776287417038e-02,
			-2.1492365469531257e-02,
			-8.0968892823001046e-03,
			-8.2631555848332473e-03,
			-2.7966602054323594e-02,
			-1.6735759731169867e-02,
			-2.1834926757662077e-03,
			-2.9254096192636532e-02,
			-3.1499163705017090e-02,
			2.3107659525776346e-03,
			-2.0832464828927390e-02,
			-5.0853889965031082e-02,
			-1.1624388651572256e-03,
			1.8841462457617236e-03,
			-7.0730297852423088e-02,
			-2.3669862992490260e-02,
			4.9655253129437991e-02,
			-8.5754335252881606e-02,
			-1.1745446174509039e-01,
			2.7761355362248835e-01,
			5.7538029520670841e-01,
			2.7761355362248769e-01,
			-1.1745446174508975e-01,
			-8.5754335252880912e-02,
			4.9655253129437457e-02,
			-2.3669862992489934e-02,
			-7.0730297852421936e-02,
			1.8841462457616889e-03,
			-1.1624388651572048e-03,
			-5.0853889965029819e-02,
			-2.0832464828926815e-02,
			2.3107659525775617e-03,
			-3.1499163705016028e-02,
			-2.9254096192635470e-02,
			-2.1834926757661245e-03,
			-1.6735759731169159e-02,
			-2.7966602054322321e-02,
			-8.2631555848328413e-03,
			-8.0968892822996814e-03,
			-2.1492365469530057e-02,
			-1.2139776287416327e-02,
			-4.6707793854682024e-03,
			-1.3896183105007011e-02,
			-1.2580685653922945e-02,
			-4.2123548102060435e-03,
			-7.7980789590877501e-03,
			-1.0324010165846531e-02,
			-4.5086713435374846e-03,
			-4.0562398557877433e-03,
			-6.9685597648691568e-03,
			-4.2761095213552005e-03,
			-2.2358326021830158e-03,
			-3.9188767708756775e-03,
			-3.2987790655064630e-03,
			-1.4331943313839600e-03,
			-1.8457782153188935e-03,
			-2.0015152670248100e-03,
			-9.3968046651576485e-04,
			-7.2903341056474108e-04,
			-8.9057350076577387e-04,
			-4.7987787339812745e-04,
			};
		if(*trig!=0)
			{
			if(PGV_type==1)
				{
				datamid=0.0;
				now_fir=i_fir_list;
				int i;
				for(i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataV[4]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataV[4]=datamid;



				datamid=0.0;
				now_fir=i_fir_list;
				for(i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataD[4]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataD[4]=datamid;

				}
			else if(PGV_type==2)
				{
				for(j=0;j<3;j++)
					{


					datamid=0.0;
					now_fir=i_fir_list;
					int i;
					for(i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataV[j]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataV[j]=datamid;

					}
				i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
				for(j=0;j<3;j++)
					{


					datamid=0.0;
					now_fir=i_fir_list;
					int i;
					for(i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataD[j]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataD[j]=datamid;
					}
				i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
				}




			if(*trig==1)
				{
				for(jjj=0;jjj<3;jjj++)
					{
					band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}
				band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
				band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
				band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
				*count+=1;
				*trig=2;
				}
			else
				{
				for(jjj=0;jjj<3;jjj++)
					{
					if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
						band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					if(abs(i_fir_list->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
						band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					if(abs(i_fir_list->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
						band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}




				if(i_fir_list->band_pass_data[4]>band_pass_data->final_PGA)
					{
					band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
					band_pass_data->utc_second_final_PGA=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGA=i_fir_list->utc_nanosecond; //utc时间纳秒

					}
				//else
				//	{
				//	band_pass_data->final_PGA=i_fir_list->last->final_PGA;
				//	band_pass_data->utc_second_final_PGA=i_fir_list->last->utc_second; //utc时间秒
				//	band_pass_data->utc_nanosecond_final_PGA=i_fir_list->last->utc_nanosecond; //utc时间纳秒
				//	}
				if(i_fir_list->band_pass_dataV[4]>band_pass_data->final_PGV)
					{
					band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
					band_pass_data->utc_second_final_PGV=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGV=i_fir_list->utc_nanosecond; //utc时间纳秒
					}
				//else
				//	{
				//	band_pass_data->final_PGV=i_fir_list->last->final_PGV;
				//	band_pass_data->utc_second_final_PGV=i_fir_list->last->utc_second; //utc时间秒
				//	band_pass_data->utc_nanosecond_final_PGV=i_fir_list->last->utc_nanosecond; //utc时间纳秒
				//	}
				if(i_fir_list->band_pass_dataD[4]>band_pass_data->final_PGD)
					{
					band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
					band_pass_data->utc_second_final_PGD=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGD=i_fir_list->utc_nanosecond; //utc时间纳秒
					}
				//else
				//	{
				//	band_pass_data->final_PGD=i_fir_list->last->final_PGD;
				//	band_pass_data->utc_second_final_PGD=i_fir_list->last->utc_second; //utc时间秒
				//	band_pass_data->utc_nanosecond_final_PGD=i_fir_list->last->utc_nanosecond; //utc时间纳秒
				//	}
				if(*count==timespan*50)

					{
					*count=1;
					return 2;
					}
				else
					{


					*count+=1;
					}



				}
			}
			return 1;
		}
	else if(i_fir_list->sample_rata==100)
		{
			//alg_locat();
		firLength=191;
		double Fir[191]={-1.0096108503799409e-03,
			-1.3950482601184145e-03,
			-2.2527488512072823e-03,
			-2.9478325266950626e-03,
			-2.9241282941009309e-03,
			-2.1964877583498382e-03,
			-1.3932186866449717e-03,
			-1.2683702309322061e-03,
			-2.0587294816955936e-03,
			-3.2307108495224480e-03,
			-3.8728518839418980e-03,
			-3.4512139742405856e-03,
			-2.3045215990983815e-03,
			-1.4270997345429326e-03,
			-1.6661388536950924e-03,
			-2.9780040916341042e-03,
			-4.3915096269727697e-03,
			-4.7685469089617048e-03,
			-3.7708238360917514e-03,
			-2.2154696854772564e-03,
			-1.4639880273141859e-03,
			-2.2943598211664952e-03,
			-4.1868456476722750e-03,
			-5.6701595913976281e-03,
			-5.5118721440431517e-03,
			-3.7942060764075075e-03,
			-1.9423711063670419e-03,
			-1.6026343679009464e-03,
			-3.2475373165740244e-03,
			-5.6846723133800129e-03,
			-6.9564131921419870e-03,
			-5.9605784961465312e-03,
			-3.4555395583318526e-03,
			-1.5446848893690436e-03,
			-1.9729728155626920e-03,
			-4.6090756549750133e-03,
			-7.4249335517157806e-03,
			-8.0957173947760943e-03,
			-5.9658402480322953e-03,
			-2.7259882160986819e-03,
			-1.1326443571281007e-03,
			-2.7279163951726233e-03,
			-6.4379538633729206e-03,
			-9.3078652451388747e-03,
			-8.8937043531173623e-03,
			-5.3843686320969916e-03,
			-1.6236386602042371e-03,
			-8.6795329695463013e-04,
			-4.0358532878403434e-03,
			-8.7602540790057502e-03,
			-1.1177665546498936e-02,
			-9.1197841612625230e-03,
			-4.0841129832286773e-03,
			-2.1710181588843413e-04,
			-9.6506787169073674e-04,
			-6.0820299780298100e-03,
			-1.1571060989487639e-02,
			-1.2821283663388564e-02,
			-8.4992305065876590e-03,
			-1.9327687604891049e-03,
			1.3784923032710335e-03,
			-1.7050246429269466e-03,
			-9.0969663617697753e-03,
			-1.4856515017832844e-02,
			-1.3958829431456619e-02,
			-6.6666698386317613e-03,
			1.2562792472859616e-03,
			3.0131140370235859e-03,
			-3.4963797956000272e-03,
			-1.3462418900154581e-02,
			-1.8662168940531118e-02,
			-1.4193048970612182e-02,
			-2.9949266075571710e-03,
			5.9029683387124953e-03,
			4.5197236235567867e-03,
			-7.1079148261703534e-03,
			-2.0084767678293092e-02,
			-2.3311188040322776e-02,
			-1.2784038623879721e-02,
			4.0762178712041601e-03,
			1.3346915816899603e-02,
			5.7359043739684543e-03,
			-1.4720837908786619e-02,
			-3.2099574332974203e-02,
			-3.0404413640455791e-02,
			-7.3824560015768315e-03,
			2.0903522723558492e-02,
			3.0096061155356627e-02,
			6.5259347250955285e-03,
			-3.8462292200619481e-02,
			-7.0869487224785352e-02,
			-5.4107874682352952e-02,
			2.5259979404526650e-02,
			1.4370865641013861e-01,
			2.4982563870147181e-01,
			2.9230819959096299e-01,
			2.4982563870147181e-01,
			1.4370865641013864e-01,
			2.5259979404526654e-02,
			-5.4107874682352966e-02,
			-7.0869487224785366e-02,
			-3.8462292200619495e-02,
			6.5259347250955302e-03,
			3.0096061155356641e-02,
			2.0903522723558506e-02,
			-7.3824560015768349e-03,
			-3.0404413640455815e-02,
			-3.2099574332974223e-02,
			-1.4720837908786630e-02,
			5.7359043739684604e-03,
			1.3346915816899613e-02,
			4.0762178712041627e-03,
			-1.2784038623879739e-02,
			-2.3311188040322804e-02,
			-2.0084767678293116e-02,
			-7.1079148261703612e-03,
			4.5197236235567911e-03,
			5.9029683387125048e-03,
			-2.9949266075571736e-03,
			-1.4193048970612207e-02,
			-1.8662168940531153e-02,
			-1.3462418900154604e-02,
			-3.4963797956000320e-03,
			3.0131140370235911e-03,
			1.2562792472859642e-03,
			-6.6666698386317743e-03,
			-1.3958829431456649e-02,
			-1.4856515017832875e-02,
			-9.0969663617697927e-03,
			-1.7050246429269492e-03,
			1.3784923032710370e-03,
			-1.9327687604891093e-03,
			-8.4992305065876780e-03,
			-1.2821283663388595e-02,
			-1.1571060989487670e-02,
			-6.0820299780298256e-03,
			-9.6506787169073935e-04,
			-2.1710181588843587e-04,
			-4.0841129832286877e-03,
			-9.1197841612625508e-03,
			-1.1177665546498967e-02,
			-8.7602540790057779e-03,
			-4.0358532878403556e-03,
			-8.6795329695463187e-04,
			-1.6236386602042424e-03,
			-5.3843686320970089e-03,
			-8.8937043531173883e-03,
			-9.3078652451389042e-03,
			-6.4379538633729406e-03,
			-2.7279163951726333e-03,
			-1.1326443571281050e-03,
			-2.7259882160986914e-03,
			-5.9658402480323187e-03,
			-8.0957173947761238e-03,
			-7.4249335517158083e-03,
			-4.6090756549750297e-03,
			-1.9729728155626998e-03,
			-1.5446848893690497e-03,
			-3.4555395583318661e-03,
			-5.9605784961465555e-03,
			-6.9564131921420139e-03,
			-5.6846723133800337e-03,
			-3.2475373165740378e-03,
			-1.6026343679009538e-03,
			-1.9423711063670500e-03,
			-3.7942060764075232e-03,
			-5.5118721440431751e-03,
			-5.6701595913976532e-03,
			-4.1868456476722923e-03,
			-2.2943598211665065e-03,
			-1.4639880273141920e-03,
			-2.2154696854772668e-03,
			-3.7708238360917696e-03,
			-4.7685469089617273e-03,
			-4.3915096269727888e-03,
			-2.9780040916341185e-03,
			-1.6661388536951005e-03,
			-1.4270997345429397e-03,
			-2.3045215990983915e-03,
			-3.4512139742406017e-03,
			-3.8728518839419141e-03,
			-3.2307108495224631e-03,
			-2.0587294816956044e-03,
			-1.2683702309322122e-03,
			-1.3932186866449782e-03,
			-2.1964877583498486e-03,
			-2.9241282941009409e-03,
			-2.9478325266950032e-03,
			-2.2527488512072988e-03,
			-1.3950482601184288e-03,
			-1.0096108503799466e-03,



			};
		if(*trig!=0)
			{


			if(PGV_type==1)
				{
				datamid=0.0;
				now_fir=i_fir_list;
				int i;
				for(i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataV[4]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataV[4]=datamid;



				datamid=0.0;
				now_fir=i_fir_list;
				for(i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataD[4]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataD[4]=datamid;

				}
			else if(PGV_type==2)
				{
					int i;
				for(j=0;j<3;j++)
					{


					datamid=0.0;
					now_fir=i_fir_list;
					int i;
					for(i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataV[j]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataV[j]=datamid;

					}
				i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
				for(j=0;j<3;j++)
					{


					datamid=0.0;
					now_fir=i_fir_list;
					for(i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataD[j]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataD[j]=datamid;
					}
				i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);
				}

			if(*trig==1)
				{
				for(jjj=0;jjj<3;jjj++)
					{
					band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}
				band_pass_data->final_PGA=i_fir_list->band_pass_data[j];
				band_pass_data->final_PGV=i_fir_list->band_pass_dataV[j];
				band_pass_data->final_PGD=i_fir_list->band_pass_dataD[j];
				*trig=2;
				*count+=1;
				}
			else
				{
				for(jjj=0;jjj<3;jjj++)
					{
					if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
						band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					if(abs(i_fir_list->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
						band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					if(abs(i_fir_list->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
						band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}

				if(i_fir_list->band_pass_data[4]>band_pass_data->final_PGA)
					{
					band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
					band_pass_data->utc_second_final_PGA=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGA=i_fir_list->utc_nanosecond; //utc时间纳秒

					}
				if(i_fir_list->band_pass_dataV[4]>band_pass_data->final_PGV)
					{
					band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
					band_pass_data->utc_second_final_PGV=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGV=i_fir_list->utc_nanosecond; //utc时间纳秒
					}
				if(i_fir_list->band_pass_dataD[4]>band_pass_data->final_PGD)
					{
					band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
					band_pass_data->utc_second_final_PGD=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGD=i_fir_list->utc_nanosecond; //utc时间纳秒
					}
				if(*count==timespan*100)

					{
					*count=1;
					return 2;
					}
				else
					{


					*count+=1;
					}



				}
			}
			return 1;
		}
	else if(i_fir_list->sample_rata==200)
		{
			//alg_locat();
		firLength=301;
		//if(dataNum<301)
		//	{
		//	return -1;
		//	}
		double Fir[301]={-1.5738968347689628e-04,
			-1.7735491639294824e-04,
			-2.1736124094126334e-04,
			-2.7483905489700012e-04,
			-3.4266813193163193e-04,
			-4.1030106015100642e-04,
			-4.6590026089908369e-04,
			-4.9908565647348161e-04,
			-5.0368485858866155e-04,
			-4.7980096272096865e-04,
			-4.3459912811287315e-04,
			-3.8145932023061683e-04,
			-3.3750551620498548e-04,
			-3.1992389949451273e-04,
			-3.4182841427864982e-04,
			-4.0862956128619334e-04,
			-5.1584657092479044e-04,
			-6.4905509995696496e-04,
			-7.8621869932361810e-04,
			-9.0210075583715586e-04,
			-9.7391805542624665e-04,
			-9.8700968544837217e-04,
			-9.3916478239759282e-04,
			-8.4243680789333406e-04,
			-7.2175694572392348e-04,
			-6.1035700575723644e-04,
			-5.4277523357811595e-04,
			-5.4686940852928067e-04,
			-6.3663386121590247e-04,
			-8.0759555645765300e-04,
			-1.0361182005924534e-03,
			-1.2831404037890676e-03,
			-1.5018735401092786e-03,
			-1.6480075080620943e-03,
			-1.6902522160705587e-03,
			-1.6187724217614032e-03,
			-1.4493561975616916e-03,
			-1.2219729859712122e-03,
			-9.9357826868147307e-04,
			-8.2635727901226479e-04,
			-7.7376662014393995e-04,
			-8.6744203333462462e-04,
			-1.1080893063261379e-03,
			-1.4627990304460733e-03,
			-1.8699254737555102e-03,
			-2.2510004567963386e-03,
			-2.5274762640143944e-03,
			-2.6387982693635644e-03,
			-2.5577291433000224e-03,
			-2.2991713422791313e-03,
			-1.9199554375127431e-03,
			-1.5089616520395268e-03,
			-1.1691295962667500e-03,
			-9.9489997697284663e-04,
			-1.0499463509793807e-03,
			-1.3503416137936456e-03,
			-1.8574229089935940e-03,
			-2.4826907958067261e-03,
			-3.1044754803961948e-03,
			-3.5933784465069858e-03,
			-3.8412720032523487e-03,
			-3.7874595744862814e-03,
			-3.4358093523187173e-03,
			-2.8583194491591827e-03,
			-2.1833724736893233e-03,
			-1.5703255973366405e-03,
			-1.1753198885291142e-03,
			-1.1155270970319925e-03,
			-1.4398884580665875e-03,
			-2.1134488140001156e-03,
			-3.0197519628140561e-03,
			-3.9819340454248483e-03,
			-4.7989298359828224e-03,
			-5.2895315090100694e-03,
			-5.3347847421739408e-03,
			-4.9089772067057768e-03,
			-4.0914494807903403e-03,
			-3.0553263232042977e-03,
			-2.0342643861179957e-03,
			-1.2733736807093051e-03,
			-9.7444743993873348e-04,
			-1.2475579059199422e-03,
			-2.0803813561700931e-03,
			-3.3333020239832397e-03,
			-4.7630034661209093e-03,
			-6.0709747972200970e-03,
			-6.9675036714509026e-03,
			-7.2376487999995407e-03,
			-6.7944115044867989e-03,
			-5.7063144258142880e-03,
			-4.1915922126739454e-03,
			-2.5782559165073099e-03,
			-1.2369414329412996e-03,
			-5.0000439657026010e-04,
			-5.8423897384719532e-04,
			-1.5348385257546453e-03,
			-3.2045099423030948e-03,
			-5.2745989273480509e-03,
			-7.3160653117819293e-03,
			-8.8790713655859960e-03,
			-9.5928420397288355e-03,
			-9.2540312860429144e-03,
			-7.8830675166212654e-03,
			-5.7338544840285889e-03,
			-3.2517317719462481e-03,
			-9.8584385474959567e-04,
			5.2737308823975636e-04,
			8.8539160937573045e-04,
			-8.1278022656460546e-05,
			-2.2555652814956074e-03,
			-5.2408116952406677e-03,
			-8.4306412604161132e-03,
			-1.1130333116173553e-02,
			-1.2706151017152620e-02,
			-1.2731360484584070e-02,
			-1.1096337143008480e-02,
			-8.0559256539294525e-03,
			-4.1992280006084327e-03,
			-3.4304817834827792e-04,
			2.6329471431176831e-03,
			3.9772854451277720e-03,
			3.2439302636812226e-03,
			4.1585700052789186e-04,
			-4.0560792879092526e-03,
			-9.3139281317865166e-03,
			-1.4247613714347402e-02,
			-1.7717974336771903e-02,
			-1.8805230945223246e-02,
			-1.7031601742540699e-02,
			-1.2508339273051561e-02,
			-5.9695509104043653e-03,
			1.3240748146035209e-03,
			7.8028250387371500e-03,
			1.1892350786033203e-02,
			1.2350080720461974e-02,
			8.5682310423650879e-03,
			7.7979549076405419e-04,
			-9.8815104670206631e-03,
			-2.1491211233783846e-02,
			-3.1606466363625955e-02,
			-3.7661758554831441e-02,
			-3.7422874756706775e-02,
			-2.9419394015175061e-02,
			-1.3275490993334308e-02,
			1.0126511572124210e-02,
			3.8687978116648487e-02,
			6.9343825778920370e-02,
			9.8485912360757433e-02,
			1.2249350941875659e-01,
			1.3828375204993210e-01,
			1.4378957268385817e-01,
			1.3828375204993198e-01,
			1.2249350941875640e-01,
			9.8485912360757155e-02,
			6.9343825778920107e-02,
			3.8687978116648321e-02,
			1.0126511572124158e-02,
			-1.3275490993334225e-02,
			-2.9419394015174839e-02,
			-3.7422874756706463e-02,
			-3.7661758554831101e-02,
			-3.1606466363625629e-02,
			-2.1491211233783607e-02,
			-9.8815104670205468e-03,
			7.7979549076404465e-04,
			8.5682310423649734e-03,
			1.2350080720461792e-02,
			1.1892350786033016e-02,
			7.8028250387370190e-03,
			1.3240748146034983e-03,
			-5.9695509104042534e-03,
			-1.2508339273051316e-02,
			-1.7031601742540346e-02,
			-1.8805230945222844e-02,
			-1.7717974336771518e-02,
			-1.4247613714347076e-02,
			-9.3139281317862910e-03,
			-4.0560792879091503e-03,
			4.1585700052788145e-04,
			3.2439302636811385e-03,
			3.9772854451276627e-03,
			2.6329471431176059e-03,
			-3.4304817834826751e-04,
			-4.1992280006083061e-03,
			-8.0559256539291975e-03,
			-1.1096337143008119e-02,
			-1.2731360484583639e-02,
			-1.2706151017152188e-02,
			-1.1130333116173159e-02,
			-8.4306412604158061e-03,
			-5.2408116952404717e-03,
			-2.2555652814955185e-03,
			-8.1278022656457077e-05,
			8.8539160937569489e-04,
			5.2737308823973467e-04,
			-9.8584385474955491e-04,
			-3.2517317719461085e-03,
			-5.7338544840283339e-03,
			-7.8830675166209115e-03,
			-9.2540312860424894e-03,
			-9.5928420397283845e-03,
			-8.8790713655855676e-03,
			-7.3160653117815720e-03,
			-5.2745989273477829e-03,
			-3.2045099423029331e-03,
			-1.5348385257545655e-03,
			-5.8423897384716496e-04,
			-5.0000439657023278e-04,
			-1.2369414329412311e-03,
			-2.5782559165071638e-03,
			-4.1915922126737068e-03,
			-5.7063144258139575e-03,
			-6.7944115044863947e-03,
			-7.2376487999991001e-03,
			-6.9675036714504724e-03,
			-6.0709747972197223e-03,
			-4.7630034661206057e-03,
			-3.3333020239830237e-03,
			-2.0803813561699586e-03,
			-1.2475579059198585e-03,
			-9.7444743993866712e-04,
			-1.2733736807092175e-03,
			-2.0342643861178543e-03,
			-3.0553263232040791e-03,
			-4.0914494807900480e-03,
			-4.9089772067054177e-03,
			-5.3347847421735478e-03,
			-5.2895315090096687e-03,
			-4.7989298359824538e-03,
			-3.9819340454245395e-03,
			-3.0197519628138176e-03,
			-2.1134488139999473e-03,
			-1.4398884580664711e-03,
			-1.1155270970319006e-03,
			-1.1753198885290160e-03,
			-1.5703255973365086e-03,
			-2.1833724736891359e-03,
			-2.8583194491589325e-03,
			-3.4358093523184151e-03,
			-3.7874595744859440e-03,
			-3.8412720032520008e-03,
			-3.5933784465066554e-03,
			-3.1044754803959073e-03,
			-2.4826907958064920e-03,
			-1.8574229089934173e-03,
			-1.3503416137935148e-03,
			-1.0499463509792775e-03,
			-9.9489997697274797e-04,
			-1.1691295962666325e-03,
			-1.5089616520393724e-03,
			-1.9199554375125441e-03,
			-2.2991713422788910e-03,
			-2.5577291432997522e-03,
			-2.6387982693632807e-03,
			-2.5274762640141194e-03,
			-2.2510004567960896e-03,
			-1.8699254737553005e-03,
			-1.4627990304459074e-03,
			-1.1080893063260097e-03,
			-8.6744203333452400e-04,
			-7.7376662014384866e-04,
			-8.2635727901216656e-04,
			-9.9357826868135316e-04,
			-1.2219729859710637e-03,
			-1.4493561975615118e-03,
			-1.6187724217612007e-03,
			-1.6902522160703449e-03,
			-1.6480075080618820e-03,
			-1.5018735401090826e-03,
			-1.2831404037888989e-03,
			-1.0361182005923146e-03,
			-8.0759555645754327e-04,
			-6.3663386121581508e-04,
			-5.4686940852920413e-04,
			-5.4277523357803897e-04,
			-6.1035700575714949e-04,
			-7.2175694572381886e-04,
			-8.4243680789320959e-04,
			-9.3916478239745296e-04,
			-9.8700968544822277e-04,
			-9.7391805542609714e-04,
			-9.0210075583701556e-04,
			-7.8621869932349417e-04,
			-6.4905509995686088e-04,
			-5.1584657092470653e-04,
			-4.0862956128612563e-04,
			-3.4182841427859273e-04,
			-3.1992389949445831e-04,
			-3.3750551620492721e-04,
			-3.8145932023054988e-04,
			-4.3459912811279558e-04,
			-4.7980096272088148e-04,
			-5.0368485858856907e-04,
			-4.9908565647338837e-04,
			-4.6590026089899489e-04,
			-4.1030106015092717e-04,
			-3.4266813193156422e-04,
			-2.7483905489694477e-04,
			-2.1736124094121881e-04,
			-1.7735491639291114e-04,
			-1.5738968347686275e-04,


			};
		if(*trig!=0)
			{
			//alg_locat();
			if(PGV_type==1)
				{
					//alg_locat();
				datamid=0.0;
				now_fir=i_fir_list;
				int i;
				for(i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataV[4]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataV[4]=datamid;



				datamid=0.0;
				now_fir=i_fir_list;
				for(i=0;i<firLength;i++)
					{
					datamid=datamid+now_fir->dataD[4]*Fir[i];
					now_fir=now_fir->last;
					}
				i_fir_list->band_pass_dataD[4]=datamid;

				}
			else if(PGV_type==2)
				{
					//alg_locat();
				for(j=0;j<3;j++)
					{


					datamid=0.0;
					now_fir=i_fir_list;
					int i;
					for(i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataV[j]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataV[j]=datamid;

					}
				i_fir_list->band_pass_dataV[4]=pow((double)(i_fir_list->band_pass_dataV[0]*i_fir_list->band_pass_dataV[0]+i_fir_list->band_pass_dataV[1]*i_fir_list->band_pass_dataV[1]),0.5);
				for(j=0;j<3;j++)
					{


					datamid=0.0;
					now_fir=i_fir_list;
					int i;
					for(i=0;i<firLength;i++)
						{
						datamid=datamid+now_fir->dataD[j]*Fir[i];
						now_fir=now_fir->last;
						}
					i_fir_list->band_pass_dataD[j]=datamid;
					}
				i_fir_list->band_pass_dataD[4]=pow((double)(i_fir_list->band_pass_dataD[0]*i_fir_list->band_pass_dataD[0]+i_fir_list->band_pass_dataD[1]*i_fir_list->band_pass_dataD[1]),0.5);


				//printf(RED"i_fir_list->band_pass_dataD[2]=    %f\n"NONE,i_fir_list->band_pass_dataD[2]);



				}

			if(*trig==1)
				{
				for(jjj=0;jjj<3;jjj++)
					{
					band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}
				band_pass_data->final_PGA=i_fir_list->band_pass_data[j];
				band_pass_data->final_PGV=i_fir_list->band_pass_dataV[j];
				band_pass_data->final_PGD=i_fir_list->band_pass_dataD[j];
				*trig=2;
				*count+=1;
				}
			else
				{


				for(jjj=0;jjj<3;jjj++)
					{
					if(abs(i_fir_list->band_pass_data[jjj])>band_pass_data->final_PGA_component[jjj])
						band_pass_data->final_PGA_component[jjj]=abs(i_fir_list->band_pass_data[jjj]);
					if(abs(i_fir_list->band_pass_dataV[jjj])>band_pass_data->final_PGV_component[jjj])
						band_pass_data->final_PGV_component[jjj]=abs(i_fir_list->band_pass_dataV[jjj]);
					if(abs(i_fir_list->band_pass_dataD[jjj])>band_pass_data->final_PGD_component[jjj])
						band_pass_data->final_PGD_component[jjj]=abs(i_fir_list->band_pass_dataD[jjj]);
					}

				if(i_fir_list->band_pass_data[4]>band_pass_data->final_PGA)
					{
					band_pass_data->final_PGA=i_fir_list->band_pass_data[4];
					band_pass_data->utc_second_final_PGA=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGA=i_fir_list->utc_nanosecond; //utc时间纳秒

					}
				if(i_fir_list->band_pass_dataV[4]>band_pass_data->final_PGV)
					{
					band_pass_data->final_PGV=i_fir_list->band_pass_dataV[4];
					band_pass_data->utc_second_final_PGV=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGV=i_fir_list->utc_nanosecond; //utc时间纳秒
					}
				if(i_fir_list->band_pass_dataD[4]>band_pass_data->final_PGD)
					{
					band_pass_data->final_PGD=i_fir_list->band_pass_dataD[4];
					band_pass_data->utc_second_final_PGD=i_fir_list->utc_second; //utc时间秒
					band_pass_data->utc_nanosecond_final_PGD=i_fir_list->utc_nanosecond; //utc时间纳秒
					}
				if(*count==timespan*200)

					{
					*count=1;
					return 2;
					}
				else
					{


					*count+=1;
					}



				}
			}
			return 1;
		}




	}







void test_main()
	{
	int j,i;
	int final_liedu_pga;
	int final_liedu_pgv;
	int PGV_type=2;
	BAND_PASS_RESULT band_pass_data;
	float multiple_PGA=3.73;
	float increment_PGA=-1.23;
	float multiple_PGV=3.61;
	float increment_PGV=2.72;
	int trig=1;
	int countt;
	float data[2000];
	float dataV[2000];
	float dataD[2000];
	double dataOut;
	double pi=3.14159265358979323;
	//memset(&band_pass_data,0,18);

	for(i=0;i<3;i++)
		{
		band_pass_data.final_PGA_component[i]=0;
		band_pass_data.final_PGV_component[i]=0;
		band_pass_data.final_PGD_component[i]=0;
		}
	band_pass_data.final_PGA=0;
	band_pass_data.final_PGV=0;
	band_pass_data.final_PGD=0;


	countt=1;
	int sample_rate=50; //  改变采样率

	for(i=0;i<800;i++)
		{
		//data[i]=/*pow(-1.0,double(i))**/i;
		data[i]=10*sinf(2*pi/50*i);
		}

	for(i=800;i<2000;i++)
		{
		//data[i]=/*pow(-1.0,double(i))**/i;
		data[i]=100*sinf(2*pi/50*i);
		}
	FIR_LIST ssdata[1000];





	for(i=0;i<1500;i++)
		{
		if(i==0)
			dataV[i]=data[i+0]/sample_rate;
		else
			dataV[i]=dataV[i-1]+(data[i+40]+data[i+40-1])/sample_rate/2;
		}

	for(i=0;i<1000;i++)
		{
		if(i==0)
			dataD[i]=dataV[i]/sample_rate/2;
		else
			dataD[i]=(dataV[i]+dataV[i-1])/sample_rate/2;
		}

	for(j=0;j<4;j++)
		{
		ssdata[0].dataV[j]=dataV[0];
		ssdata[0].next=&ssdata[1];
		ssdata[0].sample_rata=sample_rate;

		for(int i=1;i<999;i++)
			{
			ssdata[i].dataV[j]=dataV[i];
			ssdata[i].last=&ssdata[i-1];
			ssdata[i].next=&ssdata[i+1];
			ssdata[i].sample_rata=sample_rate;
			}

		ssdata[999].dataV[j]=dataV[999];
		ssdata[999].last=&ssdata[998];
		ssdata[999].sample_rata=sample_rate;

		}

	for(j=0;j<5;j++)
		{

		ssdata[0].data[j]=data[0];
		ssdata[0].next=&ssdata[1];
		ssdata[0].sample_rata=sample_rate;

		for(i=1;i<999;i++)
			{
			ssdata[i].data[j]=data[i];
			ssdata[i].last=&ssdata[i-1];
			ssdata[i].next=&ssdata[i+1];
			ssdata[i].sample_rata=sample_rate;
			}

		ssdata[999].data[j]=data[999];
		ssdata[999].last=&ssdata[998];
		ssdata[999].sample_rata=sample_rate;
		}
	if(sample_rate==50)
		{


		for(int i=200;i<900;i++)
			{

			//band_passstruct(&ssdata[i],PGV_type,&countt,1,&trig,&band_pass_data);
						band_passstruct_new(&ssdata[i]);
			if(PGA_V_G(&ssdata[i],&band_pass_data,&countt,1,&trig,PGV_type)==2)
				//cout<<dataOut<<"    "<<data[80]<<endl;
				{

				final_liedu_pga=	(int)(ipga(band_pass_data.final_PGA,multiple_PGA,increment_PGA)+0.5);
				final_liedu_pgv=   (int)(ipgv(band_pass_data.final_PGV,multiple_PGV,increment_PGV)+0.5);

				printf("%12.8f  %12.8f  %12.8f  %12.8f %12.8f %12.8f \n\n\n",ssdata[i].data[0],ssdata[i].band_pass_dataV[0],band_pass_data.final_PGA_component[0],band_pass_data.final_PGV,band_pass_data.final_PGA,data[i-0] );
				printf("final_liedu_pga= %d          final_liedu_pgv=%d      \n\n\n\n\n",final_liedu_pga,final_liedu_pgv);

				}

			else
				{
				printf("%12.8f  %12.8f %12.8f %12.8f %12.8f  %12.8f  \n",ssdata[i].data[0],ssdata[i].band_pass_dataV[0],band_pass_data.final_PGA_component[0],band_pass_data.final_PGV,band_pass_data.final_PGA,data[i-0] );
				}
			}
		}

	if(sample_rate==100)
		{


		for(i=200;i<400;i++)
			{
						band_passstruct_new(&ssdata[i]);
			//band_passstruct(&ssdata[i],PGV_type,&countt,1,&trig,&band_pass_data);
			//cout<<dataOut<<"    "<<data[80]<<endl;
			printf("%16.8f  %16.8f %16.8f %16.8f \n",ssdata[i].band_pass_data[0],ssdata[i].band_pass_data[1],ssdata[i].band_pass_data[2],data[i-95] );
			}
		}

	if(sample_rate==200)
		{


		for(i=400;i<600;i++)
			{

			//band_passstruct(&ssdata[i],PGV_type,&countt,1,&trig,&band_pass_data);
						band_passstruct_new(&ssdata[i]);
			//cout<<dataOut<<"    "<<data[80]<<endl;
			printf("%16.8f  %16.8f %16.8f %16.8f \n",ssdata[i].band_pass_data[0],ssdata[i].band_pass_data[1],ssdata[i].band_pass_data[2],data[i-150] );
			}
		}





	//band_pass(data,191,200,dataOut);
	////cout<<dataOut<<"    "<<data[60]<<endl;
	//printf("%d   %d \n",dataOut,data[190-95] );
	//band_pass(data,301,400,dataOut);
	////cout<<dataOut<<"    "<<data[40]<<endl;
	//printf("%d   %d \n",dataOut,data[300-150] );
	//cout<<"press enter kye to continue......"<<endl;
	//cin.get();
	//getchar();
	}






























int first_direction(FIR_LIST *i_fir_list,float threshold,int fir_length)
	{

	//**i_fir_list 触发时的数据结构体指针
	//**threshold  判定阈值 现在都给2
	//**fir_length 所使用的带通滤波器长度
	FIR_LIST *now_list=i_fir_list;
	FIR_LIST *first_fir;
	int i,j,k;
	int i_fir=(fir_length-1)/2;
	int sample_rata=i_fir_list->sample_rata;
	float mean,STD;
	//int before_num=(int)(i_fir_list->sample_rata*before_interval);
	//int after_num=(int)(i_fir_list->sample_rata*after_interval);
	for(i=0;i<i_fir;i++)
		{
		now_list=now_list->last;
		}
	first_fir=now_list;
	mean=0.0;
	STD=0.0;
	
	for(i=0;i<sample_rata*3;i++)
		{
		mean+=now_list->dataV[2];
		now_list=now_list->last;
		}

	mean=mean/(sample_rata*3);
	now_list=first_fir;
	for(i=0;i<sample_rata*3;i++)
		{
		STD+=(now_list->dataV[2]-mean)*(now_list->dataV[2]-mean);
		now_list=now_list->last;
		}
	STD=pow((float)(STD/(sample_rata*3)),(float)(0.5));

	if((first_fir->dataV[2]-mean)>threshold*STD)
		{
		return -1;
		}
	else if((first_fir->dataV[2]-mean)<-1*threshold*STD)
		{
		return 1;
		}
	else
		{
		return 0;
		}


	}



float New_Intensity_calculation(float pga,float pgv,int style)
	{
	//style 2 水平合成数据计算 3 三方向合成数据计算
	//这里的单位都为米
	float result;
	float pga_multiple,pga_increment,pgv_multiple,pgv_increment;    //这组系数为1980烈度标准 默认就使用它（参数列表里的值先留着，便于以后修改（通过上位机以某种方式修改））

	if(style==2)
		{
		pga_multiple=3.20;    //这组系数为1980烈度标准 默认就使用它（参数列表里的值先留着，便于以后修改（通过上位机以某种方式修改））
		pga_increment=6.59;   //
		pgv_multiple=2.96;    //
		pgv_increment=9.78;   //
		}
	else if(style==3)
		{
		pga_multiple=3.17;    //这组系数为1980烈度标准 默认就使用它（参数列表里的值先留着，便于以后修改（通过上位机以某种方式修改））
		pga_increment=6.59;   //
		pgv_multiple=3.00;    //
		pgv_increment=9.77;   //
		}
	float ipga=pga_multiple*log10(pga/1000.0)+pga_increment; //传进来的是mm 转化为m
	float ipgv=pgv_multiple*log10(pgv/1000.0)+pgv_increment;
	if(ipga>=6.0&&ipgv>=6.0)
		{
		if (ipgv>12.0)
		{
		return(12.0);
		}
		else
			return(ipgv);
		}
	else if(ipga<6.0&&ipgv<6.0)
		{
		result=(ipga+ipgv)/2.0;

		if(result<1.0)
			{
			return(1.0);
			}
		else
			{
			return(result);
			}

		}

}